{% extends "work_base.html" %}
{% block content %}
    {% load math %}
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h3 class="page-header hd"> 我的回答</h3>
            </div>

        </div>
         <div class="row">
            <div class="panel panel-default" style="height: 500px;">
                <div class="panel-heading">
                    <i class="glyphicon  glyphicon-question-sign   "></i></div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover">
                                    <thead>
                                        <tr>
                                            <th>序号</th>
                                            <th>问题</th>
                                            <th>回复数</th>
                                            <th>最近回答时间</th>
                                            <th>最近回答人</th>
                                            <th>提问时间</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    {% for ans in ans_info %}
                                        {% with ask=ans.get_ask %}
                                        {% with last_ans=ask.get_last_ans %}
                                        <tr>
                                            <td>{{ forloop.counter }}{{ ans.get_ask }}</td>
                                            <td><a href="/ask/detail/{{ ask.askid }}.html" target="_blank">{{ ask.ask_content|slice:":10" }}..</a></td>
                                            <td>{{ ask.get_answer_count }}</td>
                                            <td>{% if last_ans %}{{ last_ans.get_date_time }}{% else %}----{% endif %}</td>
                                            <td>{{ last_ans.get_user.username }}</td>
                                            <td>{{ ask.get_date_time }}</td>
                                        </tr>
                                        {% endwith %}
                                        {% endwith %}
                                    {% endfor %}

                                    </tbody>
                                </table>
                            </div>

                </div>
                <!-- /.panel-body -->
            </div>
        </div>

        {% if allinfo_paginator.num_pages >= 2 %}
        {% load range %}
        <div class="row">
            <div style="text-align: center">
                <ul class="pagination">
                    <li>
                        <a href="{{ request.path }}?page=1">首页</a>
                    </li>
                    {% for i in page|near:4 %}
                        {% if i > 0 and i <= allinfo_paginator.num_pages %}
                    <li {% if i == page %}class="active" {% endif %}>
                        <a href="{{ request.path }}?page={{ i }}" >{{ i }}</a>
                    </li>{% endif %}{% endfor %}
                {% if allinfo.has_next %}
                    <li><a title="下一页"
                           href="{{ request.path }}?page={{ allinfo.next_page_number }}">
                        &gt;&gt;</a></li>{% endif %}
                    <li>
                        <a href="{{ request.path }}?page={{ allinfo_paginator.num_pages }}">尾页</a>
                    </li>
                </ul>
            </div>
        </div>
    {% endif %}

    </div>

{% endblock %}