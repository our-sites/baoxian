define("com/global/1.0.0:validator",["com/validator/0.10.3:validator","com/global/1.0.0:dollar","lib/toastr/2.1.3:toastr","lib/art-dialog/6.0.5:art-dialog"],function(t,r,e){var o=t("com/validator/0.10.3:validator"),a=t("com/global/1.0.0:dollar"),n=t("lib/toastr/2.1.3:toastr"),i=t("lib/art-dialog/6.0.5:art-dialog"),l=1,s=o.extend({showError:function(t,r){var e=this,o=e.query(t);o&&e.get("showMessage").call(e,r,o.element)},showErrors:function(t){var r=this;if(a.isArray(t))for(var e in t){var o=t[e];r.showError(o.selector,o.msg)}},getSubmitData:function(){return this.element.serialize()},transformSelectors:function(t,r){for(var e in t){var o=t[e],a='[name="'+o.name+'"]';t[e].selector=r?r+" "+a:a}return t},formErrorHandle:function(t){if(800===t.errorCode){var r=i({content:t.data.html});r.showModal();var e=a(r.node),n=e.find("form");if(n.length){var s=new o({element:n});n.find(".popup-login-input-text").each(function(){var t="login-text-"+l++;a(this).attr("id",t);var r=a(this).attr("placeholder");s.addItem({element:"#"+t,required:!0,display:r})}),n.on("click",".popup-login-close",function(t){t.preventDefault(),r.remove()}),console.log(s),s.after("formSuccessHandle",function(){alert(3)})}}else{var d=t.formError||{},c=d.fields||[];c.length&&(c=this.transformSelectors(c),this.showErrors(c))}},formSuccessHandle:function(t){var r=t.formSuccess||{},e=5e3;"undefined"!=typeof r.duration&&(e=parseInt(r.duration,10)||0),r.tip!==!1&&n.success(r.msg||t.msg||"",{timeOut:e}),r.redirect&&setTimeout(function(){location.href=r.redirect},e)},formHandle:function(t){t.errorCode?this.formErrorHandle(t):this.formSuccessHandle(t)},attrs:{autoFocus:!1,autoSubmit:!1,failSilently:!0,onFormValidated:function(t,r,e){if(!e.data("form-is-submitting")&&!t){var o=this,n=e.data("url")||e.attr("action"),i=e.data("method")||e.attr("method")||"GET",l=e.data("type")||"json";e.data("form-is-submitting",!0),a.ajax({url:n,type:i,dataType:l,data:o.getSubmitData(),complete:function(){e.data("form-is-submitting",!1)},success:function(t){o.formHandle(t)}})}}}});e.exports=s.extend({formErrorHandle:function(t){var r=this;if(800===t.errorCode){var e=i({content:t.data.html});e.showModal();var o=a(e.node),n=o.find("form"),d=new s({element:n});n.find(".popup-login-input-text").each(function(){var t="login-text-"+l++;a(this).attr("id",t);var r=a(this).attr("placeholder");d.addItem({element:"#"+t,required:!0,display:r})}),o.on("click",".popup-login-close",function(t){t.preventDefault(),e.remove()}).on("click",".popup-login-submit",function(t){t.preventDefault(),n.submit()}),d.before("formSuccessHandle",function(){return e.remove(),r.element.submit(),!1})}else{var c=t.formError||{},f=c.fields||[];f.length&&(f=this.transformSelectors(f),this.showErrors(f))}}})});