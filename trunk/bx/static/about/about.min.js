/**
 * Created by zhou on 17/3/30.
 */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};define("template",["jquery"],function(e){"use strict";return function(t,n){var r;return r=t||"",e.each(n,function(t,n){var i,o;i="undefined"==typeof n?"undefined":_typeof(n),o=new RegExp("{{\\s*"+t+"\\s*}}","g"),"object"===i&&null!==n?e.each(n,function(e,n){var i;i=new RegExp("{{\\s*"+t+"."+e+"\\s*}}","g"),r=r.replace(i,n)}):r=r.replace(o,n)}),r}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};define("sfModal",["jquery","template"],function(e,t){"use strict";return function(n){var r,i;if("object"!==("undefined"==typeof n?"undefined":_typeof(n))){if("hide"===n)return void e(".sfmodal").modal("hide");if("toggle"===n)return void e(".sfmodal").modal("toggle");n={content:n,hideDone:!0}}r=e.extend({hideTitle:!1,hideFooter:!1,modalSize:"",title:"操作失败",content:"玩脱了",wrapper:null,$content:null,hideClose:!1,closeText:"取消",closeClass:"btn-default",backdrop:!0,closeFn:function(){},hideDone:!1,doneText:"确认",doneClass:"btn-primary",keyboard:"true",afterShow:function(){},doneFn:function(){e(".sfmodal").modal("hide")},show:function(){},shown:function(){},hide:function(){},hidden:function(){},loaded:function(){}},n),i='<div class="sfmodal modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">  <div class="modal-dialog {{modalSize}}">    <div class="modal-content">      '+(r.hideTitle?"":'<div class="modal-header">        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>        <h4 class="modal-title">{{title}}</h4>      </div>')+'<div class="modal-body">        <p class="sfModal-content">          </div>          <div class="modal-footer '+(r.hideFooter?"hidden":"")+'">'+(r.hideClose?"":'<button type="button" class="btn {{closeClass}}" data-dismiss="modal">{{closeText}}</button>')+(r.hideDone?"":'<button type="button" class="btn {{doneClass}} done-btn">{{doneText}}</button>')+"</div>        </div>      </div>    </div>",e(".sfmodal").length>0&&(e(".sfmodal").remove(),e(".modal-backdrop").remove()),r.wrapper?(e(r.wrapper).append(t(i,r)),e(r.wrapper).append('<div class="modal-backdrop in"></div>')):e("body").append(t(i,r)),r.$content?e(".sfmodal .sfModal-content").append(r.$content):e(".sfmodal .sfModal-content").html(r.content),e(".sfmodal").modal({keyboard:r.keyboard,backdrop:r.backdrop}),e(".sfmodal").on("show.bs.modal",r.show).on("hide.bs.modal",function(t){r.hide(t),r.wrapper&&e(".modal-backdrop").remove()}).on("hidden.bs.modal",r.hidden).on("loaded.bs.modal",r.loaded).on("shown.bs.modal",r.shown).modal("show"),r.afterShow&&r.afterShow(),e(".sfmodal .done-btn").click(function(t){r.doneFn(t),r.wrapper&&e(".modal-backdrop").remove()}),e(".sfmodal .close-btn").click(function(t){r.closeFn(t),r.wrapper&&e(".modal-backdrop").remove()})}}),define("mobile",["jquery"],function(e){return window.innerWidth>767?{login:null,signup:null}:(e(".hate, .like").data("toggle","false"),{login:function(){location.href="/user/login"},signup:function(){location.href="/user/register"}})}),define("isMobile",[],function(){var e;return e=function(e){var t,n;return t={Android:function(){return navigator.userAgent.match(/Android/i)?!0:!1},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?!0:!1},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?!0:!1},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Windows()}},n=t[e]()||!1}}),function(e){e.fn.hoverIntent=function(t,n,r,i){var o={interval:i||400,sensitivity:5,timeout:600};o="object"==typeof t?e.extend(o,t):e.isFunction(n)?e.extend(o,{over:t,out:n,selector:r}):e.extend(o,{over:t,out:t,selector:n});var a,s,l,c,u=function(e){a=e.pageX,s=e.pageY},d=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.sqrt((l-a)*(l-a)+(c-s)*(c-s))<o.sensitivity?(e(n).off("mousemove.hoverIntent",u),n.hoverIntent_s=!0,o.over.apply(n,[t])):(l=a,c=s,n.hoverIntent_t=setTimeout(function(){d(t,n)},o.interval),void 0)},h=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=!1,o.out.apply(t,[e])},f=function(t){var n=e.extend({},t),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"===t.type?(l=n.pageX,c=n.pageY,e(r).on("mousemove.hoverIntent",u),r.hoverIntent_s||(r.hoverIntent_t=setTimeout(function(){d(n,r)},o.interval))):(e(r).off("mousemove.hoverIntent",u),r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){h(n,r)},o.timeout)))};return this.on({"mouseenter.hoverIntent":f,"mouseleave.hoverIntent":f},o.selector)}}(jQuery),define("jquery_hoverIntent",["jquery"],function(e){return function(){var t;return t||e.$.fn.hoverIntent}}(this)),define("sfAjax",["jquery"],function(e){"use strict";e.sfAjax=function(t,n,r,i){var o,a,s,l;a=e.extend({id:t.data("id")||t.closest(".js__content-ops").data("id"),"do":t.data("do")||t.data("action"),type:t.data("type")},r),o=a["do"],s=o.indexOf("/cancel")>0?o.replace("/cancel",""):o+"/cancel",l="/api/"+a.type+"/"+a.id+"/"+a["do"],e.post(l,function(e){0===e.status?(t.data("do",s),n?n(e):location.reload()):i&&i(e)})}}),function(e){"function"==typeof define&&define.amd?define("jquery_cookie",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function r(e){return t(s.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),s.json?JSON.parse(e):e}catch(t){}}function o(t,n){var r=s.raw?t:i(t);return e.isFunction(n)?n(r):r}var a=/\+/g,s=e.cookie=function(i,a,l){if(void 0!==a&&!e.isFunction(a)){if(l=e.extend({},s.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[t(i),"=",r(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=i?void 0:{},h=document.cookie?document.cookie.split("; "):[],f=0,p=h.length;p>f;f++){var g=h[f].split("="),m=n(g.shift()),v=g.join("=");if(i&&i===m){d=o(v,a);break}i||void 0===(v=o(v))||(d[m]=v)}return d};s.defaults={},e.removeCookie=function(t,n){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),function(e,t,n,r){var i=e(t);e.fn.lazyload=function(o){function a(){var t=0;l.each(function(){var n=e(this);if(!c.skip_invisible||n.is(":visible"))if(e.abovethetop(this,c)||e.leftofbegin(this,c));else if(e.belowthefold(this,c)||e.rightoffold(this,c)){if(++t>c.failure_limit)return!1}else n.trigger("appear"),t=0})}var s,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:SF.staticUrl+"/global/img/squares.svg"};return o&&(r!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),r!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),e.extend(c,o)),s=c.container===r||c.container===t?i:e(c.container),0===c.event.indexOf("scroll")&&s.bind(c.event,function(){return a()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",c.placeholder),n.one("appear",function(){if(!this.loaded){if(c.appear){var r=l.length;c.appear.call(t,r,c)}e("<img />").bind("load",function(){var r=n.attr("data-"+c.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[c.effect](c.effect_speed),t.loaded=!0;var i=e.grep(l,function(e){return!e.loaded});if(l=e(i),c.load){var o=l.length;c.load.call(t,o,c)}}).attr("src",n.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){t.loaded||n.trigger("appear")})}),i.bind("resize",function(){a()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){a()}),this},e.belowthefold=function(n,o){var a;return a=o.container===r||o.container===t?(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():e(o.container).offset().top+e(o.container).height(),a<=e(n).offset().top-o.threshold},e.rightoffold=function(n,o){var a;return a=o.container===r||o.container===t?i.width()+i.scrollLeft():e(o.container).offset().left+e(o.container).width(),a<=e(n).offset().left-o.threshold},e.abovethetop=function(n,o){var a;return a=o.container===r||o.container===t?i.scrollTop():e(o.container).offset().top,a>=e(n).offset().top+o.threshold+e(n).height()},e.leftofbegin=function(n,o){var a;return a=o.container===r||o.container===t?i.scrollLeft():e(o.container).offset().left,a>=e(n).offset().left+o.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("jquery_lazyload",["jquery"],function(e){return function(){var t;return t||e.$.fn.lazyload}}(this)),function(){var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,o=n.push,a=n.slice,s=n.concat,l=r.toString,c=r.hasOwnProperty,u=Array.isArray,d=Object.keys,h=i.bind,f=function(e){return e instanceof f?e:this instanceof f?void(this._wrapped=e):new f(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports._=f):e._=f,f.VERSION="1.7.0";var p=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}};f.iteratee=function(e,t,n){return null==e?f.identity:f.isFunction(e)?p(e,t,n):f.isObject(e)?f.matches(e):f.property(e)},f.each=f.forEach=function(e,t,n){if(null==e)return e;t=p(t,n);var r,i=e.length;if(i===+i)for(r=0;i>r;r++)t(e[r],r,e);else{var o=f.keys(e);for(r=0,i=o.length;i>r;r++)t(e[o[r]],o[r],e)}return e},f.map=f.collect=function(e,t,n){if(null==e)return[];t=f.iteratee(t,n);for(var r,i=e.length!==+e.length&&f.keys(e),o=(i||e).length,a=Array(o),s=0;o>s;s++)r=i?i[s]:s,a[s]=t(e[r],r,e);return a};var g="Reduce of empty array with no initial value";f.reduce=f.foldl=f.inject=function(e,t,n,r){null==e&&(e=[]),t=p(t,r,4);var i,o=e.length!==+e.length&&f.keys(e),a=(o||e).length,s=0;if(arguments.length<3){if(!a)throw new TypeError(g);n=e[o?o[s++]:s++]}for(;a>s;s++)i=o?o[s]:s,n=t(n,e[i],i,e);return n},f.reduceRight=f.foldr=function(e,t,n,r){null==e&&(e=[]),t=p(t,r,4);var i,o=e.length!==+e.length&&f.keys(e),a=(o||e).length;if(arguments.length<3){if(!a)throw new TypeError(g);n=e[o?o[--a]:--a]}for(;a--;)i=o?o[a]:a,n=t(n,e[i],i,e);return n},f.find=f.detect=function(e,t,n){var r;return t=f.iteratee(t,n),f.some(e,function(e,n,i){return t(e,n,i)?(r=e,!0):void 0}),r},f.filter=f.select=function(e,t,n){var r=[];return null==e?r:(t=f.iteratee(t,n),f.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r)},f.reject=function(e,t,n){return f.filter(e,f.negate(f.iteratee(t)),n)},f.every=f.all=function(e,t,n){if(null==e)return!0;t=f.iteratee(t,n);var r,i,o=e.length!==+e.length&&f.keys(e),a=(o||e).length;for(r=0;a>r;r++)if(i=o?o[r]:r,!t(e[i],i,e))return!1;return!0},f.some=f.any=function(e,t,n){if(null==e)return!1;t=f.iteratee(t,n);var r,i,o=e.length!==+e.length&&f.keys(e),a=(o||e).length;for(r=0;a>r;r++)if(i=o?o[r]:r,t(e[i],i,e))return!0;return!1},f.contains=f.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=f.values(e)),f.indexOf(e,t)>=0)},f.invoke=function(e,t){var n=a.call(arguments,2),r=f.isFunction(t);return f.map(e,function(e){return(r?t:e[t]).apply(e,n)})},f.pluck=function(e,t){return f.map(e,f.property(t))},f.where=function(e,t){return f.filter(e,f.matches(t))},f.findWhere=function(e,t){return f.find(e,f.matches(t))},f.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:f.values(e);for(var s=0,l=e.length;l>s;s++)r=e[s],r>o&&(o=r)}else t=f.iteratee(t,n),f.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},f.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:f.values(e);for(var s=0,l=e.length;l>s;s++)r=e[s],o>r&&(o=r)}else t=f.iteratee(t,n),f.each(e,function(e,n,r){i=t(e,n,r),(a>i||1/0===i&&1/0===o)&&(o=e,a=i)});return o},f.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:f.values(e),r=n.length,i=Array(r),o=0;r>o;o++)t=f.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},f.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=f.values(e)),e[f.random(e.length-1)]):f.shuffle(e).slice(0,Math.max(0,t))},f.sortBy=function(e,t,n){return t=f.iteratee(t,n),f.pluck(f.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var m=function(e){return function(t,n,r){var i={};return n=f.iteratee(n,r),f.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};f.groupBy=m(function(e,t,n){f.has(e,n)?e[n].push(t):e[n]=[t]}),f.indexBy=m(function(e,t,n){e[n]=t}),f.countBy=m(function(e,t,n){f.has(e,n)?e[n]++:e[n]=1}),f.sortedIndex=function(e,t,n,r){n=f.iteratee(n,r,1);for(var i=n(t),o=0,a=e.length;a>o;){var s=o+a>>>1;n(e[s])<i?o=s+1:a=s}return o},f.toArray=function(e){return e?f.isArray(e)?a.call(e):e.length===+e.length?f.map(e,f.identity):f.values(e):[]},f.size=function(e){return null==e?0:e.length===+e.length?e.length:f.keys(e).length},f.partition=function(e,t,n){t=f.iteratee(t,n);var r=[],i=[];return f.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},f.first=f.head=f.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:a.call(e,0,t)},f.initial=function(e,t,n){return a.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},f.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},f.rest=f.tail=f.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},f.compact=function(e){return f.filter(e,f.identity)};var v=function(e,t,n,r){if(t&&f.every(e,f.isArray))return s.apply(r,e);for(var i=0,a=e.length;a>i;i++){var l=e[i];f.isArray(l)||f.isArguments(l)?t?o.apply(r,l):v(l,t,n,r):n||r.push(l)}return r};f.flatten=function(e,t){return v(e,t,!1,[])},f.without=function(e){return f.difference(e,a.call(arguments,1))},f.uniq=f.unique=function(e,t,n,r){if(null==e)return[];f.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=f.iteratee(n,r));for(var i=[],o=[],a=0,s=e.length;s>a;a++){var l=e[a];if(t)a&&o===l||i.push(l),o=l;else if(n){var c=n(l,a,e);f.indexOf(o,c)<0&&(o.push(c),i.push(l))}else f.indexOf(i,l)<0&&i.push(l)}return i},f.union=function(){return f.uniq(v(arguments,!0,!0,[]))},f.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var o=e[r];if(!f.contains(t,o)){for(var a=1;n>a&&f.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},f.difference=function(e){var t=v(a.call(arguments,1),!0,!0,[]);return f.filter(e,function(e){return!f.contains(t,e)})},f.zip=function(e){if(null==e)return[];for(var t=f.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=f.pluck(arguments,r);return n},f.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},f.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=f.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(e[r]===t)return r;return-1},f.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},f.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;r>o;o++,e+=n)i[o]=e;return i};var b=function(){};f.bind=function(e,t){var n,r;if(h&&e.bind===h)return h.apply(e,a.call(arguments,1));if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");return n=a.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(a.call(arguments)));b.prototype=e.prototype;var i=new b;b.prototype=null;var o=e.apply(i,n.concat(a.call(arguments)));return f.isObject(o)?o:i}},f.partial=function(e){var t=a.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,o=r.length;o>i;i++)r[i]===f&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},f.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=f.bind(e[n],e);return e},f.memoize=function(e,t){var n=function(r){var i=n.cache,o=t?t.apply(this,arguments):r;return f.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},f.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},f.defer=function(e){return f.delay.apply(f,[e,1].concat(a.call(arguments,1)))},f.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:f.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var c=f.now();s||n.leading!==!1||(s=c);var u=t-(c-s);return r=this,i=arguments,0>=u||u>t?(clearTimeout(a),a=null,s=c,o=e.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(l,u)),o}},f.debounce=function(e,t,n){var r,i,o,a,s,l=function(){var c=f.now()-a;t>c&&c>0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=f.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(o,i),o=i=null),s}},f.wrap=function(e,t){return f.partial(t,e)},f.negate=function(e){return function(){return!e.apply(this,arguments)}},f.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},f.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},f.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},f.once=f.partial(f.before,2),f.keys=function(e){if(!f.isObject(e))return[];if(d)return d(e);var t=[];for(var n in e)f.has(e,n)&&t.push(n);return t},f.values=function(e){for(var t=f.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},f.pairs=function(e){for(var t=f.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},f.invert=function(e){for(var t={},n=f.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},f.functions=f.methods=function(e){var t=[];for(var n in e)f.isFunction(e[n])&&t.push(n);return t.sort()},f.extend=function(e){if(!f.isObject(e))return e;for(var t,n,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)c.call(t,n)&&(e[n]=t[n])}return e},f.pick=function(e,t,n){var r,i={};if(null==e)return i;if(f.isFunction(t)){t=p(t,n);for(r in e){var o=e[r];t(o,r,e)&&(i[r]=o)}}else{var l=s.apply([],a.call(arguments,1));e=new Object(e);for(var c=0,u=l.length;u>c;c++)r=l[c],r in e&&(i[r]=e[r])}return i},f.omit=function(e,t,n){if(f.isFunction(t))t=f.negate(t);else{var r=f.map(s.apply([],a.call(arguments,1)),String);t=function(e,t){return!f.contains(r,t)}}return f.pick(e,t,n)},f.defaults=function(e){if(!f.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var i in r)void 0===e[i]&&(e[i]=r[i])}return e},f.clone=function(e){return f.isObject(e)?f.isArray(e)?e.slice():f.extend({},e):e},f.tap=function(e,t){return t(e),e};var y=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof f&&(e=e._wrapped),t instanceof f&&(t=t._wrapped);var i=l.call(e);if(i!==l.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]===e)return r[o]===t;var a=e.constructor,s=t.constructor;if(a!==s&&"constructor"in e&&"constructor"in t&&!(f.isFunction(a)&&a instanceof a&&f.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var c,u;if("[object Array]"===i){if(c=e.length,u=c===t.length)for(;c--&&(u=y(e[c],t[c],n,r)););}else{var d,h=f.keys(e);if(c=h.length,u=f.keys(t).length===c)for(;c--&&(d=h[c],u=f.has(t,d)&&y(e[d],t[d],n,r)););}return n.pop(),r.pop(),u};f.isEqual=function(e,t){return y(e,t,[],[])},f.isEmpty=function(e){if(null==e)return!0;if(f.isArray(e)||f.isString(e)||f.isArguments(e))return 0===e.length;for(var t in e)if(f.has(e,t))return!1;return!0},f.isElement=function(e){return!(!e||1!==e.nodeType)},f.isArray=u||function(e){return"[object Array]"===l.call(e)},f.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},f.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){f["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),f.isArguments(arguments)||(f.isArguments=function(e){return f.has(e,"callee")}),"function"!=typeof/./&&(f.isFunction=function(e){return"function"==typeof e||!1}),f.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},f.isNaN=function(e){return f.isNumber(e)&&e!==+e},f.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===l.call(e)},f.isNull=function(e){return null===e},f.isUndefined=function(e){return void 0===e},f.has=function(e,t){return null!=e&&c.call(e,t)},f.noConflict=function(){return e._=t,this},f.identity=function(e){return e},f.constant=function(e){return function(){return e}},f.noop=function(){},f.property=function(e){return function(t){return t[e]}},f.matches=function(e){var t=f.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var i=t[r],o=i[0];if(i[1]!==e[o]||!(o in e))return!1}return!0}},f.times=function(e,t,n){var r=Array(Math.max(0,e));t=p(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},f.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},f.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_=f.invert(x),w=function(e){var t=function(t){return e[t]},n="(?:"+f.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};f.escape=w(x),f.unescape=w(_),f.result=function(e,t){if(null!=e){var n=e[t];return f.isFunction(n)?e[t]():n}};var k=0;f.uniqueId=function(e){var t=++k+"";return e?e+t:t},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,T=function(e){return"\\"+S[e]};f.template=function(e,t,n){!t&&n&&(t=n),t=f.defaults({},t,f.templateSettings);var r=RegExp([(t.escape||C).source,(t.interpolate||C).source,(t.evaluate||C).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(D,T),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(s){throw s.source=o,s}var l=function(e){return a.call(this,e,f)},c=t.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},f.chain=function(e){var t=f(e);return t._chain=!0,t};var E=function(e){return this._chain?f(e).chain():e};f.mixin=function(e){f.each(f.functions(e),function(t){var n=f[t]=e[t];f.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),E.call(this,n.apply(f,e))}})},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];f.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],E.call(this,n)}}),f.each(["concat","join","slice"],function(e){var t=n[e];f.prototype[e]=function(){return E.call(this,t.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}.call(this),function(e){function t(t,n,r,i){var o={data:i||0===i||i===!1?i:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:c,nest:u,wrap:d,html:h,update:f};return t&&e.extend(o,t,{nodes:[],parent:n}),r&&(o.tmpl=r,o._ctnt=o._ctnt||o.tmpl(e,o),o.key=++_,(k.length?y:b)[_]=o),o}function n(t,i,o){var a,s=o?e.map(o,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+m+'="'+t.key+'" $2'):e:n(e,t,e._ctnt)}):t;return i?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,i,o){a=e(i).get(),l(a),n&&(a=r(n).concat(a)),o&&(a=a.concat(r(o)))}),a?a:r(s))}function r(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function i(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,i,o,s,l){var c,u,d,h=e.tmpl.tag[r];if(!h)throw"Unknown template tag: "+r;return c=h._default||[],s&&!/\w$/.test(o)&&(o+=s,s=""),o?(o=a(o),l=l?","+a(l)+")":s?")":"",u=s?o.indexOf(".")>-1?o+a(s):"("+o+").call($item"+l:o,d=s?u:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):d=u=c.$1||"null",i=a(i),"');"+h[n?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(d).split("$1").join(u).split("$2").join(i||c.$2||"")+"__.push('"})+"');}return __;")}function o(t,r){t._wrap=n(t,!0,e.isArray(r)?r:[v.test(r)?r:e(r).html()]).join("")}function a(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function l(n){function r(n){function r(e){e+=c,a=u[e]=u[e]||t(a,b[a.parent.key+c]||a.parent)}var i,o,a,s,l=n;if(s=n.getAttribute(m)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(i=l.getAttribute(m)););i!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(m)||0:0,(a=b[s])||(a=y[s],a=t(a,b[l]||y[l]),a.key=++_,b[_]=a),w&&r(s)),n.removeAttribute(m)}else w&&(a=e.data(n,"tmplItem"))&&(r(a.key),b[a.key]=a,l=e.data(n.parentNode,"tmplItem"),l=l?l.key:0);if(a){for(o=a;o&&o.key!=l;)o.nodes.push(n),o=o.parent;delete a._ctnt,delete a._wrap,e.data(n,"tmplItem",a)}}var i,o,a,s,l,c="_"+w,u={};for(a=0,s=n.length;s>a;a++)if(1===(i=n[a]).nodeType){for(o=i.getElementsByTagName("*"),l=o.length-1;l>=0;l--)r(o[l]);r(i)}}function c(e,t,n,r){return e?void k.push({_:e,tmpl:t,item:this,data:n,options:r}):k.pop()}function u(t,n,r){return e.tmpl(e.template(t),n,r,this)}function d(t,n){var r=t.options||{};return r.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function h(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||s(e)})}function f(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var p,g=e.fn.domManip,m="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},y={},x={key:0,data:{}},_=0,w=0,k=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var i,o,a,s,l=[],c=e(r),u=1===this.length&&this[0].parentNode;if(p=b||{},u&&11===u.nodeType&&1===u.childNodes.length&&1===c.length)c[n](this[0]),l=this;else{for(o=0,a=c.length;a>o;o++)w=o,i=(o>0?this.clone(!0):this).get(),e(c[o])[n](i),l=l.concat(i);w=0,l=this.pushStack(l,t,c.selector)}return s=p,p=null,e.tmpl.complete(s),l}}),e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,r){if(t[0]&&e.isArray(t[0])){for(var i,o=e.makeArray(arguments),a=t[0],s=a.length,l=0;s>l&&!(i=e.data(a[l++],"tmplItem")););i&&w&&(o[2]=function(t){e.tmpl.afterManip(this,t,r)}),g.apply(this,o)}else g.apply(this,arguments);return w=0,!p&&e.tmpl.complete(b),this}}),e.extend({tmpl:function(r,i,a,s){var l,c=!s;if(c)s=x,r=e.template[r]||e.template(null,r),y={};else if(!r)return r=s.tmpl,b[s.key]=s,s.nodes=[],s.wrapped&&o(s,s.wrapped),e(n(s,null,s.tmpl(e,s)));return r?("function"==typeof i&&(i=i.call(s||{})),a&&a.wrapped&&o(a,a.wrapped),l=e.isArray(i)?e.map(i,function(e){return e?t(a,s,r,e):null}):[t(a,s,r,i)],c?e(n(s,null,l)):l):[]},tmplItem:function(t){var n;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode););return n||x},template:function(t,n){return n?("string"==typeof n?n=i(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",i(n.innerHTML))),"string"==typeof t?e.template[t]=n:n):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,v.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(t,n,r){var i=11===n.nodeType?e.makeArray(n.childNodes):1===n.nodeType?[n]:[];r.call(t,n),l(i),w++}})}(jQuery),define("jquery_tmpl",["jquery"],function(e){return function(){var t;return t||e.$.fn.tmpl}}(this)),define("typeHelper",["jquery","jquery_tmpl"],function(e){"use strict";var t,n,r,i,o,a,s,l;s='<ul class="dropdown-menu" role="menu"></ul>',i=void 0,t=void 0,r=void 0,n=void 0,o=void 0,a=["gmail.com","qq.com","163.com","hotmail.com","sina.com","126.com","live.com","live.cn","vip.sina.com","vip.qq.com","sina.cn","sohu.com","139.com","wo.com.cn","189.cn","21cn.com"],l='<button class="btn btn-default result" type="button">${result}</button><a href="#" class="i-cancel ml10 delete-result">&times;</a>',e.fn.typeHelperOld=function(c){var u;i=e.extend({data:null,tpl:'<li><a href="#" data-value="${name}">${name}</a></li>',defaultList:[],showNum:5,remoteData:null,submitKey:null,onlyResult:!0,autoSelect:!0,emailMode:!1,insertHandler:function(){}
},c),u=[],n=e(this),0!==n.length&&(n.after(e("<div></div>").addClass("typehelper")).siblings(".typehelper").append(n),t=n.parent().css("position","relative"),e.tmpl(s).insertAfter(n),r=t.find("ul").hide().css("minWidth",n.outerWidth()),e.each(i.defaultList,function(t,n){e.tmpl(i.tpl,n).appendTo(r)}),n.on("focus",function(){i.defaultList.length>0&&e(this).parent().trigger("show.typehelper")}),n.on("input",function(t){n.is(":focus")&&(e(this).parent().trigger("search.typehelper"),e(this).parent().trigger("show.typehelper"))}),n.on("keydown",function(t){e(this).parent().trigger("select.typehelper",t)}),r.delegate("li","mouseover",function(){e(this).siblings("li").removeClass("active"),e(this).addClass("active")}),n.on("blur",function(){var t,n;e(this).parent().trigger("hide.typehelper"),i.autoSelect&&(e(this).siblings("ul").find(".active").length>0?(t=r.find(".active").index(),n=u[t],e(this).parent().trigger("insert.typehelper",[r.find(".active a"),n])):e(this).val(""))}),t.on("show.typehelper",function(){e(this).find("ul").show()}),t.on("hide.typehelper",function(){e(this).find("ul").hide()}),t.on("insert.typehelper",function(o,a,s){t=e(this),n=t.find("input"),r=t.find("ul"),n.val(e(a).data("value")),e(".result",t).length>0&&(e(".result",t).remove(),t.find(".delete-result").remove()),i.onlyResult&&(n.hide(),r.after(e.tmpl(l,{result:n.val()})),i.submitKey&&n.data(i.submitKey,e(a).data(i.submitKey)),t.find(".result").on("click",function(){e(this).siblings(".delete-result").remove(),e(this).remove(),n.show().focus(),t.trigger("search.typehelper")}),t.find(".delete-result").on("click",function(){return e(this).siblings(".result").remove(),e(this).remove(),n.val("").show(),!1})),t.parents(".form-group").next(".form-group").find("input").focus(),i.insertHandler(s)}),t.on("select.typehelper",function(i,o){var a,s,l,c,d,h;if(t=e(this),n=t.find("input"),r=t.find("ul"),a=r.find("li"),o)switch(o.keyCode){case 9:o.shiftKey||(o.preventDefault(),t.parent(".form-group").next(".form-group").find("input").focus());break;case 38:o.preventDefault(),a.length&&(r.find(".active").length?r.find(".active").removeClass("active").prev("li").addClass("active"):a.last().addClass("active"));break;case 40:o.preventDefault(),a.length&&(r.find(".active").length?r.find(".active").removeClass("active").next("li").addClass("active"):a.first().addClass("active"));break;case 13:if(o.stopPropagation(),o.preventDefault(),r.find(".active").length<=0)return;c=r.find(".active").index(),h=u[c],t.trigger("insert.typehelper",[r.find(".active a"),h]),t.trigger("hide.typehelper");break;case 9:s=e(this).parents("form").find("input"),l=s.index(e("input:focus")),-1!==l&&(d=s.slice(l+1),d.length&&d.each(function(){var t,n;return n=e(this).attr("type"),t=["text","email","password","url"],e(this).val()||-1===t.indexOf(n)?void 0:(e(this).focus(),!1)}));break;case 27:o.preventDefault();break;default:return}}),t.on("search.typehelper",function(){var s,l,c,d;if(t=e(this),n=t.find("input"),r=t.find("ul"),n.val().length)if(c=[],i.remoteData)i.remoteData(n.val(),function(t){u=t,c=t,c.length>0&&(r.children().remove(),e.tmpl(i.tpl,c).appendTo(r),1===c.length&&r.children().first().addClass("active"))});else{for(d=0,i.emailMode&&(i.data=[{name:n.val()}],e.each(a,function(e,t){n.val().split("@")[1]!=t&&i.data.push({name:n.val().replace(/@.*$/,"")+"@"+t})})),o=i.data.length,l=0;o>l&&(s=i.data[l],!(0===s.name.toLowerCase().indexOf(n.val().toLowerCase())&&(c.push(s),d++,d>=i.showNum)));)l++;c.length>0&&(r.children().remove(),e.tmpl(i.tpl,c).appendTo(r),(1===c.length||i.emailMode)&&r.children().first().addClass("active"))}}),n.val().length>0&&t.trigger("insert.typehelper",n))}}),function(e){"function"==typeof define&&define.amd?define("jquery-mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),c=0,d=0,h=0,f=0,p=0,g=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(h=-1*a.detail),"wheelDelta"in a&&(h=a.wheelDelta),"wheelDeltaY"in a&&(h=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*h,h=0),c=0===h?d:h,"deltaY"in a&&(h=-1*a.deltaY,c=h),"deltaX"in a&&(d=a.deltaX,0===h&&(c=-1*d)),0!==h||0!==d){if(1===a.deltaMode){var m=e.data(this,"mousewheel-line-height");c*=m,h*=m,d*=m}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,h*=v,d*=v}if(f=Math.max(Math.abs(h),Math.abs(d)),(!o||o>f)&&(o=f,r(a,f)&&(o/=40)),r(a,f)&&(c/=40,d/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/o),d=Math[d>=1?"floor":"ceil"](d/o),h=Math[h>=1?"floor":"ceil"](h/o),u.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();p=t.clientX-b.left,g=t.clientY-b.top}return t.deltaX=d,t.deltaY=h,t.deltaFactor=o,t.offsetX=p,t.offsetY=g,t.deltaMode=0,s.unshift(t,c,d,h),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){o=null}function r(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=a.length;c;)e.event.fixHooks[a[--c]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var n="function"==typeof define&&define.amd,r="undefined"!=typeof module&&module.exports,i="https:"==document.location.protocol?"https:":"http:",o="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";n||(r?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+i+"//"+o+"%3E%3C/script%3E"))),t()}(function(){var t,n="mCustomScrollbar",r="mCS",i=".mCustomScrollbar",o={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},a=0,s={},l=window.attachEvent&&!window.addEventListener?1:0,c=!1,u=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],d={init:function(t){var t=e.extend(!0,{},o,t),n=h.call(this);if(t.live){var l=t.liveSelector||this.selector||i,c=e(l);if("off"===t.live)return void p(l);s[l]=setTimeout(function(){c.mCustomScrollbar(t),"once"===t.live&&c.length&&p(l)},500)}else p(l);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":g(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=m(t.scrollButtons.scrollType),f(t),e(n).each(function(){var n=e(this);if(!n.data(r)){n.data(r,{idx:++a,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var i=n.data(r),o=i.opt,s=n.data("mcs-axis"),l=n.data("mcs-scrollbar-position"),c=n.data("mcs-theme");s&&(o.axis=s),l&&(o.scrollbarPosition=l),c&&(o.theme=c,f(o)),v.call(this),i&&o.callbacks.onCreate&&"function"==typeof o.callbacks.onCreate&&o.callbacks.onCreate.call(this),e("#mCSB_"+i.idx+"_container img:not(."+u[2]+")").addClass(u[2]),d.update.call(null,n)}})},update:function(t,n){var i=t||h.call(this);return e(i).each(function(){var t=e(this);if(t.data(r)){var i=t.data(r),o=i.opt,a=e("#mCSB_"+i.idx+"_container"),s=e("#mCSB_"+i.idx),l=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")];if(!a.length)return;i.tweenRunning&&V(t),n&&i&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),t.hasClass(u[3])&&t.removeClass(u[3]),t.hasClass(u[4])&&t.removeClass(u[4]),s.css("max-height","none"),s.height()!==t.height()&&s.css("max-height",t.height()),y.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||a.css("width",b(a)),i.overflowed=C.call(this),E.call(this),o.autoDraggerLength&&_.call(this),w.call(this),D.call(this);var c=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==o.axis&&(i.overflowed[0]?l[0].height()>l[0].parent().height()?S.call(this):(X(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),i.contentReset.y=null):(S.call(this),"y"===o.axis?T.call(this):"yx"===o.axis&&i.overflowed[1]&&X(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(i.overflowed[1]?l[1].width()>l[1].parent().width()?S.call(this):(X(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),i.contentReset.x=null):(S.call(this),"x"===o.axis?T.call(this):"yx"===o.axis&&i.overflowed[0]&&X(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),n&&i&&(2===n&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===n&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),W.call(this)}})},scrollTo:function(t,n){if("undefined"!=typeof t&&null!=t){var i=h.call(this);return e(i).each(function(){var i=e(this);if(i.data(r)){var o=i.data(r),a=o.opt,s={trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=e.extend(!0,{},s,n),c=P.call(this,t),u=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=H.call(this,c[0],"y"),c[1]=H.call(this,c[1],"x"),l.moveDragger&&(c[0]*=o.scrollRatio.y,c[1]*=o.scrollRatio.x),l.dur=ne()?0:u,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==a.axis&&o.overflowed[0]&&(l.dir="y",l.overwrite="all",X(i,c[0].toString(),l)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==a.axis&&o.overflowed[1]&&(l.dir="x",l.overwrite="none",X(i,c[1].toString(),l))},l.timeout)}})}},stop:function(){var t=h.call(this);return e(t).each(function(){var t=e(this);t.data(r)&&V(t)})},disable:function(t){var n=h.call(this);return e(n).each(function(){var n=e(this);if(n.data(r)){n.data(r);W.call(this,"remove"),T.call(this),t&&S.call(this),E.call(this,!0),n.addClass(u[3])}})},destroy:function(){var t=h.call(this);return e(t).each(function(){var i=e(this);if(i.data(r)){var o=i.data(r),a=o.opt,s=e("#mCSB_"+o.idx),l=e("#mCSB_"+o.idx+"_container"),c=e(".mCSB_"+o.idx+"_scrollbar");a.live&&p(a.liveSelector||e(t).selector),W.call(this,"remove"),T.call(this),S.call(this),i.removeData(r),Z(this,"mcs"),c.remove(),l.find("img."+u[2]).removeClass(u[2]),s.replaceWith(l.contents()),i.removeClass(n+" _"+r+"_"+o.idx+" "+u[6]+" "+u[7]+" "+u[5]+" "+u[3]).addClass(u[4])}})}},h=function(){return"object"!=typeof e(this)||e(this).length<1?i:this},f=function(t){var n=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],r=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],i=["minimal","minimal-dark"],o=["minimal","minimal-dark"],a=["minimal","minimal-dark"];t.autoDraggerLength=e.inArray(t.theme,n)>-1?!1:t.autoDraggerLength,t.autoExpandScrollbar=e.inArray(t.theme,r)>-1?!1:t.autoExpandScrollbar,t.scrollButtons.enable=e.inArray(t.theme,i)>-1?!1:t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,o)>-1?!0:t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,a)>-1?"outside":t.scrollbarPosition},p=function(e){s[e]&&(clearTimeout(s[e]),Z(s,e))},g=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},m=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},v=function(){var t=e(this),i=t.data(r),o=i.opt,a=o.autoExpandScrollbar?" "+u[1]+"_expand":"",s=["<div id='mCSB_"+i.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+i.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+i.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+i.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===o.axis?s[0]+s[1]:"x"===o.axis?s[1]:s[0],d="yx"===o.axis?"<div id='mCSB_"+i.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",h=o.autoHideScrollbar?" "+u[6]:"",f="x"!==o.axis&&"rtl"===i.langDir?" "+u[7]:"";o.setWidth&&t.css("width",o.setWidth),o.setHeight&&t.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===i.langDir?"989999px":o.setLeft,t.addClass(n+" _"+r+"_"+i.idx+h+f).wrapInner("<div id='mCSB_"+i.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+l+"'><div id='mCSB_"+i.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir="+i.langDir+" /></div>");var p=e("#mCSB_"+i.idx),g=e("#mCSB_"+i.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||g.css("width",b(g)),"outside"===o.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),p.addClass("mCSB_outside").after(c)):(p.addClass("mCSB_inside").append(c),g.wrap(d)),x.call(this);var m=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")];m[0].css("min-height",m[0].height()),m[1].css("min-width",m[1].width())},b=function(t){var n=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],r=t.parent().width();return n[0]>r?n[0]:n[1]>r?n[1]:"100%"},y=function(){var t=e(this),n=t.data(r),i=n.opt,o=e("#mCSB_"+n.idx+"_container");if(i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis){o.css({width:"auto","min-width":0,"overflow-x":"scroll"});var a=Math.ceil(o[0].scrollWidth);3===i.advanced.autoExpandHorizontalScroll||2!==i.advanced.autoExpandHorizontalScroll&&a>o.parent().width()?o.css({width:a,"min-width":"100%","overflow-x":"inherit"}):o.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(o[0].getBoundingClientRect().right+.4)-Math.floor(o[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},x=function(){var t=e(this),n=t.data(r),i=n.opt,o=e(".mCSB_"+n.idx+"_scrollbar:first"),a=ee(i.scrollButtons.tabindex)?"tabindex='"+i.scrollButtons.tabindex+"'":"",s=["<a href='#' class='"+u[13]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[14]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[15]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[16]+"' oncontextmenu='return false;' "+a+" />"],l=["x"===i.axis?s[2]:s[0],"x"===i.axis?s[3]:s[1],s[2],s[3]];i.scrollButtons.enable&&o.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])},_=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),o=e("#mCSB_"+n.idx+"_container"),a=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],s=[i.height()/o.outerHeight(!1),i.width()/o.outerWidth(!1)],c=[parseInt(a[0].css("min-height")),Math.round(s[0]*a[0].parent().height()),parseInt(a[1].css("min-width")),Math.round(s[1]*a[1].parent().width())],u=l&&c[1]<c[0]?c[0]:c[1],d=l&&c[3]<c[2]?c[2]:c[3];a[0].css({height:u,"max-height":a[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),a[1].css({width:d,"max-width":a[1].parent().width()-10})},w=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),o=e("#mCSB_"+n.idx+"_container"),a=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],s=[o.outerHeight(!1)-i.height(),o.outerWidth(!1)-i.width()],l=[s[0]/(a[0].parent().height()-a[0].height()),s[1]/(a[1].parent().width()-a[1].width())];n.scrollRatio={y:l[0],x:l[1]}},k=function(e,t,n){var r=n?u[0]+"_expanded":"",i=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(u[0]+" "+r),i.toggleClass(u[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(u[0]),i.removeClass(u[1])):(e.addClass(u[0]),i.addClass(u[1])))},C=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),o=e("#mCSB_"+n.idx+"_container"),a=null==n.overflowed?o.height():o.outerHeight(!1),s=null==n.overflowed?o.width():o.outerWidth(!1),l=o[0].scrollHeight,c=o[0].scrollWidth;return l>a&&(a=l),c>s&&(s=c),[a>i.height(),s>i.width()]},S=function(){var t=e(this),n=t.data(r),i=n.opt,o=e("#mCSB_"+n.idx),a=e("#mCSB_"+n.idx+"_container"),s=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];if(V(t),("x"!==i.axis&&!n.overflowed[0]||"y"===i.axis&&n.overflowed[0])&&(s[0].add(a).css("top",0),X(t,"_resetY")),"y"!==i.axis&&!n.overflowed[1]||"x"===i.axis&&n.overflowed[1]){var l=dx=0;"rtl"===n.langDir&&(l=o.width()-a.outerWidth(!1),dx=Math.abs(l/n.scrollRatio.x)),a.css("left",l),s[1].css("left",dx),X(t,"_resetX")}},D=function(){function t(){a=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(a),N.call(n[0])):t()},100)}var n=e(this),i=n.data(r),o=i.opt;if(!i.bindEvents){if(L.call(this),o.contentTouchScroll&&B.call(this),A.call(this),o.mouseWheel.enable){var a;t()}F.call(this),O.call(this),o.advanced.autoScrollOnFocus&&z.call(this),o.scrollButtons.enable&&R.call(this),o.keyboard.enable&&j.call(this),i.bindEvents=!0}},T=function(){var t=e(this),n=t.data(r),i=n.opt,o=r+"_"+n.idx,a=".mCSB_"+n.idx+"_scrollbar",s=e("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+a+" ."+u[12]+",#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+a+">a"),l=e("#mCSB_"+n.idx+"_container");i.advanced.releaseDraggableSelectors&&s.add(e(i.advanced.releaseDraggableSelectors)),i.advanced.extraDraggableSelectors&&s.add(e(i.advanced.extraDraggableSelectors)),n.bindEvents&&(e(document).add(e(!I()||top.document)).unbind("."+o),s.each(function(){e(this).unbind("."+o)}),clearTimeout(t[0]._focusTimeout),Z(t[0],"_focusTimeout"),clearTimeout(n.sequential.step),Z(n.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),Z(l[0],"onCompleteTimeout"),n.bindEvents=!1)},E=function(t){var n=e(this),i=n.data(r),o=i.opt,a=e("#mCSB_"+i.idx+"_container_wrapper"),s=a.length?a:e("#mCSB_"+i.idx+"_container"),l=[e("#mCSB_"+i.idx+"_scrollbar_vertical"),e("#mCSB_"+i.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==o.axis&&(i.overflowed[0]&&!t?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),s.removeClass(u[8]+" "+u[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[0].css("display","none"),s.removeClass(u[10])):(l[0].css("display","none"),s.addClass(u[10])),s.addClass(u[8]))),"y"!==o.axis&&(i.overflowed[1]&&!t?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),s.removeClass(u[9]+" "+u[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[1].css("display","none"),s.removeClass(u[11])):(l[1].css("display","none"),s.addClass(u[11])),s.addClass(u[9]))),i.overflowed[0]||i.overflowed[1]?n.removeClass(u[5]):n.addClass(u[5])},M=function(t){var n=t.type,r=t.target.ownerDocument!==document?[e(frameElement).offset().top,e(frameElement).offset().left]:null,i=I()&&t.target.ownerDocument!==top.document?[e(t.view.frameElement).offset().top,e(t.view.frameElement).offset().left]:[0,0];switch(n){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return r?[t.originalEvent.pageY-r[0]+i[0],t.originalEvent.pageX-r[1]+i[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var o=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],a=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[o.screenY,o.screenX,a>1]:[o.pageY,o.pageX,a>1];default:return r?[t.pageY-r[0]+i[0],t.pageX-r[1]+i[1],!1]:[t.pageY,t.pageX,!1]}},L=function(){function t(e){var t=p.find("iframe");if(t.length){var n=e?"auto":"none";t.css("pointer-events",n)}}function n(e,t,n,r){if(p[0].idleTimer=d.scrollInertia<233?250:0,i.attr("id")===f[1])var o="x",a=(i[0].offsetLeft-t+r)*u.scrollRatio.x;else var o="y",a=(i[0].offsetTop-e+n)*u.scrollRatio.y;X(s,a.toString(),{dir:o,drag:!0})}var i,o,a,s=e(this),u=s.data(r),d=u.opt,h=r+"_"+u.idx,f=["mCSB_"+u.idx+"_dragger_vertical","mCSB_"+u.idx+"_dragger_horizontal"],p=e("#mCSB_"+u.idx+"_container"),g=e("#"+f[0]+",#"+f[1]),m=d.advanced.releaseDraggableSelectors?g.add(e(d.advanced.releaseDraggableSelectors)):g,v=d.advanced.extraDraggableSelectors?e(!I()||top.document).add(e(d.advanced.extraDraggableSelectors)):e(!I()||top.document);g.bind("mousedown."+h+" touchstart."+h+" pointerdown."+h+" MSPointerDown."+h,function(n){if(n.stopImmediatePropagation(),n.preventDefault(),Q(n)){c=!0,l&&(document.onselectstart=function(){return!1}),t(!1),V(s),i=e(this);var r=i.offset(),u=M(n)[0]-r.top,h=M(n)[1]-r.left,f=i.height()+r.top,p=i.width()+r.left;f>u&&u>0&&p>h&&h>0&&(o=u,a=h),k(i,"active",d.autoExpandScrollbar)}}).bind("touchmove."+h,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=i.offset(),r=M(e)[0]-t.top,s=M(e)[1]-t.left;n(o,a,r,s)}),e(document).add(v).bind("mousemove."+h+" pointermove."+h+" MSPointerMove."+h,function(e){if(i){var t=i.offset(),r=M(e)[0]-t.top,s=M(e)[1]-t.left;if(o===r&&a===s)return;n(o,a,r,s)}}).add(m).bind("mouseup."+h+" touchend."+h+" pointerup."+h+" MSPointerUp."+h,function(e){i&&(k(i,"active",d.autoExpandScrollbar),i=null),c=!1,l&&(document.onselectstart=null),t(!0)})},B=function(){function n(e){if(!J(e)||c||M(e)[2])return void(t=0);t=1,w=0,k=0,u=1,C.removeClass("mCS_touch_action");var n=L.offset();d=M(e)[0]-n.top,h=M(e)[1]-n.left,z=[M(e)[0],M(e)[1]]}function i(e){if(J(e)&&!c&&!M(e)[2]&&(D.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!k||w)&&u)){m=G();var t=E.offset(),n=M(e)[0]-t.top,r=M(e)[1]-t.left,i="mcsLinearOut";if(A.push(n),N.push(r),z[2]=Math.abs(M(e)[0]-z[0]),z[3]=Math.abs(M(e)[1]-z[1]),S.overflowed[0])var o=B[0].parent().height()-B[0].height(),a=d-n>0&&n-d>-(o*S.scrollRatio.y)&&(2*z[3]<z[2]||"yx"===D.axis);if(S.overflowed[1])var s=B[1].parent().width()-B[1].width(),f=h-r>0&&r-h>-(s*S.scrollRatio.x)&&(2*z[2]<z[3]||"yx"===D.axis);a||f?(j||e.preventDefault(),w=1):(k=1,C.addClass("mCS_touch_action")),j&&e.preventDefault(),x="yx"===D.axis?[d-n,h-r]:"x"===D.axis?[null,h-r]:[d-n,null],L[0].idleTimer=250,S.overflowed[0]&&l(x[0],$,i,"y","all",!0),S.overflowed[1]&&l(x[1],$,i,"x",F,!0)}}function o(e){if(!J(e)||c||M(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),V(C),g=G();var n=E.offset();f=M(e)[0]-n.top,p=M(e)[1]-n.left,A=[],N=[]}function a(e){if(J(e)&&!c&&!M(e)[2]){u=0,e.stopImmediatePropagation(),w=0,k=0,v=G();var t=E.offset(),n=M(e)[0]-t.top,r=M(e)[1]-t.left;if(!(v-m>30)){y=1e3/(v-g);var i="mcsEaseOut",o=2.5>y,a=o?[A[A.length-2],N[N.length-2]]:[0,0];b=o?[n-a[0],r-a[1]]:[n-f,r-p];var d=[Math.abs(b[0]),Math.abs(b[1])];y=o?[Math.abs(b[0]/4),Math.abs(b[1]/4)]:[y,y];var h=[Math.abs(L[0].offsetTop)-b[0]*s(d[0]/y[0],y[0]),Math.abs(L[0].offsetLeft)-b[1]*s(d[1]/y[1],y[1])];x="yx"===D.axis?[h[0],h[1]]:"x"===D.axis?[null,h[1]]:[h[0],null],_=[4*d[0]+D.scrollInertia,4*d[1]+D.scrollInertia];var C=parseInt(D.contentTouchScroll)||0;x[0]=d[0]>C?x[0]:0,x[1]=d[1]>C?x[1]:0,S.overflowed[0]&&l(x[0],_[0],i,"y",F,!1),S.overflowed[1]&&l(x[1],_[1],i,"x",F,!1)}}}function s(e,t){var n=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?n[0]:n[3]:e>60?t>3?n[3]:n[2]:e>30?t>8?n[1]:t>6?n[0]:t>4?t:n[2]:t>8?t:n[3]}function l(e,t,n,r,i,o){e&&X(C,e.toString(),{dur:t,scrollEasing:n,dir:r,overwrite:i,drag:o})}var u,d,h,f,p,g,m,v,b,y,x,_,w,k,C=e(this),S=C.data(r),D=S.opt,T=r+"_"+S.idx,E=e("#mCSB_"+S.idx),L=e("#mCSB_"+S.idx+"_container"),B=[e("#mCSB_"+S.idx+"_dragger_vertical"),e("#mCSB_"+S.idx+"_dragger_horizontal")],A=[],N=[],$=0,F="yx"===D.axis?"none":"all",z=[],O=L.find("iframe"),R=["touchstart."+T+" pointerdown."+T+" MSPointerDown."+T,"touchmove."+T+" pointermove."+T+" MSPointerMove."+T,"touchend."+T+" pointerup."+T+" MSPointerUp."+T],j=void 0!==document.body.style.touchAction;L.bind(R[0],function(e){n(e)}).bind(R[1],function(e){i(e)}),E.bind(R[0],function(e){o(e)}).bind(R[2],function(e){a(e)}),O.length&&O.each(function(){e(this).load(function(){I(this)&&e(this.contentDocument||this.contentWindow.document).bind(R[0],function(e){n(e),o(e)}).bind(R[1],function(e){i(e)}).bind(R[2],function(e){a(e)})})})},A=function(){function n(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function i(e,t,n){u.type=n&&o?"stepped":"stepless",u.scrollAmount=10,q(a,e,t,"mcsLinearOut",n?60:null)}var o,a=e(this),s=a.data(r),l=s.opt,u=s.sequential,d=r+"_"+s.idx,h=e("#mCSB_"+s.idx+"_container"),f=h.parent();h.bind("mousedown."+d,function(e){t||o||(o=1,c=!0)}).add(document).bind("mousemove."+d,function(e){if(!t&&o&&n()){var r=h.offset(),a=M(e)[0]-r.top+h[0].offsetTop,c=M(e)[1]-r.left+h[0].offsetLeft;a>0&&a<f.height()&&c>0&&c<f.width()?u.step&&i("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(0>a?i("on",38):a>f.height()&&i("on",40)),"y"!==l.axis&&s.overflowed[1]&&(0>c?i("on",37):c>f.width()&&i("on",39)))}}).bind("mouseup."+d+" dragend."+d,function(e){t||(o&&(o=0,i("off",null)),c=!1)})},N=function(){function t(t,r){if(V(n),!$(n,t.target)){var a="auto"!==o.mouseWheel.deltaFactor?parseInt(o.mouseWheel.deltaFactor):l&&t.deltaFactor<100?100:t.deltaFactor||100,u=o.scrollInertia;if("x"===o.axis||"x"===o.mouseWheel.axis)var d="x",h=[Math.round(a*i.scrollRatio.x),parseInt(o.mouseWheel.scrollAmount)],f="auto"!==o.mouseWheel.scrollAmount?h[1]:h[0]>=s.width()?.9*s.width():h[0],p=Math.abs(e("#mCSB_"+i.idx+"_container")[0].offsetLeft),g=c[1][0].offsetLeft,m=c[1].parent().width()-c[1].width(),v=t.deltaX||t.deltaY||r;else var d="y",h=[Math.round(a*i.scrollRatio.y),parseInt(o.mouseWheel.scrollAmount)],f="auto"!==o.mouseWheel.scrollAmount?h[1]:h[0]>=s.height()?.9*s.height():h[0],p=Math.abs(e("#mCSB_"+i.idx+"_container")[0].offsetTop),g=c[0][0].offsetTop,m=c[0].parent().height()-c[0].height(),v=t.deltaY||r;"y"===d&&!i.overflowed[0]||"x"===d&&!i.overflowed[1]||((o.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(v=-v),o.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==g||0>v&&g!==m||o.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<2&&!o.mouseWheel.normalizeDelta&&(f=t.deltaFactor,u=17),X(n,(p-v*f).toString(),{dir:d,dur:u}))}}if(e(this).data(r)){var n=e(this),i=n.data(r),o=i.opt,a=r+"_"+i.idx,s=e("#mCSB_"+i.idx),c=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")],u=e("#mCSB_"+i.idx+"_container").find("iframe");u.length&&u.each(function(){e(this).load(function(){I(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+a,function(e,n){t(e,n)})})}),s.bind("mousewheel."+a,function(e,n){t(e,n)})}},I=function(e){var t=null;if(e){try{var n=e.contentDocument||e.contentWindow.document;t=n.body.innerHTML}catch(r){}return null!==t}try{var n=top.document;t=n.body.innerHTML}catch(r){}return null!==t},$=function(t,n){var i=n.nodeName.toLowerCase(),o=t.data(r).opt.mouseWheel.disableOver,a=["select","textarea"];return e.inArray(i,o)>-1&&!(e.inArray(i,a)>-1&&!e(n).is(":focus"))},F=function(){var t,n=e(this),i=n.data(r),o=r+"_"+i.idx,a=e("#mCSB_"+i.idx+"_container"),s=a.parent(),l=e(".mCSB_"+i.idx+"_scrollbar ."+u[12]);l.bind("mousedown."+o+" touchstart."+o+" pointerdown."+o+" MSPointerDown."+o,function(n){c=!0,e(n.target).hasClass("mCSB_dragger")||(t=1)}).bind("touchend."+o+" pointerup."+o+" MSPointerUp."+o,function(e){c=!1}).bind("click."+o,function(r){if(t&&(t=0,e(r.target).hasClass(u[12])||e(r.target).hasClass("mCSB_draggerRail"))){V(n);var o=e(this),l=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!i.overflowed[1])return;var c="x",d=r.pageX>l.offset().left?-1:1,h=Math.abs(a[0].offsetLeft)-d*(.9*s.width())}else{if(!i.overflowed[0])return;var c="y",d=r.pageY>l.offset().top?-1:1,h=Math.abs(a[0].offsetTop)-d*(.9*s.height())}X(n,h.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},z=function(){var t=e(this),n=t.data(r),i=n.opt,o=r+"_"+n.idx,a=e("#mCSB_"+n.idx+"_container"),s=a.parent();a.bind("focusin."+o,function(n){var r=e(document.activeElement),o=a.find(".mCustomScrollBox").length,l=0;r.is(i.advanced.autoScrollOnFocus)&&(V(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=o?(l+17)*o:0,t[0]._focusTimeout=setTimeout(function(){var e=[te(r)[0],te(r)[1]],n=[a[0].offsetTop,a[0].offsetLeft],o=[n[0]+e[0]>=0&&n[0]+e[0]<s.height()-r.outerHeight(!1),n[1]+e[1]>=0&&n[0]+e[1]<s.width()-r.outerWidth(!1)],c="yx"!==i.axis||o[0]||o[1]?"all":"none";"x"===i.axis||o[0]||X(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l}),"y"===i.axis||o[1]||X(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l})},t[0]._focusTimer))})},O=function(){var t=e(this),n=t.data(r),i=r+"_"+n.idx,o=e("#mCSB_"+n.idx+"_container").parent();o.bind("scroll."+i,function(t){(0!==o.scrollTop()||0!==o.scrollLeft())&&e(".mCSB_"+n.idx+"_scrollbar").css("visibility","hidden")})},R=function(){var t=e(this),n=t.data(r),i=n.opt,o=n.sequential,a=r+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar",l=e(s+">a");l.bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,function(r){
function a(e,n){o.scrollAmount=i.scrollButtons.scrollAmount,q(t,e,n)}if(r.preventDefault(),Q(r)){var s=e(this).attr("class");switch(o.type=i.scrollButtons.scrollType,r.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===o.type)return;c=!0,n.tweenRunning=!1,a("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===o.type)return;c=!1,o.dir&&a("off",s);break;case"click":if("stepped"!==o.type||n.tweenRunning)return;a("on",s)}}})},j=function(){function t(t){function r(e,t){a.type=o.keyboard.scrollType,a.scrollAmount=o.keyboard.scrollAmount,"stepped"===a.type&&i.tweenRunning||q(n,e,t)}switch(t.type){case"blur":i.tweenRunning&&a.dir&&r("off",null);break;case"keydown":case"keyup":var s=t.keyCode?t.keyCode:t.which,l="on";if("x"!==o.axis&&(38===s||40===s)||"y"!==o.axis&&(37===s||39===s)){if((38===s||40===s)&&!i.overflowed[0]||(37===s||39===s)&&!i.overflowed[1])return;"keyup"===t.type&&(l="off"),e(document.activeElement).is(d)||(t.preventDefault(),t.stopImmediatePropagation(),r(l,s))}else if(33===s||34===s){if((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){V(n);var h=34===s?-1:1;if("x"===o.axis||"yx"===o.axis&&i.overflowed[1]&&!i.overflowed[0])var f="x",p=Math.abs(c[0].offsetLeft)-h*(.9*u.width());else var f="y",p=Math.abs(c[0].offsetTop)-h*(.9*u.height());X(n,p.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}else if((35===s||36===s)&&!e(document.activeElement).is(d)&&((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===o.axis||"yx"===o.axis&&i.overflowed[1]&&!i.overflowed[0])var f="x",p=35===s?Math.abs(u.width()-c.outerWidth(!1)):0;else var f="y",p=35===s?Math.abs(u.height()-c.outerHeight(!1)):0;X(n,p.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}}var n=e(this),i=n.data(r),o=i.opt,a=i.sequential,s=r+"_"+i.idx,l=e("#mCSB_"+i.idx),c=e("#mCSB_"+i.idx+"_container"),u=c.parent(),d="input,textarea,select,datalist,keygen,[contenteditable='true']",h=c.find("iframe"),f=["blur."+s+" keydown."+s+" keyup."+s];h.length&&h.each(function(){e(this).load(function(){I(this)&&e(this.contentDocument||this.contentWindow.document).bind(f[0],function(e){t(e)})})}),l.attr("tabindex","0").bind(f[0],function(e){t(e)})},q=function(t,n,i,o,a){function s(e){d.snapAmount&&(h.scrollAmount=d.snapAmount instanceof Array?"x"===h.dir[0]?d.snapAmount[1]:d.snapAmount[0]:d.snapAmount);var n="stepped"!==h.type,r=a?a:e?n?g/1.5:m:1e3/60,i=e?n?7.5:40:2.5,l=[Math.abs(f[0].offsetTop),Math.abs(f[0].offsetLeft)],u=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],p="x"===h.dir[0]?l[1]+h.dir[1]*(u[1]*i):l[0]+h.dir[1]*(u[0]*i),v="x"===h.dir[0]?l[1]+h.dir[1]*parseInt(h.scrollAmount):l[0]+h.dir[1]*parseInt(h.scrollAmount),b="auto"!==h.scrollAmount?v:p,y=o?o:e?n?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",x=e?!0:!1;return e&&17>r&&(b="x"===h.dir[0]?l[1]:l[0]),X(t,b.toString(),{dir:h.dir[0],scrollEasing:y,dur:r,onComplete:x}),e?void(h.dir=!1):(clearTimeout(h.step),void(h.step=setTimeout(function(){s()},r)))}function l(){clearTimeout(h.step),Z(h,"step"),V(t)}var c=t.data(r),d=c.opt,h=c.sequential,f=e("#mCSB_"+c.idx+"_container"),p="stepped"===h.type?!0:!1,g=d.scrollInertia<26?26:d.scrollInertia,m=d.scrollInertia<1?17:d.scrollInertia;switch(n){case"on":if(h.dir=[i===u[16]||i===u[15]||39===i||37===i?"x":"y",i===u[13]||i===u[15]||38===i||37===i?-1:1],V(t),ee(i)&&"stepped"===h.type)return;s(p);break;case"off":l(),(p||c.tweenRunning&&h.dir)&&s(!0)}},P=function(t){var n=e(this).data(r).opt,i=[];return"function"==typeof t&&(t=t()),t instanceof Array?i=t.length>1?[t[0],t[1]]:"x"===n.axis?[null,t[0]]:[t[0],null]:(i[0]=t.y?t.y:t.x||"x"===n.axis?null:t,i[1]=t.x?t.x:t.y||"y"===n.axis?null:t),"function"==typeof i[0]&&(i[0]=i[0]()),"function"==typeof i[1]&&(i[1]=i[1]()),i},H=function(t,n){if(null!=t&&"undefined"!=typeof t){var i=e(this),o=i.data(r),a=o.opt,s=e("#mCSB_"+o.idx+"_container"),l=s.parent(),c=typeof t;n||(n="x"===a.axis?"x":"y");var u="x"===n?s.outerWidth(!1):s.outerHeight(!1),h="x"===n?s[0].offsetLeft:s[0].offsetTop,f="x"===n?"left":"top";switch(c){case"function":return t();case"object":var p=t.jquery?t:e(t);if(!p.length)return;return"x"===n?te(p)[1]:te(p)[0];case"string":case"number":if(ee(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(u*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(h-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var g=h+parseInt(t.split("+=")[1]);return g>=0?0:Math.abs(g)}if(-1!==t.indexOf("px")&&ee(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(l.height()-s.outerHeight(!1));if("right"===t)return Math.abs(l.width()-s.outerWidth(!1));if("first"===t||"last"===t){var p=s.find(":"+t);return"x"===n?te(p)[1]:te(p)[0]}return e(t).length?"x"===n?te(e(t))[1]:te(e(t))[0]:(s.css(f,t),void d.update.call(null,i[0]))}}},W=function(t){function n(){return clearTimeout(h[0].autoUpdate),0===s.parents("html").length?void(s=null):void(h[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(l.poll.change.n=o(),l.poll.change.n!==l.poll.change.o)?(l.poll.change.o=l.poll.change.n,void a(3)):c.advanced.updateOnContentResize&&(l.poll.size.n=s[0].scrollHeight+s[0].scrollWidth+h[0].offsetHeight+s[0].offsetHeight+s[0].offsetWidth,l.poll.size.n!==l.poll.size.o)?(l.poll.size.o=l.poll.size.n,void a(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(l.poll.img.n=h.find("img").length,l.poll.img.n===l.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&n()):(l.poll.img.o=l.poll.img.n,void h.find("img").each(function(){i(this)}))},c.advanced.autoUpdateTimeout))}function i(t){function n(e,t){return function(){return t.apply(e,arguments)}}function r(){this.onload=null,e(t).addClass(u[2]),a(2)}if(e(t).hasClass(u[2]))return void a();var i=new Image;i.onload=n(i,r),i.src=t.src}function o(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var e=0,t=h.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function a(e){clearTimeout(h[0].autoUpdate),d.update.call(null,s[0],e)}var s=e(this),l=s.data(r),c=l.opt,h=e("#mCSB_"+l.idx+"_container");return t?(clearTimeout(h[0].autoUpdate),void Z(h[0],"autoUpdate")):void n()},U=function(e,t,n){return Math.round(e/t)*t-n},V=function(t){var n=t.data(r),i=e("#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal");i.each(function(){Y.call(this)})},X=function(t,n,i){function o(e){return l&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function a(){return[c.callbacks.alwaysTriggerOffsets||x>=_[0]+C,c.callbacks.alwaysTriggerOffsets||-S>=x]}function s(){var e=[f[0].offsetTop,f[0].offsetLeft],n=[b[0].offsetTop,b[0].offsetLeft],r=[f.outerHeight(!1),f.outerWidth(!1)],o=[h.height(),h.width()];t[0].mcs={content:f,top:e[0],left:e[1],draggerTop:n[0],draggerLeft:n[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(r[0])-o[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(r[1])-o[1])),direction:i.dir}}var l=t.data(r),c=l.opt,u={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},i=e.extend(u,i),d=[i.dur,i.drag?0:i.dur],h=e("#mCSB_"+l.idx),f=e("#mCSB_"+l.idx+"_container"),p=f.parent(),g=c.callbacks.onTotalScrollOffset?P.call(t,c.callbacks.onTotalScrollOffset):[0,0],m=c.callbacks.onTotalScrollBackOffset?P.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=i.trigger,(0!==p.scrollTop()||0!==p.scrollLeft())&&(e(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),p.scrollTop(0).scrollLeft(0)),"_resetY"!==n||l.contentReset.y||(o("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),l.contentReset.y=1),"_resetX"!==n||l.contentReset.x||(o("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),l.contentReset.x=1),"_resetY"!==n&&"_resetX"!==n){if(!l.contentReset.y&&t[0].mcs||!l.overflowed[0]||(o("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),l.contentReset.x=null),!l.contentReset.x&&t[0].mcs||!l.overflowed[1]||(o("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),l.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===i.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;n=U(n,v,c.snapOffset)}switch(i.dir){case"x":var b=e("#mCSB_"+l.idx+"_dragger_horizontal"),y="left",x=f[0].offsetLeft,_=[h.width()-f.outerWidth(!1),b.parent().width()-b.width()],w=[n,0===n?0:n/l.scrollRatio.x],C=g[1],S=m[1],D=C>0?C/l.scrollRatio.x:0,T=S>0?S/l.scrollRatio.x:0;break;case"y":var b=e("#mCSB_"+l.idx+"_dragger_vertical"),y="top",x=f[0].offsetTop,_=[h.height()-f.outerHeight(!1),b.parent().height()-b.height()],w=[n,0===n?0:n/l.scrollRatio.y],C=g[0],S=m[0],D=C>0?C/l.scrollRatio.y:0,T=S>0?S/l.scrollRatio.y:0}w[1]<0||0===w[0]&&0===w[1]?w=[0,0]:w[1]>=_[1]?w=[_[0],_[1]]:w[0]=-w[0],t[0].mcs||(s(),o("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(f[0].onCompleteTimeout),K(b[0],y,Math.round(w[1]),d[1],i.scrollEasing),(l.tweenRunning||!(0===x&&w[0]>=0||x===_[0]&&w[0]<=_[0]))&&K(f[0],y,Math.round(w[0]),d[0],i.scrollEasing,i.overwrite,{onStart:function(){i.callbacks&&i.onStart&&!l.tweenRunning&&(o("onScrollStart")&&(s(),c.callbacks.onScrollStart.call(t[0])),l.tweenRunning=!0,k(b),l.cbOffsets=a())},onUpdate:function(){i.callbacks&&i.onUpdate&&o("whileScrolling")&&(s(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(i.callbacks&&i.onComplete){"yx"===c.axis&&clearTimeout(f[0].onCompleteTimeout);var e=f[0].idleTimer||0;f[0].onCompleteTimeout=setTimeout(function(){o("onScroll")&&(s(),c.callbacks.onScroll.call(t[0])),o("onTotalScroll")&&w[1]>=_[1]-D&&l.cbOffsets[0]&&(s(),c.callbacks.onTotalScroll.call(t[0])),o("onTotalScrollBack")&&w[1]<=T&&l.cbOffsets[1]&&(s(),c.callbacks.onTotalScrollBack.call(t[0])),l.tweenRunning=!1,f[0].idleTimer=0,k(b,"hide")},e)}}})}},K=function(e,t,n,r,i,o,a){function s(){_.stop||(b||p.call(),b=G()-v,l(),b>=_.time&&(_.time=b>_.time?b+h-(b-_.time):b+h-1,_.time<b+1&&(_.time=b+1)),_.time<r?_.id=f(s):m.call())}function l(){r>0?(_.currVal=d(_.time,y,w,r,i),x[t]=Math.round(_.currVal)+"px"):x[t]=n+"px",g.call()}function c(){h=1e3/60,_.time=b+h,f=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return l(),setTimeout(e,.01)},_.id=f(s)}function u(){null!=_.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(_.id):clearTimeout(_.id),_.id=null)}function d(e,t,n,r,i){switch(i){case"linear":case"mcsLinear":return n*e/r+t;case"mcsLinearOut":return e/=r,e--,n*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=r/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=r/2,1>e?n/2*Math.pow(2,10*(e-1))+t:(e--,n/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=r/2,1>e?n/2*e*e*e+t:(e-=2,n/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=r,e--,-n*(e*e*e*e-1)+t;case"easeOutStrong":return n*(-Math.pow(2,-10*e/r)+1)+t;case"easeOut":case"mcsEaseOut":default:var o=(e/=r)*e,a=o*e;return t+n*(.499999999999997*a*o+-2.5*o*o+5.5*a+-6.5*o+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var h,f,a=a||{},p=a.onStart||function(){},g=a.onUpdate||function(){},m=a.onComplete||function(){},v=G(),b=0,y=e.offsetTop,x=e.style,_=e._mTween[t];"left"===t&&(y=e.offsetLeft);var w=n-y;_.stop=0,"none"!==o&&u(),c()},G=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Y=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],n=0;n<t.length;n++){var r=t[n];e._mTween[r].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[r].id):clearTimeout(e._mTween[r].id),e._mTween[r].id=null,e._mTween[r].stop=1)}},Z=function(e,t){try{delete e[t]}catch(n){e[t]=null}},Q=function(e){return!(e.which&&1!==e.which)},J=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ee=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},te=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},ne=function(){function e(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}var t=e();return t?document[t]:!1};e.fn[n]=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):d.init.apply(this,arguments)},e[n]=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):d.init.apply(this,arguments)},e[n].defaults=o,window[n]=!0,e(window).load(function(){e(i)[n](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var n,r,i=e(t),o=i.parents(".mCSB_container");if(o.length)return n=o.parent(),r=[o[0].offsetTop,o[0].offsetLeft],r[0]+te(i)[0]>=0&&r[0]+te(i)[0]<n.height()-i.outerHeight(!1)&&r[1]+te(i)[1]>=0&&r[1]+te(i)[1]<n.width()-i.outerWidth(!1)},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var n=e(t).data(r);if(n)return n.overflowed[0]||n.overflowed[1]}})})})}),define("mCustomScrollbar",["jquery"],function(e){return function(){var t;return t||e.$.fn.mCustomScrollbar}}(this));var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};define("main",["jquery","sfModal","mobile","isMobile","jquery_hoverIntent","sfAjax","bootstrap","jquery_cookie","jquery_lazyload","underscore","typeHelper","jquery-mousewheel","mCustomScrollbar"],function(e,t,n,r){var i,o,a,s,l,c,u,d,h,f;return"localhost:3000"===location.host&&e("body").css({"-webkit-font-smoothing":"antialiased"}),r("any")&&(e("#icon4weChat").attr("src",e("#icon4weChat").data("src")),e(".sfad-sidebar").remove()),e(".js-content-restore").on("click",function(){var t,n,r,i;return t=e(this),i=t.data("type"),r=t.data("id"),n="/api/"+i+"/"+r+"/delete/cancel",confirm("真的要恢复吗?")?e.post(n,function(e){return location.reload()}):void 0}),function(){u=function(){e(".opts__item--message").removeClass("hide"),e.get("/api/notifications",function(t){var n,r,i,o;t.status||(t.data=null!=(r=t.data)?r:[],i={data:t.data,unread:{general:_.filter(t.data.general,function(e){return 0===parseInt(e.viewed)}).length,ranked:_.filter(t.data.ranked,function(e){return 0===parseInt(e.viewed)}).length,followed:_.filter(t.data.followed,function(e){return 0===parseInt(e.viewed)}).length}},o=_.reduce(i.unread,function(e,t){return e+t},0),o>0&&e(".opts__item--message .message-ingore-all").removeClass("hide"),e("#messageGeneral").html(_.template(e("#messageGeneralTpl").html())(i.data)),e("#messageRanked").html(_.template(e("#messageRankedTpl").html())(i.data)),e("#messageFollowed").html(_.template(e("#messageFollowedTpl").html())(i.data)),e(".opts__item--message-loading").remove(),n={},e(".mCustomScrollbar-message").mCustomScrollbar({scrollInertia:0,callbacks:{onScroll:function(){var t,r,i;if(i=this.mcs.topPct,r=e(this).data("proto"),n[r]=n[r]||2,i>55&&-1!==n[r]){if(console.log(r,i,"ajax page "+n[r]),t="/api/notifications?type="+r+"&page="+n[r],window.__api===t)return;return window.__api=t,e.get(t,function(t){var i,o;return t.status?void 0:(i=t.data[r],i.length>0?(o=_.template(e("#item--"+r).html())(t.data),e(".tab-pane.active .mCSB_container").append(o),n[r]++):n[r]=-1)})}}}}))})},e(".opts__item--message .message-ingore-all").on("click",function(){var t;t=e(this),e.post("/api/notifications/all/view",function(n){return u(),e(".notice-dot").addClass("hide"),t.addClass("hide")})}),e(".opts__item--message").on("click",".message__btn--follow",function(){var t,n;return t=e(this),n=t.data("id"),t.addClass("disabled"),e.post("/api/user/"+n+"/follow",function(e){return u(),t.removeClass("disabled")})}),e(".opts__item--message").on("click",".message__btn--unfollow",function(){var t,n;return t=e(this),n=t.data("id"),t.addClass("disabled"),e.post("/api/user/"+n+"/follow/cancel",function(e){return u(),t.removeClass("disabled")})}),e(".dropdown-toggle-message").on("click",function(t){var n,r;return t.preventDefault(),r=e(".opts__item--message"),"undefined"!=typeof socket&&socket.emit("read"),n=e("title"),n.text(n.text().replace(/^\(\d+[\+]?\)/,"")),"none"!==r.css("display")?r.addClass("hide"):(u(),e.get("/api/notifications/viewed",function(t){var n;return n=null,t.status?void 0:_.each(t.data,function(t,r){return t?void 0:n?(n=e(".notice-dot-"+r),n.removeClass("hide"),n.removeClass("notice-dot--special")):(n=e(".notice-dot-"+r),n.addClass("notice-dot--special"),n.closest("a[role='tab']").trigger("click"))})}))}),e(".opts__item--message a[role='tab']").on("click",function(t){var n;if(e(".opts__item--message .active").not(".btn").removeClass("active"),e(this).addClass("active"),e(this).find(".notice-dot.hide").length>0&&0===e(this).find(".notice-dot--special").length);else if(e(this).find(".notice-dot").addClass("hide"),n=e(this).attr("href"),"#messageRanked"===n&&e.post("/api/notifications/viewed?type=ranked"),"#messageGeneral"===n&&e.post("/api/notifications/viewed?type=general"),"#messageInbox"===n&&e.post("/api/notifications/viewed?type=inbox"),"#messageFollowed"===n)return e.post("/api/notifications/viewed?type=followed")}),e("body").on("click",function(t){"none"!==e(".opts__item--message").css("display")&&0===e(t.target).parents(".message").length&&e(".opts__item--message").addClass("hide")})}(),function(){var t=function(){e(".opts__item--letter").removeClass("hide"),e.get("/api/messages",function(t){if(!t.status){e("#messageInbox").html(_.template(e("#messageInboxTpl").html())({inboxes:t.data})),e(".opts__item--letter-loading").remove();var n=_.filter(t.data,function(e){return 0===parseInt(e.viewed)}).length;n>0&&e(".opts__item--letter .message-ingore-all").removeClass("hide")}})};e("#messageInbox").on("click","li",function(){var t,n;return t=e(this),n=t.data("click"),Boolean(n)?location.href=n:void 0}),e(".opts__item--letter .message-ingore-all").on("click",function(){var n;n=e(this),e.post("/api/messages/all/view",function(e){t(),n.addClass("hide")})}),e(".dropdown-toggle-letter").on("click",function(n){n.preventDefault();var r=e(".opts__item--letter");"none"!==r.css("display")?r.addClass("hide"):t()}),e("body").on("click",function(t){"none"!==e(".opts__item--letter").css("display")&&0===e(t.target).parents(".letter").length&&e(".opts__item--letter").addClass("hide")})}(),"/tags"===e(".nav__item--more>a").attr("href")||(e("body").on("click",function(t){return"none"!==e(".tag-mgr__box").css("display")&&0===e(t.target).closest(".nav__item--more").length&&0===e(t.target).closest(".tag-mgr__box").length?e(".nav__item--more").trigger("click"):void 0}),e(".tag-mgr__query").on("keyup",function(t){var n,r,i,o;return n=e(this),o=n.data("tags"),r=e(this).val(),i=function(t){var n,i,a;return a='<li><a href="<%= url %>"><%= name %></a></li>',n=_.filter(o,function(e){return-1!==e.name.search(t)}),i=_.reduce(n,function(e,t){return e+_.template(a)(t)},""),e(".tag-mgr__list").html(i),e(".tag-mgr__list li").length>0&&r.length>0?e(".tag-mgr__list li:first-child").addClass("active"):void 0},h.inputT&&clearTimeout(h.inputT),h.inputT=setTimeout(function(){return i(r)},100)}),e(".tag-mgr__list").on("mouseover",function(){return e(".tag-mgr__list li").length>1?e(".tag-mgr__list li.active").removeClass("active"):void 0}),h={inputT:0,t:0},e(".nav__item--more").on("click",function(){var t,n,r;return n=e(this),t=e(".tag-mgr__box"),r=Number(n.data("open")),r?t.addClass("hide"):(t.removeClass("hide"),e(".tag-mgr__query").focus()),e(this).data("open",Number(!r))})),e("body").on("click",".reloadCaptcha",function(){return e(this).find("img").attr("src","/user/captcha?w=240&h=50")}),e(".js__action--complain").on("click",function(){return t({title:"我要申诉",content:_.template(e("#js__action--complain-tpl").html()),doneFn:function(){return e(".complain__form").submit()}})}),e(".js__view--selector").on("click",function(){var t;return t=e(this).data("action"),e.cookie("view",t),location.reload()}),e.cookie("view")&&e(".js__view--selector").removeClass("hidden-sm").removeClass("hidden-md").removeClass("hidden-lg"),a=function(){var e,t,n,r;r="test",n=window.sessionStorage;try{return n.setItem(r,"1"),n.removeItem(r),!0}catch(t){return e=t,!1}},f=function(t){var n;a()&&(t>500||(localStorage&&(n=localStorage.getItem("show-app-promotion-bar"),n=n||!0,n!==!0?e(".app-promotion-bar").hide():e(".app-promotion-bar").show()),e("body").on("click",".close",function(){e(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)}),e("body").on("click",".icon",function(){e(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)})))},f(document.body.clientWidth),o=function(e){var t,n;switch(n="",t=new Date(e),t.getDay()){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}return n},s=function(){t({modalSize:"modal-lg",title:"登录",doneText:"登录",hideClose:!0,hideDone:!0,hideFooter:!0,content:e("#loginModal").text(),show:function(){return window.ga&&ga("send","event","login modal","show","login modal"),e("[name=mail]").first().focus(),e("#loginShowMore").click(function(t){t.preventDefault(),e(this).hide(),e(this).siblings().removeClass("hidden")}),e(".sfmodal .widget-login a").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),e("#loginReloadCaptcha").click(function(){e(this).find("img").attr("src","/user/captcha?w=240&h=50")})}}),e(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})},e(".addWeek").each(function(t,n){e(this).append(" "+o(e(this).html()))}),e('[data-toggle="tooltip"]').tooltip({container:"body"}),e("img.lazy").lazyload({effect:"fadeIn"}),window.oauthLogin=function(e){-1!==location.hostname.indexOf("segmentfault")?location.reload():location.href="/"},window.oauthRegister=function(e){location.href="/user/bind"},i={_:window.SF.token,staticUrl:window.SF.staticUrl,userId:e("#SFUserId").attr("value"),userRank:e("#SFUserRank").attr("value"),login:n.login||s},e(document).ajaxError(function(t,n,r){413===n.status?(e("#uploading")&&e("#uploading").text(""),alert("文件大小或尺寸超出限制，请修改后重新上传！")):console.log("Ajax "+n.status+": ",r.url)}),e(document).ajaxSend(function(e,t,n){-1===n.url.indexOf("?")?n.url=n.url+"?_="+i._:n.url=n.url+"&_="+i._}),e(document).ajaxComplete(function(n,r,o){var a,s,l,c,u,d,h;if(window.captchaPostData=null!=(l=window.captchaPostData)?l:{},r.responseText)if(-1!==r.responseText.indexOf("<br />")||-1!==r.responseText.indexOf("<pre>exception "))console.log("后端返回错误信息=> ",r.responseText),"localhost"===location.hostname&&t({title:"警告：前方高能！",$content:r.responseText,hideClose:!0,modalSize:"modal-lg"});else if(r.responseJSON&&1===r.responseJSON.status){var f=function(){if(h=r.responseJSON,!h.data)return{v:void 0};var n=h.data[0];-1===o.url.indexOf("/user/stat")&&"login"===n?i.login():"form"===n&&h.data[1].hasOwnProperty("captcha")&&1===_.keys(h.data[1]).length?(captchaPostData.api=o.url,captchaPostData.data=o.data,t({modalSize:"modal-sm",title:h.data[1].captcha,content:"<div id='captchaPostForm' ><div class='reloadCaptcha'><img title='点击切换验证码'  src='/user/captcha?w=240&h=50' ></div><div class='form-group'><input class='form-action form-control' name='captcha'></div></div>",hideClose:!0,doneText:"确认并提交",doneFn:function(){var t;return t=e("#captchaPostForm").find("input[name=captcha]"),captchaPostData.captcha=t.val(),e.post("/api/captcha/check",{captcha:captchaPostData.captcha},function(n){return n.status?void 0:n.data?e.post(captchaPostData.api,captchaPostData.data+"&captcha="+captchaPostData.captcha,function(e){return window.captchaPostData={},e.data.hasOwnProperty("url")?location.href=e.data.url:location.reload()}):(t.addClass("error"),console.log("验证码错误"),e(".reloadCaptcha").trigger("click"))})}})):"robot"===n?location.href="/stop-robot":"unactivated"===n?(t("hide"),e("#activate").modal("show")):"nonBlocked"===n?t(h.data[1]):"access"===n?t({title:h.data[1][0],content:h.data[1][1],hideClose:!0}):"form"===n?!function(){var t=o.url.split("?")[0];t=t.replace(/\d+/g,"[id]"),d=o.url.split("/")[2],d=d.split("?")[0],c=new RegExp("[?&]_="+i._),u=o.url.replace(c,""),a=!0;var n=h.data[1];e.each(n,function(n,r){var i,o,s,l;if("captcha"===n&&(e("[name=captcha]").parents(".form-group").show(),e(".captcha").parent("a").click()),s=n.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),"tags"===n&&"必须填写标签"===r)return void e("#article .sf-typeHelper, #question .sf-typeHelper").addClass("error").after('<span class="error--msg">'+r+"</span>");if(l="#"+d+s,0===e(l).length&&(l="#"+d.replace(/s$/,"")+s),o=e("form#"+d+" *[name="+n+"]").not("[type=hidden]").parents(".form-group"),0===o.length&&(o=e("form#"+d.replace(/s$/,"")+" *[name="+n+"]").not("[type=hidden]").parents(".form-group")),i=e('form[action="'+t+'"] *[name='+n+"]").not("[type=hidden]").parents(".form-group"),i.length||(i=e('form[action="'+u+'"] *[name='+n+"]").not("[type=hidden]").parents(".form-group"),i.length||(i=e('.form[action="'+t+'"] *[name='+n+"]").not("[type=hidden]").parents(".form-group"),i.length||(i=e("form *[name="+n+"]").not("[type=hidden]").parents(".form-group"),i.length||(i=e("form *[data-name="+n+"]").not("[type=hidden]").parents(".form-group"))))),e(l).length)e(l).addClass("error").attr("data-error",r),0===e(l).next(".error--msg").length&&e(l).after('<span class="error--msg">'+r+"</span>");else if(o.length){o.find(".help-block.err").remove(),o.addClass("has-error");var c=o.find("[name="+n+"]").not("[type=hidden]"),h=c.closest(".input-group");h.length>0?h.after('<span class="help-block err">'+r+"</span>"):c.after('<span class="help-block err">'+r+"</span>")}else if(i.length)i.find(".help-block").remove(),i.addClass("has-error"),i.find(".input-group").length>0?i.find(".input-group").after('<span class="help-block err">'+r+"</span>"):(i.find("[name="+n+"]").not("[type=hidden]").after('<span class="help-block err">'+r+"</span>"),i.find("[data-name="+n+"]").not("[type=hidden]").after('<span class="help-block err">'+r+"</span>"));else if(e("form").length&&!e("form").hasClass("header-search")){if(e("form#"+d+" *[name="+n+"]").not("[type=hidden]").siblings(".error--msg").remove(),e("form#"+d+" *[name="+n+"]").not("[type=hidden]").addClass("error").attr("data-error",r).after('<span class="error--msg">'+r+"</span>"),1===e("form").length&&e("form").hasClass("header-search")){var f=e(".form *[data-name="+n+"]");0==f.length&&(f=e(".form *[name="+n+"]"));var p=f.closest(".form-group");p.addClass("has-error"),p.find(".err").remove(),f.after('<span class="help-block err">'+r+"</span>")}}else if(e(".form").length){var g=e(".form *[data-name="+n+"]");0==g.length&&(g=e(".form *[name="+n+"]"));var m=g.closest(".form-group");m.addClass("has-error"),m.find(".err").remove(),g.after('<span class="help-block err">'+r+"</span>")}a&&(e(l).length?e(l).focus():(i.length&&i.find("[name="+n+"]").not("[type=hidden]").focus(),o.length&&o.find("[name="+n+"]").not("[type=hidden]").focus(),a=!1))})}():(s=["limit","lock","author","rank","account"],_.find(s,function(e){return e===n})?e.get("/api/errorMessage",{type:n,key:h.data[1]},function(e){return e.data?t({title:e.data[0],content:e.data[1],hideClose:!0}):void 0}):t({title:n,content:h.data[1],hideClose:!0}))}();if("object"===("undefined"==typeof f?"undefined":_typeof(f)))return f.v}}),e("body").delegate("form","submit",function(t){var n;n=e(this),n.attr("method")&&n.attr("action")&&(t.preventDefault(),n.find("button[type=submit]").attr("disabled","disabled"),e.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),success:function(e){n.find("button[type=submit]").removeAttr("disabled"),0===e.status&&("/api/user?do=login"===n.attr("action")&&"/user/login"!==location.pathname?window.location.reload():/^\//.test(e.data)?window.location=e.data:window.location.reload())}}))}),e("body").delegate("form input, form textarea, .form input, .form textarea","keydown",function(t){e(this).removeClass("error"),e(this).parents(".form-group").removeClass("has-error"),e(this).next(".help-block.err").remove(),e(this).next(".error--msg").remove(),e(this).parents(".form-group").find(".help-block.err").remove()}),e("#backtop").click(function(){return e("body,html").animate({scrollTop:0}),!1}),e(document).scroll(function(){e(this).scrollTop()>720?e("#backtop").removeClass("hidden"):e("#backtop").addClass("hidden")}),e(".topframe").length&&e(".topframe .close").click(function(t){e(this).parent().remove(),0!==e(".topframe").length&&e(".topframe .content").text()||e("body").removeClass("have-notify")}),window.SFHacker={setOldVersion:function(){e.cookie("v","old"),window.location.reload()},unSetOldVersion:function(){e.removeCookie("v",{path:"/"}),window.location.reload()},makePureTextarea:function(){e.cookie("typemode","native"),window.location.reload()},unMakePureTextarea:function(){e.removeCookie("typemode",{path:"/"}),window.location.reload()}},e("body").on("click",".SFLogin",function(e){e.preventDefault(),i.login()}),function(){var t={phone:'\n    <input type="phone" class="form-control mb15" name="phone" required placeholder="仅支持大陆手机号"\n                           autocomplete="off">\n                    <div class="input-group"><input name="code" type="text"\n                                                    class="form-control js-user-login__phone-code-value"\n                                                    placeholder="短信验证码">\n                        <span class="input-group-btn"><button class="btn btn-default js-user-login__phone-vaild-btn"\n                                                              style="width:96px;" type="button">获取验证码</button></span>\n                    </div>\n\n    ',mail:'\n     <input type="email" class="form-control" name="mail" required placeholder="hello@segmentfault.com"\n                           autocomplete="off">\n    '};e("body").on("click",".login-modal .login-wrap .js-register-switch-box input[name=register_type]",function(){var n=e(this).val();e(".js-register-switch-content").html(t[n]),"phone"===n?e(this).closest("form").attr("action","/api/user/phone/register"):e(this).closest("form").attr("action","/api/user/register")}),e("body").on("click",".login-modal .login-wrap .js-user-login__phone-vaild-btn",function(){var t=e(this),n=60,r=void 0,i=function(){n>1?(n--,t.text(n+"s")):(clearInterval(r),t.text("获取验证码"),t.prop("disabled",!1))};e.post("/api/user/phone/register/send",{phone:e(".js-register-switch-box input[name=phone]").val()},function(e){e.status||(t.prop("disabled",!0),r=setInterval(i,1e3))})})}(),e(".3rdLogin").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),e(".hoverDropdown").hoverIntent(function(){e(this).hasClass("open")||e(this).find(".dropdownBtn").dropdown("toggle")},function(){e(this).hasClass("open")&&e(this).find(".dropdownBtn").dropdown("toggle")},null,1),e(".dropdownBtn").click(function(t){var n;e(this).parent(".hoverDropdown").hasClass("open")&&(t.preventDefault(),n=e(this).attr("href"),t.ctrlKey||t.metaKey?window.open(n):location.href=n)}),d=function(t,n,r,i){var o;o=t,o.on("shown.bs.modal",function(){return e.post("/api/user/active/alert",function(e){})}),o.length>0&&e(".write-btns a").each(function(t,n){e(this).click(function(e){
return o.modal("show"),!1})}),o.find(".activate-form").on("submit",function(t){var n;return t.preventDefault(),n=e(this),e.post(r,{mail:n.find(".mail").val()},function(t){0===t.status&&(n.parent().find(".session-mail").text(n.find(".mail").val()),e(".activate-showmail").show(),e(".activate-form").hide(),location.reload())}),!1}),o.find(".activate-resend",o).click(function(t){var r,o,a,s;o=e(this),r=o.siblings("span").find("span"),a=void 0,s=void 0,a=120,a--,e.post(n,function(t){var n;0===t.status?(e(".company-activete-tips").length&&e(".company-activete-tips").html(null!=(n='<div class="alert alert-success">'+t.message)?n:t.data[1]+"</div>"),i&&i(),s=setInterval(function(){return 0===a?(clearInterval(s),o.show(),o.siblings("span").hide()):(o.hide(),o.siblings("span").show(),r.text(a--))},1e3)):(e(".company-activete-tips").length&&(t.message?e(".company-activete-tips").html('<div class="alert alert-danger">'+t.message+"</div>"):e(".company-activete-tips").html('<div class="alert alert-danger">'+t.data[1]+"</div>")),setTimeout(function(){return e(".company-activete-tips").length&&e(".company-activete-tips").html('<div class="alert alert-success">激活邮件已发送 （<span>120</span>）</div>'),o.show()},9e5))})})},d(e("#activate"),"/api/user/reactivate","/api/user/activate/mail"),d(e("#companyActivate"),"/api/company/reactivate","/api/settings/mail/edit"),e(".side-ask [class*=btn-sn-]").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),function(){e("body").on("click",".activate__step--init input[name=activate_type]",function(){var t=e(this),n=t.val();e('.activate__step--init .form-group[data-type="'+n+'"]').removeClass("hide"),"phone"===n?e(".activate__step--init .form-group[data-type=mail]").addClass("hide"):"mail"===n&&e(".activate__step--init .form-group[data-type=phone]").addClass("hide")}),e("body").on("click",".activate__step--init .activate__step-code-btn",function(){var t=void 0,n=e(this),r=(e(".activate__step-code-value"),e(".activate__step-phone-value")),i=60,o=function(){1>i?(n.text("获取验证码"),n.prop("disabled",!1),clearInterval(t)):n.text(--i+"s")};n.prop("disabled",!0),e.post("/api/user/phone/activate/send",{phone:r.val()},function(e){e.status?n.prop("disabled",!1):t=setInterval(o,1e3)})}),e("body").on("click",".activate-change",function(t){e(".activate-showmail").hide(),e(".activate-form").show()}),e("#activate").on("show.bs.modal",function(){var t=e(".activate__step--init>form").serializeArray(),n={};t.map(function(e){n[e.name]=e.value}),n.mail&&n.mail.length>0&&(e(".activate__step--init input[value=mail]").trigger("click"),setTimeout(function(){},50),e(".activate__step--init .btn-primary").trigger("click"))}),e("body").on("click",".activate__step--init .btn-primary",function(){var t=e(this),n=e(".activate__step--init>form").serializeArray(),r={};n.map(function(e){r[e.name]=e.value}),r.hasOwnProperty("activate_type")&&("mail"===r.activate_type?!function(){r={mail:r.mail};var n=function(t,n){e(".activate__step--mail .session-mail").text(t);var r="",i={"mail.google.com":["gmail.com"],"mail.qq.com":["qq.com","vip.qq.com","foxmail.com"],"mail.163.com":["163.com"],"mail.126.com":["126.com"],"mail.sina.com":["sina.com","vip.sina.com","sina.cn"],"mail.sohu.com":["sohu.com"],"mail.139.com":["139.com"],"mail.wo.com.cn":["wo.com.cn"],"mail.189.cn":["189.cn"],"mail.21cn.com":["21.cn"],"mail.aliyun.com":["aliyun.com"],"mail.yahoo.com":["yahoo.com"]};for(var o in i){var a=i[o],s=a.find(function(e){return e===t.split("@")[1]});s&&(r=o)}r.length>0?e(".activate__step--mail .activate_step-mail-goto").attr("href","http://"+r):e(".activate__step--mail .activate_step-mail-goto").hide();var l="mailto:pr@segmentfault.com?subject=邮箱 "+t+" 无法激活&body=请描述具体内容";e(".activate__step-contact").attr("href",l);var c=e(".activate__step-reactivate-btn");n||c.addClass("disabled");var u=void 0,d=120,h=function(){d>0?c.text("激活邮件已发送（"+d--+"s）"):(c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled"))};return n||(u=setInterval(h,1e3)),{destory:function(){c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled")}}},i=t.closest(".activate__step");i.next(".activate__step").removeClass("hide"),i.remove();var o=n(r.mail,!0);0!=e('input[name="mail"]').data("mail").length&&e.post("/api/user/activate/mail",r,function(e){e.status&&o.destory()}),e(".activate__step-reactivate-btn").on("click",function(){o=n(r.mail),e.post("/api/user/activate/mail",r,function(e){e.status&&o.destory()})}),e(".activate-form").on("click",".btn-primary",function(){var t=e(".activate-form .change-mail").val();t.length>0&&(o.destory(),o=n(t),e.post("/api/user/activate/mail",{mail:t},function(t){t.status?o.destory():(e(".activate-showmail").show(),e(".activate-form").hide())}))})}():(delete r.mail,delete r.activate_type,e.post("/api/user/activate/phone",r,function(e){e.status||location.reload()})))})}(),function(){var t=["/lives","/news"];t.forEach(function(t){!function(t){var n="navItemHighlight"+t,r=e('.sf-header--index [href="'+t+'"]');localStorage.getItem(n)||r.addClass("menu__item--new-show"),r.on("click",function(){localStorage.getItem(n)||localStorage.setItem(n,1)})}(t)})}(),localStorage.getItem("alert-tos")||e(".alert--tos").removeClass("hide"),e(".read-tos").on("click",function(){localStorage.setItem("alert-tos",1),e(this).hasClass("close")||(location.href=e(this).data("url"))}),i.userId&&(l="7001","beta.segmentfault.com"===location.hostname&&(c="8001"),require([i.staticUrl+"/3rd/socket/socket.io.js"],function(t){var n;n=t("segmentfault.com:"+l),window.socket=n,n.on("event",function(t){var n,r=t.event,i=t.message;n=e("title"),i>0?(i>99&&(i="99+"),e("#letterCount").siblings(".has-unread__count").remove(),e("#letterCount").after('<span class="has-unread__count">'+i+"</span>")):e(".letter .has-unread__count").remove(),r>0?(r>99&&(r="99+"),e("#messageCount").siblings(".has-unread__count").remove(),e("#messageCount").after('<span class="has-unread__count">'+r+"</span>"),e("#m-messageCount").text(r),e(".mobile-menu__unreadpoint").show(),window.isMobile||(/^\(\d+[\+]?\)/.test(n.text())?n.text(n.text().replace(/^\(\d+[\+]?\)/,"("+r+")")):n.text("("+r+")"+e("title").text()))):(e(".message .has-unread__count").remove(),n.text(n.text().replace(/^\(\d+[\+]?\)/,"")))})})),e(".topframe").text().indexOf(!0)&&e(".send-mail").click(),e(".slidebar_login").on("click",".getCode",function(){var t="/api/user/phone/register/send",n=e(this),r=void 0,i=60,o=function(){i>1?(i--,n.text(i+"s")):(clearInterval(r),n.text("获取验证码"),n.prop("disabled",!1))};e.post(t,{phone:e(".register-form input[name=phone]").val()},function(e){e.status||(n.prop("disabled",!0),r=setInterval(o,1e3))})}),e(".slidebar_login").on("click",".register-button",function(t){t.preventDefault();var n="/api/user/phone/register",r={name:e(".register-form input[name=name]").val(),phone:e(".register-form input[name=phone]").val(),code:e(".register-form input[name=code]").val(),password:e(".register-form input[name=password]").val()};e.post(n,r,function(e){e.status||location.reload()})}),e(".slidebar_login").on("click",".login_now",function(e){e.preventDefault(),i.login()}),i}),!function(e){"undefined"!=typeof exports?e(exports):(window.hljs=e({}),"function"==typeof define&&define.amd&&define("highlightjs",[],function(){return window.hljs}))}(function(e){function t(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function n(e){return e.nodeName.toLowerCase()}function r(e,t){var n=e&&e.exec(t);return n&&0==n.index}function i(e){var t=(e.className+" "+(e.parentNode?e.parentNode.className:"")).split(/\s+/);return t=t.map(function(e){return e.replace(/^lang(uage)?-/,"")}),t.filter(function(e){return y(e)||/no(-?)highlight/.test(e)})[0]}function o(e,t){var n={};for(var r in e)n[r]=e[r];if(t)for(var r in t)n[r]=t[r];return n}function a(e){var t=[];return function r(e,i){for(var o=e.firstChild;o;o=o.nextSibling)3==o.nodeType?i+=o.nodeValue.length:1==o.nodeType&&(t.push({event:"start",offset:i,node:o}),i=r(o,i),n(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:i,node:o}));return i}(e,0),t}function s(e,r,i){function o(){return e.length&&r.length?e[0].offset!=r[0].offset?e[0].offset<r[0].offset?e:r:"start"==r[0].event?e:r:e.length?e:r}function a(e){function r(e){return" "+e.nodeName+'="'+t(e.value)+'"'}u+="<"+n(e)+Array.prototype.map.call(e.attributes,r).join("")+">"}function s(e){u+="</"+n(e)+">"}function l(e){("start"==e.event?a:s)(e.node)}for(var c=0,u="",d=[];e.length||r.length;){var h=o();if(u+=t(i.substr(c,h[0].offset-c)),c=h[0].offset,h==e){d.reverse().forEach(s);do l(h.splice(0,1)[0]),h=o();while(h==e&&h.length&&h[0].offset==c);d.reverse().forEach(a)}else"start"==h[0].event?d.push(h[0].node):d.pop(),l(h.splice(0,1)[0])}return u+t(i.substr(c))}function l(e){function t(e){return e&&e.source||e}function n(n,r){return RegExp(t(n),"m"+(e.cI?"i":"")+(r?"g":""))}function r(i,a){if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var s={},l=function(t,n){e.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(e){var n=e.split("|");s[n[0]]=[t,n[1]?Number(n[1]):1]})};"string"==typeof i.k?l("keyword",i.k):Object.keys(i.k).forEach(function(e){l(e,i.k[e])}),i.k=s}i.lR=n(i.l||/\b[A-Za-z0-9_]+\b/,!0),a&&(i.bK&&(i.b="\\b("+i.bK.split(" ").join("|")+")\\b"),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=t(i.e)||"",i.eW&&a.tE&&(i.tE+=(i.e?"|":"")+a.tE)),i.i&&(i.iR=n(i.i)),void 0===i.r&&(i.r=1),i.c||(i.c=[]);var c=[];i.c.forEach(function(e){e.v?e.v.forEach(function(t){c.push(o(e,t))}):c.push("self"==e?i:e)}),i.c=c,i.c.forEach(function(e){r(e,i)}),i.starts&&r(i.starts,a);var u=i.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([i.tE,i.i]).map(t).filter(Boolean);i.t=u.length?n(u.join("|"),!0):{exec:function(){return null}}}}r(e)}function c(e,n,i,o){function a(e,t){for(var n=0;n<t.c.length;n++)if(r(t.c[n].bR,e))return t.c[n]}function s(e,t){return r(e.eR,t)?e:e.eW?s(e.parent,t):void 0}function d(e,t){return!i&&r(t.iR,e)}function h(e,t){var n=w.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function f(e,t,n,r){var i=r?"":x.classPrefix,o='<span class="'+i,a=n?"":"</span>";return o+=e+'">',o+t+a}function p(){if(!k.k)return t(T);var e="",n=0;k.lR.lastIndex=0;for(var r=k.lR.exec(T);r;){e+=t(T.substr(n,r.index-n));var i=h(k,r);i?(E+=i[1],e+=f(i[0],t(r[0]))):e+=t(r[0]),n=k.lR.lastIndex,r=k.lR.exec(T)}return e+t(T.substr(n))}function g(){if(k.sL&&!_[k.sL])return t(T);var e=k.sL?c(k.sL,T,!0,C[k.sL]):u(T);return k.r>0&&(E+=e.r),"continuous"==k.subLanguageMode&&(C[k.sL]=e.top),f(e.language,e.value,!1,!0)}function m(){return void 0!==k.sL?g():p()}function v(e,n){var r=e.cN?f(e.cN,"",!0):"";e.rB?(S+=r,T=""):e.eB?(S+=t(n)+r,T=""):(S+=r,T=n),k=Object.create(e,{parent:{value:k}})}function b(e,n){if(T+=e,void 0===n)return S+=m(),0;var r=a(n,k);if(r)return S+=m(),v(r,n),r.rB?0:n.length;var i=s(k,n);if(i){var o=k;o.rE||o.eE||(T+=n),S+=m();do k.cN&&(S+="</span>"),E+=k.r,k=k.parent;while(k!=i.parent);return o.eE&&(S+=t(n)),T="",i.starts&&v(i.starts,""),o.rE?0:n.length}if(d(n,k))throw new Error('Illegal lexeme "'+n+'" for mode "'+(k.cN||"<unnamed>")+'"');return T+=n,n.length||1}var w=y(e);if(!w)throw new Error('Unknown language: "'+e+'"');l(w);for(var k=o||w,C={},S="",D=k;D!=w;D=D.parent)D.cN&&(S=f(D.cN,"",!0)+S);var T="",E=0;try{for(var M,L,B=0;k.t.lastIndex=B,M=k.t.exec(n),M;)L=b(n.substr(B,M.index-B),M[0]),B=M.index+L;b(n.substr(B));for(var D=k;D.parent;D=D.parent)D.cN&&(S+="</span>");return{r:E,value:S,language:e,top:k}}catch(A){if(-1!=A.message.indexOf("Illegal"))return{r:0,value:t(n)};throw A}}function u(e,n){n=n||x.languages||Object.keys(_);var r={r:0,value:t(e)},i=r;return n.forEach(function(t){if(y(t)){var n=c(t,e,!1);n.language=t,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}}),i.language&&(r.second_best=i),r}function d(e){return x.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t){return t.replace(/\t/g,x.tabReplace)})),x.useBR&&(e=e.replace(/\n/g,"<br>")),e}function h(e,t,n){var r=t?w[t]:n,i=[e.trim()];return e.match(/(\s|^)hljs(\s|$)/)||i.push("hljs"),r&&i.push(r),i.join(" ").trim()}function f(e){var t=i(e);if(!/no(-?)highlight/.test(t)){var n;x.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=e;var r=n.textContent,o=t?c(t,r,!0):u(r),l=a(n);if(l.length){var f=document.createElementNS("http://www.w3.org/1999/xhtml","div");f.innerHTML=o.value,o.value=s(l,a(f),r)}o.value=d(o.value),e.innerHTML=o.value,e.className=h(e.className,t,o.language),e.result={language:o.language,re:o.r},o.second_best&&(e.second_best={language:o.second_best.language,re:o.second_best.r})}}function p(e){x=o(x,e)}function g(){if(!g.called){g.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,f)}}function m(){addEventListener("DOMContentLoaded",g,!1),addEventListener("load",g,!1)}function v(t,n){var r=_[t]=n(e);r.aliases&&r.aliases.forEach(function(e){w[e]=t})}function b(){return Object.keys(_)}function y(e){return _[e]||_[w[e]]}var x={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},_={},w={};return e.highlight=c,e.highlightAuto=u,e.fixMarkup=d,e.highlightBlock=f,e.configure=p,e.initHighlighting=g,e.initHighlightingOnLoad=m,e.registerLanguage=v,e.listLanguages=b,e.getLanguage=y,e.inherit=o,e.IR="[a-zA-Z][a-zA-Z0-9_]*",e.UIR="[a-zA-Z_][a-zA-Z0-9_]*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/},e.CLCM={cN:"comment",b:"//",e:"$",c:[e.PWM]},e.CBCM={cN:"comment",b:"/\\*",e:"\\*/",c:[e.PWM]},e.HCM={cN:"comment",b:"#",e:"$",c:[e.PWM]},e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e}),hljs.registerLanguage("coffeescript",function(e){var t={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",reserved:"case default function var void with const let enum export import native __hasProp __extends __slice __bind __indexOf",built_in:"npm require console print module global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"subst",b:/#\{/,e:/}/,k:t},i=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,r]},{b:/"/,e:/"/,c:[e.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,e.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@"+n},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];r.c=i;var o=e.inherit(e.TM,{b:n}),a="(\\(.*\\))?\\s*\\B[-=]>",s={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:t,c:["self"].concat(i)}]};return{aliases:["coffee","cson","iced"],k:t,i:/\/\*/,c:i.concat([{cN:"comment",b:"###",e:"###",c:[e.PWM]},e.HCM,{cN:"function",b:"^\\s*"+n+"\\s*=\\s*"+a,e:"[-=]>",rB:!0,c:[o,s]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:a,e:"[-=]>",rB:!0,c:[s]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[o]},o]},{cN:"attribute",b:n+":",e:":",rB:!0,rE:!0,r:0}])}}),hljs.registerLanguage("apache",function(e){var t={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",t]},t,e.QSM]}}],i:/\S/}}),hljs.registerLanguage("http",function(){return{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:!0}}]}}),hljs.registerLanguage("cs",function(e){var t="abstract as base bool break byte case catch char checked const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long null object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async protected public private internal ascending descending from get group into join let orderby partial select set value var where yield",n=e.IR+"(<"+e.IR+">)?";return{aliases:["csharp"],k:t,i:/::/,c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",v:[{b:"///",r:0},{b:"<!--|-->"},{b:"</?",e:">"}]}]},e.CLCM,e.CBCM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},e.ASM,e.QSM,e.CNM,{bK:"class namespace interface",e:/[{;=]/,i:/[^\s:]/,c:[e.TM,e.CLCM,e.CBCM]},{bK:"new return throw await",r:0},{cN:"function",b:"("+n+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("java",function(e){var t=e.UIR+"(<"+e.UIR+">)?",n="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private",r="(\\b(0b[01_]+)|\\b0[xX][a-fA-F0-9_]+|(\\b[\\d_]+(\\.[\\d_]*)?|\\.[\\d_]+)([eE][-+]?\\d+)?)[lLfF]?",i={cN:"number",b:r,r:0};return{aliases:["jsp"],k:n,i:/<\//,c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",r:0,c:[{cN:"javadoctag",b:"(^|\\s)@[A-Za-z]+"}]},e.CLCM,e.CBCM,e.ASM,e.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},e.UTM]},{bK:"new throw return",r:0},{cN:"function",b:"("+t+"\\s+)+"+e.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:n,c:[{b:e.UIR+"\\s*\\(",rB:!0,r:0,c:[e.UTM]},{cN:"params",b:/\(/,e:/\)/,k:n,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]},i,{cN:"annotation",b:"@[A-Za-z]+"}]}}),hljs.registerLanguage("sql",function(e){var t={cN:"comment",b:"--",e:"$"};return{cI:!0,i:/[<>]/,c:[{cN:"operator",bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate savepoint release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup",e:/;/,eW:!0,k:{keyword:"abs absolute acos action add adddate addtime aes_decrypt aes_encrypt after aggregate all allocate alter analyze and any are as asc ascii asin assertion at atan atan2 atn2 authorization authors avg backup before begin benchmark between bin binlog bit_and bit_count bit_length bit_or bit_xor both by cache call cascade cascaded case cast catalog ceil ceiling chain change changed char_length character_length charindex charset check checksum checksum_agg choose close coalesce coercibility collate collation collationproperty column columns columns_updated commit compress concat concat_ws concurrent connect connection connection_id consistent constraint constraints continue contributors conv convert convert_tz corresponding cos cot count count_big crc32 create cross cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime data database databases datalength date_add date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts datetimeoffsetfromparts day dayname dayofmonth dayofweek dayofyear deallocate declare decode default deferrable deferred degrees delayed delete des_decrypt des_encrypt des_key_file desc describe descriptor diagnostics difference disconnect distinct distinctrow div do domain double drop dumpfile each else elt enclosed encode encrypt end end-exec engine engines eomonth errors escape escaped event eventdata events except exception exec execute exists exp explain export_set extended external extract fast fetch field fields find_in_set first first_value floor flush for force foreign format found found_rows from from_base64 from_days from_unixtime full function get get_format get_lock getdate getutcdate global go goto grant grants greatest group group_concat grouping grouping_id gtid_subset gtid_subtract handler having help hex high_priority hosts hour ident_current ident_incr ident_seed identified identity if ifnull ignore iif ilike immediate in index indicator inet6_aton inet6_ntoa inet_aton inet_ntoa infile initially inner innodb input insert install instr intersect into is is_free_lock is_ipv4 is_ipv4_compat is_ipv4_mapped is_not is_not_null is_used_lock isdate isnull isolation join key kill language last last_day last_insert_id last_value lcase lead leading least leaves left len lenght level like limit lines ln load load_file local localtime localtimestamp locate lock log log10 log2 logfile logs low_priority lower lpad ltrim make_set makedate maketime master master_pos_wait match matched max md5 medium merge microsecond mid min minute mod mode module month monthname mutex name_const names national natural nchar next no no_write_to_binlog not now nullif nvarchar oct octet_length of old_password on only open optimize option optionally or ord order outer outfile output pad parse partial partition password patindex percent_rank percentile_cont percentile_disc period_add period_diff pi plugin position pow power pragma precision prepare preserve primary prior privileges procedure procedure_analyze processlist profile profiles public publishingservername purge quarter query quick quote quotename radians rand read references regexp relative relaylog release release_lock rename repair repeat replace replicate reset restore restrict return returns reverse revoke right rlike rollback rollup round row row_count rows rpad rtrim savepoint schema scroll sec_to_time second section select serializable server session session_user set sha sha1 sha2 share show sign sin size slave sleep smalldatetimefromparts snapshot some soname soundex sounds_like space sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sql_variant_property sqlstate sqrt square start starting status std stddev stddev_pop stddev_samp stdev stdevp stop str str_to_date straight_join strcmp string stuff subdate substr substring subtime subtring_index sum switchoffset sysdate sysdatetime sysdatetimeoffset system_user sysutcdatetime table tables tablespace tan temporary terminated tertiary_weights then time time_format time_to_sec timediff timefromparts timestamp timestampadd timestampdiff timezone_hour timezone_minute to to_base64 to_days to_seconds todatetimeoffset trailing transaction translation trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse ucase uncompress uncompressed_length unhex unicode uninstall union unique unix_timestamp unknown unlock update upgrade upped upper usage use user user_resources using utc_date utc_time utc_timestamp uuid uuid_short validate_password_strength value values var var_pop var_samp variables variance varp version view warnings week weekday weekofyear weight_string when whenever where with work write xml xor year yearweek zon",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int integer interval number numeric real serial smallint varchar varying int8 serial8 text"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t]},e.CBCM,t]}}),hljs.registerLanguage("nginx",function(e){var t={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+e.UIR}]},n={eW:!0,l:"[a-z/_]+",k:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[e.HCM,{cN:"string",c:[e.BE,t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{cN:"url",b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[t]},{cN:"regexp",c:[e.BE,t],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},t]};return{aliases:["nginxconf"],c:[e.HCM,{b:e.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"title",b:e.UIR,starts:n}],r:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("xml",function(){var e="[A-Za-z0-9\\._:-]+",t={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php",subLanguageMode:"continuous"},n={eW:!0,i:/</,r:0,c:[t,{cN:"attribute",b:e,r:0},{b:"=",r:0,c:[{cN:"value",c:[t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[n],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[n],starts:{e:"</script>",rE:!0,sL:"javascript"}},t,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},n]}]}}),hljs.registerLanguage("diff",function(){return{aliases:["patch"],c:[{cN:"chunk",r:10,v:[{b:/^\@\@ +\-\d+,\d+ +\+\d+,\d+ +\@\@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"header",v:[{b:/Index: /,e:/$/},{b:/=====/,e:/=====$/},{b:/^\-\-\-/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+\+\+/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("javascript",function(e){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document"},c:[{cN:"pi",r:10,v:[{b:/^\s*('|")use strict('|")/},{b:/^\s*('|")use asm('|")/}]},e.ASM,e.QSM,e.CLCM,e.CBCM,e.CNM,{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[e.CLCM,e.CBCM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+e.IR,r:0}]}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)\}/}]},n={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]},r={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,e.NM,n,r,t]}}),hljs.registerLanguage("objectivec",function(e){var t={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"NSString NSData NSDictionary CGRect CGPoint UIButton UILabel UITextView UIWebView MKMapView NSView NSViewController NSWindow NSWindowController NSSet NSUUID NSIndexSet UISegmentedControl NSObject UITableViewDelegate UITableViewDataSource NSThread UIActivityIndicator UITabbar UIToolBar UIBarButtonItem UIImageView NSAutoreleasePool UITableView BOOL NSInteger CGFloat NSException NSLog NSMutableString NSMutableArray NSMutableDictionary NSURL NSIndexPath CGSize UITableViewCell UIView UIViewController UINavigationBar UINavigationController UITabBarController UIPopoverController UIPopoverControllerDelegate UIImage NSNumber UISearchBar NSFetchedResultsController NSFetchedResultsChangeType UIScrollView UIScrollViewDelegate UIEdgeInsets UIColor UIFont UIApplication NSNotFound NSNotificationCenter NSNotification UILocalNotification NSBundle NSFileManager NSTimeInterval NSDate NSCalendar NSUserDefaults UIWindow NSRange NSArray NSError NSURLRequest NSURLConnection NSURLSession NSURLSessionDataTask NSURLSessionDownloadTask NSURLSessionUploadTask NSURLResponseUIInterfaceOrientation MPMoviePlayerController dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,r="@interface @class @protocol @implementation";return{aliases:["m","mm","objc","obj-c"],k:t,l:n,i:"</",c:[e.CLCM,e.CBCM,e.CNM,e.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[e.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"preprocessor",b:"#",e:"$",c:[{cN:"title",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+r.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:r,l:n,c:[e.UTM]},{cN:"variable",b:"\\."+e.UIR,r:0}]}}),hljs.registerLanguage("markdown",function(){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{
b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|	)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},n=[e.QSM,e.CNM],r={cN:"value",e:",",eW:!0,eE:!0,c:n,k:t},i={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[e.BE],i:"\\n",starts:r}],i:"\\S"},o={b:"\\[",e:"\\]",c:[e.inherit(r,{cN:null})],i:"\\S"};return n.splice(n.length,0,i,o),{c:n,k:t,i:"\\S"}}),hljs.registerLanguage("python",function(e){var t={cN:"prompt",b:/^(>>>|\.\.\.) /},n={cN:"string",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[t],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[t],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},e.ASM,e.QSM]},r={cN:"number",r:0,v:[{b:e.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:e.CNR+"[lLjJ]?"}]},i={cN:"params",b:/\(/,e:/\)/,c:["self",t,r,n]};return{aliases:["py","gyp"],k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},i:/(<\/|->|\?)/,c:[t,r,n,e.HCM,{v:[{cN:"function",bK:"def",r:10},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n]/,c:[e.UTM,i]},{cN:"decorator",b:/@/,e:/$/},{b:/\b(print|exec)\(/}]}}),hljs.registerLanguage("ruby",function(e){var t="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",n="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",r={cN:"yardoctag",b:"@[A-Za-z]+"},i={cN:"value",b:"#<",e:">"},o={cN:"comment",v:[{b:"#",e:"$",c:[r]},{b:"^\\=begin",e:"^\\=end",c:[r],r:10},{b:"^__END__",e:"\\n$"}]},a={cN:"subst",b:"#\\{",e:"}",k:n},s={cN:"string",c:[e.BE,a],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},l={cN:"params",b:"\\(",e:"\\)",k:n},c=[s,i,o,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]},o]},{cN:"function",bK:"def",e:" |$|;",r:0,c:[e.inherit(e.TM,{b:t}),l,o]},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":",c:[s,{b:t}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:[i,o,{cN:"regexp",c:[e.BE,a],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}],r:0}];a.c=c,l.c=c;var u="[>?]>",d="[\\w#]+\\(\\w+\\):\\d+:\\d+>",h="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",f=[{b:/^\s*=>/,cN:"status",starts:{e:"$",c:c}},{cN:"prompt",b:"^("+u+"|"+d+"|"+h+")",starts:{e:"$",c:c}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:n,c:[o].concat(f).concat(c)}}),hljs.registerLanguage("cpp",function(e){var t={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex _Complex _Imaginaryintmax_t uintmax_t int8_t uint8_t int16_t uint16_t int32_t uint32_t  int64_t uint64_tint_least8_t uint_least8_t int_least16_t uint_least16_t int_least32_t uint_least32_tint_least64_t uint_least64_t int_fast8_t uint_fast8_t int_fast16_t uint_fast16_t int_fast32_tuint_fast32_t int_fast64_t uint_fast64_t intptr_t uintptr_t atomic_bool atomic_char atomic_scharatomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llongatomic_ullong atomic_wchar_t atomic_char16_t atomic_char32_t atomic_intmax_t atomic_uintmax_tatomic_intptr_t atomic_uintptr_t atomic_size_t atomic_ptrdiff_t atomic_int_least8_t atomic_int_least16_tatomic_int_least32_t atomic_int_least64_t atomic_uint_least8_t atomic_uint_least16_t atomic_uint_least32_tatomic_uint_least64_t atomic_int_fast8_t atomic_int_fast16_t atomic_int_fast32_t atomic_int_fast64_tatomic_uint_fast8_t atomic_uint_fast16_t atomic_uint_fast32_t atomic_uint_fast64_t",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf"};return{aliases:["c","h","c++","h++"],k:t,i:"</",c:[e.CLCM,e.CBCM,e.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},e.CNM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line pragma",c:[{b:'include\\s*[<"]',e:'[>"]',k:"include",i:"\\n"},e.CLCM]},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:t,c:["self"]},{b:e.IR+"::"},{bK:"new throw return",r:0},{cN:"function",b:"("+e.IR+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("css",function(e){var t="[a-zA-Z-][a-zA-Z0-9_-]*",n={cN:"function",b:t+"\\(",rB:!0,eE:!0,e:"\\("};return{cI:!0,i:"[=/|']",c:[e.CBCM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[n,e.ASM,e.QSM,e.CSSNM]}]},{cN:"tag",b:t,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[e.CBCM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[n,e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]}]}]}}),hljs.registerLanguage("php",function(e){var t={cN:"variable",b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},n={cN:"preprocessor",b:/<\?(php)?|\?>/},r={cN:"string",c:[e.BE,n],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},e.inherit(e.ASM,{i:null}),e.inherit(e.QSM,{i:null})]},i={v:[e.BNM,e.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[e.CLCM,e.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"},n]},{cN:"comment",b:"__halt_compiler.+?;",eW:!0,k:"__halt_compiler",l:e.UIR},{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[e.BE]},n,t,{b:/->+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[e.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",t,e.CBCM,r,i]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},e.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[e.UTM]},{bK:"use",e:";",c:[e.UTM]},{b:"=>"},r,i]}}),hljs.registerLanguage("perl",function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",n={cN:"subst",b:"[$@]\\{",e:"\\}",k:t},r={b:"->{",e:"}"},i={cN:"variable",v:[{b:/\$\d/},{b:/[\$\%\@](\^\w\b|#\w+(\:\:\w+)*|{\w+}|\w+(\:\:\w*)*)/},{b:/[\$\%\@][^\s\w{]/,r:0}]},o={cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5},a=[e.BE,n,i],s=[i,e.HCM,o,{cN:"comment",b:"^\\=\\w",e:"\\=cut",eW:!0},r,{cN:"string",c:a,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[e.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[e.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[e.HCM,o,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"sub",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",r:5},{cN:"operator",b:"-\\w\\b",r:0}];return n.c=s,r.c=s,{aliases:["pl"],k:t,c:s}}),hljs.registerLanguage("ini",function(e){return{cI:!0,i:/\S/,c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:!0,k:"on off true false yes no",c:[e.QSM,e.NM],r:0}]}]}}),hljs.registerLanguage("makefile",function(e){var t={cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]};return{aliases:["mk","mak"],c:[e.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{cN:"constant",e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[t]}}},{cN:"title",b:/^[\w]+:\s*$/},{cN:"phony",b:/^\.PHONY:/,e:/$/,k:".PHONY",l:/[\.\w]+/},{b:/^\t+/,e:/$/,r:0,c:[e.QSM,t]}]}}),define("math",["jquery","main"],function(e,t){"use strict";return function(n){var r,i;r=n||e(".fmt"),"undefined"!=typeof MathJax?r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,e(this).get(0)])}):(i=t.staticUrl+"/3rd/MathJax/MathJax.js",e.getScript(i,function(){MathJax.Hub.Config({extensions:["tex2jax.js"],jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,ignoreClass:"side"}}),r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,e(this).get(0)])})}))}}),function(e){var t,n,r="0.4.2",i="hasOwnProperty",o=/[\.\/]/,a="*",s=function(){},l=function(e,t){return e-t},c={n:{}},u=function(e,r){e=String(e);var i,o=n,a=Array.prototype.slice.call(arguments,2),s=u.listeners(e),c=0,d=[],h={},f=[],p=t;t=e,n=0;for(var g=0,m=s.length;m>g;g++)"zIndex"in s[g]&&(d.push(s[g].zIndex),s[g].zIndex<0&&(h[s[g].zIndex]=s[g]));for(d.sort(l);d[c]<0;)if(i=h[d[c++]],f.push(i.apply(r,a)),n)return n=o,f;for(g=0;m>g;g++)if(i=s[g],"zIndex"in i)if(i.zIndex==d[c]){if(f.push(i.apply(r,a)),n)break;do if(c++,i=h[d[c]],i&&f.push(i.apply(r,a)),n)break;while(i)}else h[i.zIndex]=i;else if(f.push(i.apply(r,a)),n)break;return n=o,t=p,f.length?f:null};u._events=c,u.listeners=function(e){var t,n,r,i,s,l,u,d,h=e.split(o),f=c,p=[f],g=[];for(i=0,s=h.length;s>i;i++){for(d=[],l=0,u=p.length;u>l;l++)for(f=p[l].n,n=[f[h[i]],f[a]],r=2;r--;)t=n[r],t&&(d.push(t),g=g.concat(t.f||[]));p=d}return g},u.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var n=e.split(o),r=c,i=0,a=n.length;a>i;i++)r=r.n,r=r.hasOwnProperty(n[i])&&r[n[i]]||(r[n[i]]={n:{}});for(r.f=r.f||[],i=0,a=r.f.length;a>i;i++)if(r.f[i]==t)return s;return r.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},u.f=function(e){var t=[].slice.call(arguments,1);return function(){u.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},u.stop=function(){n=1},u.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},u.nts=function(){return t.split(o)},u.off=u.unbind=function(e,t){if(!e)return void(u._events=c={n:{}});var n,r,s,l,d,h,f,p=e.split(o),g=[c];for(l=0,d=p.length;d>l;l++)for(h=0;h<g.length;h+=s.length-2){if(s=[h,1],n=g[h].n,p[l]!=a)n[p[l]]&&s.push(n[p[l]]);else for(r in n)n[i](r)&&s.push(n[r]);g.splice.apply(g,s)}for(l=0,d=g.length;d>l;l++)for(n=g[l];n.n;){if(t){if(n.f){for(h=0,f=n.f.length;f>h;h++)if(n.f[h]==t){n.f.splice(h,1);break}!n.f.length&&delete n.f}for(r in n.n)if(n.n[i](r)&&n.n[r].f){var m=n.n[r].f;for(h=0,f=m.length;f>h;h++)if(m[h]==t){m.splice(h,1);break}!m.length&&delete n.n[r].f}}else{delete n.f;for(r in n.n)n.n[i](r)&&n.n[r].f&&delete n.n[r].f}n=n.n}},u.once=function(e,t){var n=function(){return u.unbind(e,n),t.apply(this,arguments)};return u.on(e,n)},u.version=r,u.toString=function(){return"You are running Eve "+r},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):e.eve=u}(this),function(e,t){"function"==typeof define&&define.amd?define("Raphael",["eve"],function(n){return t(e,n)}):t(e,e.eve)}(this,function(e,t){function n(e){if(n.is(e,"function"))return x?e():t.on("raphael.DOMload",e);if(n.is(e,X))return n._engine.create[M](n,e.splice(0,3+n.is(e[0],U))).add(e);var r=Array.prototype.slice.call(arguments,0);if(n.is(r[r.length-1],"function")){var i=r.pop();return x?i.call(n._engine.create[M](n,r)):t.on("raphael.DOMload",function(){i.call(n._engine.create[M](n,r))})}return n._engine.create[M](n,arguments)}function r(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[S](n)&&(t[n]=r(e[n]));return t}function i(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function o(e,t,n){function r(){var o=Array.prototype.slice.call(arguments,0),a=o.join("␀"),s=r.cache=r.cache||{},l=r.count=r.count||[];return s[S](a)?(i(l,a),n?n(s[a]):s[a]):(l.length>=1e3&&delete s[l.shift()],l.push(a),s[a]=e[M](t,o),n?n(s[a]):s[a])}return r}function a(){return this.hex}function s(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?o[3]={x:+e[0],y:+e[1]}:i-2==r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function l(e,t,n,r,i){var o=-3*t+9*n-9*r+3*i,a=e*o+6*t-12*n+6*r;return e*a-3*t+3*n}function c(e,t,n,r,i,o,a,s,c){null==c&&(c=1),c=c>1?1:0>c?0:c;for(var u=c/2,d=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;d>g;g++){var m=u*h[g]+u,v=l(m,e,n,i,a),b=l(m,t,r,o,s),y=v*v+b*b;p+=f[g]*R.sqrt(y)}return u*p}function u(e,t,n,r,i,o,a,s,l){if(!(0>l||c(e,t,n,r,i,o,a,s)<l)){var u,d=1,h=d/2,f=d-h,p=.01;for(u=c(e,t,n,r,i,o,a,s,f);P(u-l)>p;)h/=2,f+=(l>u?1:-1)*h,u=c(e,t,n,r,i,o,a,s,f);return f}}function d(e,t,n,r,i,o,a,s){if(!(j(e,n)<q(i,a)||q(e,n)>j(i,a)||j(t,r)<q(o,s)||q(t,r)>j(o,s))){var l=(e*r-t*n)*(i-a)-(e-n)*(i*s-o*a),c=(e*r-t*n)*(o-s)-(t-r)*(i*s-o*a),u=(e-n)*(o-s)-(t-r)*(i-a);if(u){var d=l/u,h=c/u,f=+d.toFixed(2),p=+h.toFixed(2);if(!(f<+q(e,n).toFixed(2)||f>+j(e,n).toFixed(2)||f<+q(i,a).toFixed(2)||f>+j(i,a).toFixed(2)||p<+q(t,r).toFixed(2)||p>+j(t,r).toFixed(2)||p<+q(o,s).toFixed(2)||p>+j(o,s).toFixed(2)))return{x:d,y:h}}}}function h(e,t,r){var i=n.bezierBBox(e),o=n.bezierBBox(t);if(!n.isBBoxIntersect(i,o))return r?0:[];for(var a=c.apply(0,e),s=c.apply(0,t),l=j(~~(a/5),1),u=j(~~(s/5),1),h=[],f=[],p={},g=r?0:[],m=0;l+1>m;m++){var v=n.findDotsAtSegment.apply(n,e.concat(m/l));h.push({x:v.x,y:v.y,t:m/l})}for(m=0;u+1>m;m++)v=n.findDotsAtSegment.apply(n,t.concat(m/u)),f.push({x:v.x,y:v.y,t:m/u});for(m=0;l>m;m++)for(var b=0;u>b;b++){var y=h[m],x=h[m+1],_=f[b],w=f[b+1],k=P(x.x-y.x)<.001?"y":"x",C=P(w.x-_.x)<.001?"y":"x",S=d(y.x,y.y,x.x,x.y,_.x,_.y,w.x,w.y);if(S){if(p[S.x.toFixed(4)]==S.y.toFixed(4))continue;p[S.x.toFixed(4)]=S.y.toFixed(4);var D=y.t+P((S[k]-y[k])/(x[k]-y[k]))*(x.t-y.t),T=_.t+P((S[C]-_[C])/(w[C]-_[C]))*(w.t-_.t);D>=0&&1.001>=D&&T>=0&&1.001>=T&&(r?g++:g.push({x:S.x,y:S.y,t1:q(D,1),t2:q(T,1)}))}}return g}function f(e,t,r){e=n._path2curve(e),t=n._path2curve(t);for(var i,o,a,s,l,c,u,d,f,p,g=r?0:[],m=0,v=e.length;v>m;m++){var b=e[m];if("M"==b[0])i=l=b[1],o=c=b[2];else{"C"==b[0]?(f=[i,o].concat(b.slice(1)),i=f[6],o=f[7]):(f=[i,o,i,o,l,c,l,c],i=l,o=c);for(var y=0,x=t.length;x>y;y++){var _=t[y];if("M"==_[0])a=u=_[1],s=d=_[2];else{"C"==_[0]?(p=[a,s].concat(_.slice(1)),a=p[6],s=p[7]):(p=[a,s,a,s,u,d,u,d],a=u,s=d);var w=h(f,p,r);if(r)g+=w;else{for(var k=0,C=w.length;C>k;k++)w[k].segment1=m,w[k].segment2=y,w[k].bez1=f,w[k].bez2=p;g=g.concat(w)}}}}}return g}function p(e,t,n,r,i,o){null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function g(){return this.x+N+this.y+N+this.width+" × "+this.height}function m(e,t,n,r,i,o){function a(e){return((d*e+u)*e+c)*e}function s(e,t){var n=l(e,t);return((p*n+f)*n+h)*n}function l(e,t){var n,r,i,o,s,l;for(i=e,l=0;8>l;l++){if(o=a(i)-e,P(o)<t)return i;if(s=(3*d*i+2*u)*i+c,P(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=e,n>i)return n;if(i>r)return r;for(;r>n;){if(o=a(i),P(o-e)<t)return i;e>o?n=i:r=i,i=(r-n)/2+n}return i}var c=3*t,u=3*(r-t)-c,d=1-c-u,h=3*n,f=3*(i-n)-h,p=1-h-f;return s(e,1/(200*o))}function v(e,t){var n=[],r={};if(this.ms=t,this.times=1,e){for(var i in e)e[S](i)&&(r[J(i)]=e[i],n.push(J(i)));n.sort(de)}this.anim=r,this.top=n[n.length-1],this.percents=n}function b(e,r,i,o,a,s){i=J(i);var l,c,u,d,h,f,g=e.ms,v={},b={},y={};if(o)for(_=0,k=lt.length;k>_;_++){var x=lt[_];if(x.el.id==r.id&&x.anim==e){x.percent!=i?(lt.splice(_,1),u=1):c=x,r.attr(x.totalOrigin);break}}else o=+b;for(var _=0,k=e.percents.length;k>_;_++){if(e.percents[_]==i||e.percents[_]>o*e.top){i=e.percents[_],h=e.percents[_-1]||0,g=g/e.top*(i-h),d=e.percents[_+1],l=e.anim[i];break}o&&r.attr(e.anim[e.percents[_]])}if(l){if(c)c.initstatus=o,c.start=new Date-c.ms*o;else{for(var C in l)if(l[S](C)&&(re[S](C)||r.paper.customAttributes[S](C)))switch(v[C]=r.attr(C),null==v[C]&&(v[C]=ne[C]),b[C]=l[C],re[C]){case U:y[C]=(b[C]-v[C])/g;break;case"colour":v[C]=n.getRGB(v[C]);var D=n.getRGB(b[C]);y[C]={r:(D.r-v[C].r)/g,g:(D.g-v[C].g)/g,b:(D.b-v[C].b)/g};break;case"path":var T=Fe(v[C],b[C]),E=T[1];for(v[C]=T[0],y[C]=[],_=0,k=v[C].length;k>_;_++){y[C][_]=[0];for(var M=1,B=v[C][_].length;B>M;M++)y[C][_][M]=(E[_][M]-v[C][_][M])/g}break;case"transform":var A=r._,N=qe(A[C],b[C]);if(N)for(v[C]=N.from,b[C]=N.to,y[C]=[],y[C].real=!0,_=0,k=v[C].length;k>_;_++)for(y[C][_]=[v[C][_][0]],M=1,B=v[C][_].length;B>M;M++)y[C][_][M]=(b[C][_][M]-v[C][_][M])/g;else{var F=r.matrix||new p,z={_:{transform:A.transform},getBBox:function(){return r.getBBox(1)}};v[C]=[F.a,F.b,F.c,F.d,F.e,F.f],Re(z,b[C]),b[C]=z._.transform,y[C]=[(z.matrix.a-F.a)/g,(z.matrix.b-F.b)/g,(z.matrix.c-F.c)/g,(z.matrix.d-F.d)/g,(z.matrix.e-F.e)/g,(z.matrix.f-F.f)/g]}break;case"csv":var O=I(l[C])[$](w),R=I(v[C])[$](w);if("clip-rect"==C)for(v[C]=R,y[C]=[],_=R.length;_--;)y[C][_]=(O[_]-v[C][_])/g;b[C]=O;break;default:for(O=[][L](l[C]),R=[][L](v[C]),y[C]=[],_=r.paper.customAttributes[C].length;_--;)y[C][_]=((O[_]||0)-(R[_]||0))/g}var j=l.easing,q=n.easing_formulas[j];if(!q)if(q=I(j).match(Z),q&&5==q.length){var P=q;q=function(e){return m(e,+P[1],+P[2],+P[3],+P[4],g)}}else q=fe;if(f=l.start||e.start||+new Date,x={anim:e,percent:i,timestamp:f,start:f+(e.del||0),status:0,initstatus:o||0,stop:!1,ms:g,easing:q,from:v,diff:y,to:b,el:r,callback:l.callback,prev:h,next:d,repeat:s||e.times,origin:r.attr(),totalOrigin:a},lt.push(x),o&&!c&&!u&&(x.stop=!0,x.start=new Date-g*o,1==lt.length))return ut();u&&(x.start=new Date-x.ms*o),1==lt.length&&ct(ut)}t("raphael.anim.start."+r.id,r,e)}}function y(e){for(var t=0;t<lt.length;t++)lt[t].el.paper==e&&lt.splice(t--,1)}n.version="2.1.0",n.eve=t;var x,_,w=/[, ]+/,k={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,S="hasOwnProperty",D={doc:document,win:e},T={was:Object.prototype[S].call(D.win,"Raphael"),is:D.win.Raphael},E=function(){this.ca=this.customAttributes={}},M="apply",L="concat",B="ontouchstart"in D.win||D.win.DocumentTouch&&D.doc instanceof DocumentTouch,A="",N=" ",I=String,$="split",F="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[$](N),z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},O=I.prototype.toLowerCase,R=Math,j=R.max,q=R.min,P=R.abs,H=R.pow,W=R.PI,U="number",V="string",X="array",K=Object.prototype.toString,G=(n._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Y={NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=R.round,J=parseFloat,ee=parseInt,te=I.prototype.toUpperCase,ne=n._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},re=n._availableAnimAttrs={blur:U,"clip-rect":"csv",cx:U,cy:U,fill:"colour","fill-opacity":U,"font-size":U,height:U,opacity:U,path:"path",r:U,rx:U,ry:U,stroke:"colour","stroke-opacity":U,"stroke-width":U,transform:"transform",width:U,x:U,y:U},ie=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,oe={hs:1,rg:1},ae=/,?([achlmqrstvxz]),?/gi,se=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,le=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ce=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ue=(n._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),de=function(e,t){return J(e)-J(t)},he=function(){},fe=function(e){return e},pe=n._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},ge=function(e,t,n,r){return null==r&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},me=n._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return ge(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return ge(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return pe(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return pe(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return pe(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return pe(t.x,t.y,t.width,t.height)}},ve=n.mapPath=function(e,t){if(!t)return e;var n,r,i,o,a,s,l;for(e=Fe(e),i=0,a=e.length;a>i;i++)for(l=e[i],o=1,s=l.length;s>o;o+=2)n=t.x(l[o],l[o+1]),r=t.y(l[o],l[o+1]),l[o]=n,l[o+1]=r;return e};if(n._g=D,n.type=D.win.SVGAngle||D.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==n.type){var be,ye=D.doc.createElement("div");if(ye.innerHTML='<v:shape adj="1"/>',be=ye.firstChild,be.style.behavior="url(#default#VML)",!be||"object"!=typeof be.adj)return n.type=A;ye=null}n.svg=!(n.vml="VML"==n.type),n._Paper=E,n.fn=_=E.prototype=n.prototype,n._id=0,n._oid=0,n.is=function(e,t){return t=O.call(t),"finite"==t?!Y[S](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||K.call(e).slice(8,-1).toLowerCase()==t},n.angle=function(e,t,r,i,o,a){if(null==o){var s=e-r,l=t-i;return s||l?(180+180*R.atan2(-l,-s)/W+360)%360:0}return n.angle(e,t,o,a)-n.angle(r,i,o,a)},n.rad=function(e){return e%360*W/180},n.deg=function(e){return 180*e/W%360},n.snapTo=function(e,t,r){if(r=n.is(r,"finite")?r:10,n.is(e,X)){for(var i=e.length;i--;)if(P(e[i]-t)<=r)return e[i]}else{e=+e;var o=t%e;if(r>o)return t-o;if(o>e-r)return t-o+e}return t};n.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=16*R.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});n.setWindow=function(e){t("raphael.setWindow",n,D.win,e),D.win=e,D.doc=D.win.document,n._engine.initWin&&n._engine.initWin(D.win)};var xe=function(e){if(n.vml){var t,r=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),t=i.body}catch(a){t=createPopup().document.body}var s=t.createTextRange();xe=o(function(e){try{t.style.color=I(e).replace(r,A);var n=s.queryCommandValue("ForeColor");return n=(255&n)<<16|65280&n|(16711680&n)>>>16,"#"+("000000"+n.toString(16)).slice(-6)}catch(i){return"none"}})}else{var l=D.doc.createElement("i");l.title="Raphaël Colour Picker",l.style.display="none",D.doc.body.appendChild(l),xe=o(function(e){return l.style.color=e,D.doc.defaultView.getComputedStyle(l,A).getPropertyValue("color")})}return xe(e)},_e=function(){return"hsb("+[this.h,this.s,this.b]+")"},we=function(){return"hsl("+[this.h,this.s,this.l]+")"},ke=function(){return this.hex},Ce=function(e,t,r){if(null==t&&n.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&n.is(e,V)){var i=n.getRGB(e);e=i.r,t=i.g,r=i.b}return(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255),[e,t,r]},Se=function(e,t,r,i){e*=255,t*=255,r*=255;var o={r:e,g:t,b:r,hex:n.rgb(e,t,r),toString:ke};return n.is(i,"finite")&&(o.opacity=i),o};n.color=function(e){var t;return n.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):n.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):(n.is(e,"string")&&(e=n.getRGB(e)),n.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1)),e.toString=ke,e},n.hsb2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,e=e.h,r=e.o),e*=360;var i,o,a,s,l;return e=e%360/60,l=n*t,s=l*(1-P(e%2-1)),i=o=a=n-l,e=~~e,i+=[l,s,0,0,s,l][e],o+=[s,l,l,s,0,0][e],a+=[0,0,s,l,l,s][e],Se(i,o,a,r)},n.hsl2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),e*=360;var i,o,a,s,l;return e=e%360/60,l=2*t*(.5>n?n:1-n),s=l*(1-P(e%2-1)),i=o=a=n-l/2,e=~~e,i+=[l,s,0,0,s,l][e],o+=[s,l,l,s,0,0][e],a+=[0,0,s,l,l,s][e],Se(i,o,a,r)},n.rgb2hsb=function(e,t,n){n=Ce(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,o,a;return o=j(e,t,n),a=o-q(e,t,n),r=0==a?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4,r=(r+360)%6*60/360,i=0==a?0:a/o,{h:r,s:i,b:o,toString:_e}},n.rgb2hsl=function(e,t,n){n=Ce(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,o,a,s,l;return a=j(e,t,n),s=q(e,t,n),l=a-s,r=0==l?null:a==e?(t-n)/l:a==t?(n-e)/l+2:(e-t)/l+4,r=(r+360)%6*60/360,o=(a+s)/2,i=0==l?0:.5>o?l/(2*o):l/(2-2*o),{h:r,s:i,l:o,toString:we}},n._path2string=function(){return this.join(",").replace(ae,"$1")};n._preload=function(e,t){var n=D.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,D.doc.body.removeChild(this)},n.onerror=function(){D.doc.body.removeChild(this)},D.doc.body.appendChild(n),n.src=e};n.getRGB=o(function(e){if(!e||(e=I(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:a};!(oe[S](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=xe(e));var t,r,i,o,s,l,c=e.match(G);return c?(c[2]&&(i=ee(c[2].substring(5),16),
r=ee(c[2].substring(3,5),16),t=ee(c[2].substring(1,3),16)),c[3]&&(i=ee((s=c[3].charAt(3))+s,16),r=ee((s=c[3].charAt(2))+s,16),t=ee((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4][$](ie),t=J(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),r=J(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=J(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(o=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100)),c[5]?(l=c[5][$](ie),t=J(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),r=J(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=J(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(o=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),n.hsb2rgb(t,r,i,o)):c[6]?(l=c[6][$](ie),t=J(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),r=J(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=J(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(o=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),n.hsl2rgb(t,r,i,o)):(c={r:t,g:r,b:i,toString:a},c.hex="#"+(16777216|i|r<<8|t<<16).toString(16).slice(1),n.is(o,"finite")&&(c.opacity=o),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a}},n),n.hsb=o(function(e,t,r){return n.hsb2rgb(e,t,r).hex}),n.hsl=o(function(e,t,r){return n.hsl2rgb(e,t,r).hex}),n.rgb=o(function(e,t,n){return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)}),n.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},n.getColor.reset=function(){delete this.start},n.parsePathString=function(e){if(!e)return null;var t=De(e);if(t.arr)return Ee(t.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return n.is(e,X)&&n.is(e[0],X)&&(i=Ee(e)),i.length||I(e).replace(se,function(e,t,n){var o=[],a=t.toLowerCase();if(n.replace(ce,function(e,t){t&&o.push(+t)}),"m"==a&&o.length>2&&(i.push([t][L](o.splice(0,2))),a="l",t="m"==t?"l":"L"),"r"==a)i.push([t][L](o));else for(;o.length>=r[a]&&(i.push([t][L](o.splice(0,r[a]))),r[a]););}),i.toString=n._path2string,t.arr=Ee(i),i},n.parseTransformString=o(function(e){if(!e)return null;var t=[];return n.is(e,X)&&n.is(e[0],X)&&(t=Ee(e)),t.length||I(e).replace(le,function(e,n,r){var i=[];O.call(n);r.replace(ce,function(e,t){t&&i.push(+t)}),t.push([n][L](i))}),t.toString=n._path2string,t});var De=function(e){var t=De.ps=De.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[S](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]};n.findDotsAtSegment=function(e,t,n,r,i,o,a,s,l){var c=1-l,u=H(c,3),d=H(c,2),h=l*l,f=h*l,p=u*e+3*d*l*n+3*c*l*l*i+f*a,g=u*t+3*d*l*r+3*c*l*l*o+f*s,m=e+2*l*(n-e)+h*(i-2*n+e),v=t+2*l*(r-t)+h*(o-2*r+t),b=n+2*l*(i-n)+h*(a-2*i+n),y=r+2*l*(o-r)+h*(s-2*o+r),x=c*e+l*n,_=c*t+l*r,w=c*i+l*a,k=c*o+l*s,C=90-180*R.atan2(m-b,v-y)/W;return(m>b||y>v)&&(C+=180),{x:p,y:g,m:{x:m,y:v},n:{x:b,y:y},start:{x:x,y:_},end:{x:w,y:k},alpha:C}},n.bezierBBox=function(e,t,r,i,o,a,s,l){n.is(e,"array")||(e=[e,t,r,i,o,a,s,l]);var c=$e.apply(null,e);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},n.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},n.isBBoxIntersect=function(e,t){var r=n.isPointInsideBBox;return r(t,e.x,e.y)||r(t,e.x2,e.y)||r(t,e.x,e.y2)||r(t,e.x2,e.y2)||r(e,t.x,t.y)||r(e,t.x2,t.y)||r(e,t.x,t.y2)||r(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},n.pathIntersection=function(e,t){return f(e,t)},n.pathIntersectionNumber=function(e,t){return f(e,t,1)},n.isPointInsidePath=function(e,t,r){var i=n.pathBBox(e);return n.isPointInsideBBox(i,t,r)&&f(e,[["M",t,r],["H",i.x2+10]],1)%2==1},n._removedFactory=function(e){return function(){t("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Te=n.pathBBox=function(e){var t=De(e);if(t.bbox)return r(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=Fe(e);for(var n,i=0,o=0,a=[],s=[],l=0,c=e.length;c>l;l++)if(n=e[l],"M"==n[0])i=n[1],o=n[2],a.push(i),s.push(o);else{var u=$e(i,o,n[1],n[2],n[3],n[4],n[5],n[6]);a=a[L](u.min.x,u.max.x),s=s[L](u.min.y,u.max.y),i=n[5],o=n[6]}var d=q[M](0,a),h=q[M](0,s),f=j[M](0,a),p=j[M](0,s),g=f-d,m=p-h,v={x:d,y:h,x2:f,y2:p,width:g,height:m,cx:d+g/2,cy:h+m/2};return t.bbox=r(v),v},Ee=function(e){var t=r(e);return t.toString=n._path2string,t},Me=n._pathToRelative=function(e){var t=De(e);if(t.rel)return Ee(t.rel);n.is(e,X)&&n.is(e&&e[0],X)||(e=n.parsePathString(e));var r=[],i=0,o=0,a=0,s=0,l=0;"M"==e[0][0]&&(i=e[0][1],o=e[0][2],a=i,s=o,l++,r.push(["M",i,o]));for(var c=l,u=e.length;u>c;c++){var d=r[c]=[],h=e[c];if(h[0]!=O.call(h[0]))switch(d[0]=O.call(h[0]),d[0]){case"a":d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=+(h[6]-i).toFixed(3),d[7]=+(h[7]-o).toFixed(3);break;case"v":d[1]=+(h[1]-o).toFixed(3);break;case"m":a=h[1],s=h[2];default:for(var f=1,p=h.length;p>f;f++)d[f]=+(h[f]-(f%2?i:o)).toFixed(3)}else{d=r[c]=[],"m"==h[0]&&(a=h[1]+i,s=h[2]+o);for(var g=0,m=h.length;m>g;g++)r[c][g]=h[g]}var v=r[c].length;switch(r[c][0]){case"z":i=a,o=s;break;case"h":i+=+r[c][v-1];break;case"v":o+=+r[c][v-1];break;default:i+=+r[c][v-2],o+=+r[c][v-1]}}return r.toString=n._path2string,t.rel=Ee(r),r},Le=n._pathToAbsolute=function(e){var t=De(e);if(t.abs)return Ee(t.abs);if(n.is(e,X)&&n.is(e&&e[0],X)||(e=n.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r=[],i=0,o=0,a=0,l=0,c=0;"M"==e[0][0]&&(i=+e[0][1],o=+e[0][2],a=i,l=o,c++,r[0]=["M",i,o]);for(var u,d,h=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),f=c,p=e.length;p>f;f++){if(r.push(u=[]),d=e[f],d[0]!=te.call(d[0]))switch(u[0]=te.call(d[0]),u[0]){case"A":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+(d[6]+i),u[7]=+(d[7]+o);break;case"V":u[1]=+d[1]+o;break;case"H":u[1]=+d[1]+i;break;case"R":for(var g=[i,o][L](d.slice(1)),m=2,v=g.length;v>m;m++)g[m]=+g[m]+i,g[++m]=+g[m]+o;r.pop(),r=r[L](s(g,h));break;case"M":a=+d[1]+i,l=+d[2]+o;default:for(m=1,v=d.length;v>m;m++)u[m]=+d[m]+(m%2?i:o)}else if("R"==d[0])g=[i,o][L](d.slice(1)),r.pop(),r=r[L](s(g,h)),u=["R"][L](d.slice(-2));else for(var b=0,y=d.length;y>b;b++)u[b]=d[b];switch(u[0]){case"Z":i=a,o=l;break;case"H":i=u[1];break;case"V":o=u[1];break;case"M":a=u[u.length-2],l=u[u.length-1];default:i=u[u.length-2],o=u[u.length-1]}}return r.toString=n._path2string,t.abs=Ee(r),r},Be=function(e,t,n,r){return[e,t,n,r,n,r]},Ae=function(e,t,n,r,i,o){var a=1/3,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]},Ne=function(e,t,n,r,i,a,s,l,c,u){var d,h=120*W/180,f=W/180*(+i||0),p=[],g=o(function(e,t,n){var r=e*R.cos(n)-t*R.sin(n),i=e*R.sin(n)+t*R.cos(n);return{x:r,y:i}});if(u)C=u[0],S=u[1],w=u[2],k=u[3];else{d=g(e,t,-f),e=d.x,t=d.y,d=g(l,c,-f),l=d.x,c=d.y;var m=(R.cos(W/180*i),R.sin(W/180*i),(e-l)/2),v=(t-c)/2,b=m*m/(n*n)+v*v/(r*r);b>1&&(b=R.sqrt(b),n=b*n,r=b*r);var y=n*n,x=r*r,_=(a==s?-1:1)*R.sqrt(P((y*x-y*v*v-x*m*m)/(y*v*v+x*m*m))),w=_*n*v/r+(e+l)/2,k=_*-r*m/n+(t+c)/2,C=R.asin(((t-k)/r).toFixed(9)),S=R.asin(((c-k)/r).toFixed(9));C=w>e?W-C:C,S=w>l?W-S:S,0>C&&(C=2*W+C),0>S&&(S=2*W+S),s&&C>S&&(C-=2*W),!s&&S>C&&(S-=2*W)}var D=S-C;if(P(D)>h){var T=S,E=l,M=c;S=C+h*(s&&S>C?1:-1),l=w+n*R.cos(S),c=k+r*R.sin(S),p=Ne(l,c,n,r,i,0,s,E,M,[S,T,w,k])}D=S-C;var B=R.cos(C),A=R.sin(C),N=R.cos(S),I=R.sin(S),F=R.tan(D/4),z=4/3*n*F,O=4/3*r*F,j=[e,t],q=[e+z*A,t-O*B],H=[l+z*I,c-O*N],U=[l,c];if(q[0]=2*j[0]-q[0],q[1]=2*j[1]-q[1],u)return[q,H,U][L](p);p=[q,H,U][L](p).join()[$](",");for(var V=[],X=0,K=p.length;K>X;X++)V[X]=X%2?g(p[X-1],p[X],f).y:g(p[X],p[X+1],f).x;return V},Ie=function(e,t,n,r,i,o,a,s,l){var c=1-l;return{x:H(c,3)*e+3*H(c,2)*l*n+3*c*l*l*i+H(l,3)*a,y:H(c,3)*t+3*H(c,2)*l*r+3*c*l*l*o+H(l,3)*s}},$e=o(function(e,t,n,r,i,o,a,s){var l,c=i-2*n+e-(a-2*i+n),u=2*(n-e)-2*(i-n),d=e-n,h=(-u+R.sqrt(u*u-4*c*d))/2/c,f=(-u-R.sqrt(u*u-4*c*d))/2/c,p=[t,s],g=[e,a];return P(h)>"1e12"&&(h=.5),P(f)>"1e12"&&(f=.5),h>0&&1>h&&(l=Ie(e,t,n,r,i,o,a,s,h),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=Ie(e,t,n,r,i,o,a,s,f),g.push(l.x),p.push(l.y)),c=o-2*r+t-(s-2*o+r),u=2*(r-t)-2*(o-r),d=t-r,h=(-u+R.sqrt(u*u-4*c*d))/2/c,f=(-u-R.sqrt(u*u-4*c*d))/2/c,P(h)>"1e12"&&(h=.5),P(f)>"1e12"&&(f=.5),h>0&&1>h&&(l=Ie(e,t,n,r,i,o,a,s,h),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=Ie(e,t,n,r,i,o,a,s,f),g.push(l.x),p.push(l.y)),{min:{x:q[M](0,g),y:q[M](0,p)},max:{x:j[M](0,g),y:j[M](0,p)}}}),Fe=n._path2curve=o(function(e,t){var n=!t&&De(e);if(!t&&n.curve)return Ee(n.curve);for(var r=Le(e),i=t&&Le(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][L](Ne[M](0,[t.x,t.y][L](e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i][L](e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][L](Ae(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][L](Ae(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][L](Be(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][L](Be(t.x,t.y,e[1],t.y));break;case"V":e=["C"][L](Be(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][L](Be(t.x,t.y,t.X,t.Y))}return e}),l=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)e.splice(t++,0,["C"][L](n.splice(0,6)));e.splice(t,1),d=j(r.length,i&&i.length||0)}},c=function(e,t,n,o,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],d=j(r.length,i&&i.length||0))},u=0,d=j(r.length,i&&i.length||0);d>u;u++){r[u]=s(r[u],o),l(r,u),i&&(i[u]=s(i[u],a)),i&&l(i,u),c(r,i,o,a,u),c(i,r,a,o,u);var h=r[u],f=i&&i[u],p=h.length,g=i&&f.length;o.x=h[p-2],o.y=h[p-1],o.bx=J(h[p-4])||o.x,o.by=J(h[p-3])||o.y,a.bx=i&&(J(f[g-4])||a.x),a.by=i&&(J(f[g-3])||a.y),a.x=i&&f[g-2],a.y=i&&f[g-1]}return i||(n.curve=Ee(r)),i?[r,i]:r},null,Ee),ze=(n._parseDots=o(function(e){for(var t=[],r=0,i=e.length;i>r;r++){var o={},a=e[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=n.getRGB(a[1]),o.color.error)return null;o.color=o.color.hex,a[2]&&(o.offset=a[2]+"%"),t.push(o)}for(r=1,i=t.length-1;i>r;r++)if(!t[r].offset){for(var s=J(t[r-1].offset||0),l=0,c=r+1;i>c;c++)if(t[c].offset){l=t[c].offset;break}l||(l=100,c=i),l=J(l);for(var u=(l-s)/(c-r+1);c>r;r++)s+=u,t[r].offset=s+"%"}return t}),n._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),Oe=(n._tofront=function(e,t){t.top!==e&&(ze(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},n._toback=function(e,t){t.bottom!==e&&(ze(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},n._insertafter=function(e,t,n){ze(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},n._insertbefore=function(e,t,n){ze(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},n.toMatrix=function(e,t){var n=Te(e),r={_:{transform:A},getBBox:function(){return n}};return Re(r,t),r.matrix}),Re=(n.transformPath=function(e,t){return ve(e,Oe(e,t))},n._extractTransform=function(e,t){if(null==t)return e._.transform;t=I(t).replace(/\.{3}|\u2026/g,e._.transform||A);var r=n.parseTransformString(t),i=0,o=0,a=0,s=1,l=1,c=e._,u=new p;if(c.transform=r||[],r)for(var d=0,h=r.length;h>d;d++){var f,g,m,v,b,y=r[d],x=y.length,_=I(y[0]).toLowerCase(),w=y[0]!=_,k=w?u.invert():0;"t"==_&&3==x?w?(f=k.x(0,0),g=k.y(0,0),m=k.x(y[1],y[2]),v=k.y(y[1],y[2]),u.translate(m-f,v-g)):u.translate(y[1],y[2]):"r"==_?2==x?(b=b||e.getBBox(1),u.rotate(y[1],b.x+b.width/2,b.y+b.height/2),i+=y[1]):4==x&&(w?(m=k.x(y[2],y[3]),v=k.y(y[2],y[3]),u.rotate(y[1],m,v)):u.rotate(y[1],y[2],y[3]),i+=y[1]):"s"==_?2==x||3==x?(b=b||e.getBBox(1),u.scale(y[1],y[x-1],b.x+b.width/2,b.y+b.height/2),s*=y[1],l*=y[x-1]):5==x&&(w?(m=k.x(y[3],y[4]),v=k.y(y[3],y[4]),u.scale(y[1],y[2],m,v)):u.scale(y[1],y[2],y[3],y[4]),s*=y[1],l*=y[2]):"m"==_&&7==x&&u.add(y[1],y[2],y[3],y[4],y[5],y[6]),c.dirtyT=1,e.matrix=u}e.matrix=u,c.sx=s,c.sy=l,c.deg=i,c.dx=o=u.e,c.dy=a=u.f,1==s&&1==l&&!i&&c.bbox?(c.bbox.x+=+o,c.bbox.y+=+a):c.dirtyT=1}),je=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},qe=n._equaliseTransform=function(e,t){t=I(t).replace(/\.{3}|\u2026/g,e),e=n.parseTransformString(e)||[],t=n.parseTransformString(t)||[];for(var r,i,o,a,s=j(e.length,t.length),l=[],c=[],u=0;s>u;u++){if(o=e[u]||je(t[u]),a=t[u]||je(o),o[0]!=a[0]||"r"==o[0].toLowerCase()&&(o[2]!=a[2]||o[3]!=a[3])||"s"==o[0].toLowerCase()&&(o[3]!=a[3]||o[4]!=a[4]))return;for(l[u]=[],c[u]=[],r=0,i=j(o.length,a.length);i>r;r++)r in o&&(l[u][r]=o[r]),r in a&&(c[u][r]=a[r])}return{from:l,to:c}};n._getContainer=function(e,t,r,i){var o;return o=null!=i||n.is(e,"object")?e:D.doc.getElementById(e),null!=o?o.tagName?null==t?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:t,height:r}:{container:1,x:e,y:t,width:r,height:i}:void 0},n.pathToRelative=Me,n._engine={},n.path2curve=Fe,n.matrix=function(e,t,n,r,i,o){return new p(e,t,n,r,i,o)},function(e){function t(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var n=R.sqrt(t(e));e[0]&&(e[0]/=n),e[1]&&(e[1]/=n)}e.add=function(e,t,n,r,i,o){var a,s,l,c,u=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,n,i],[t,r,o],[0,0,1]];for(e&&e instanceof p&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;3>a;a++)for(s=0;3>s;s++){for(c=0,l=0;3>l;l++)c+=d[a][l]*h[l][s];u[a][s]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new p(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,n,r){null==t&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},e.rotate=function(e,t,r){e=n.rad(e),t=t||0,r=r||0;var i=+R.cos(e).toFixed(9),o=+R.sin(e).toFixed(9);this.add(i,o,-o,i,t,r),this.add(1,0,0,1,-t,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[I.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return n.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];e.scalex=R.sqrt(t(i[0])),r(i[0]),e.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*e.shear,i[1][1]-i[0][1]*e.shear],e.scaley=R.sqrt(t(i[1])),r(i[1]),e.shear/=e.scaley;var o=-i[0][1],a=i[1][1];return 0>a?(e.rotate=n.deg(R.acos(a)),0>o&&(e.rotate=360-e.rotate)):e.rotate=n.deg(R.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[$]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:A)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:A)+(t.rotate?"r"+[t.rotate,0,0]:A)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);var Pe=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Pe&&Pe[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Pe&&Pe[1]<8?_.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:_.safari=he;for(var He=function(){this.returnValue=!1},We=function(){return this.originalEvent.preventDefault()},Ue=function(){this.cancelBubble=!0},Ve=function(){return this.originalEvent.stopPropagation()},Xe=function(e){var t=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,n=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft;return{x:e.clientX+n,y:e.clientY+t}},Ke=function(){return D.doc.addEventListener?function(e,t,n,r){var i=function(e){var t=Xe(e);return n.call(r,e,t.x,t.y)};if(e.addEventListener(t,i,!1),B&&z[t]){var o=function(t){for(var i=Xe(t),o=t,a=0,s=t.targetTouches&&t.targetTouches.length;s>a;a++)if(t.targetTouches[a].target==e){t=t.targetTouches[a],t.originalEvent=o,t.preventDefault=We,t.stopPropagation=Ve;break}return n.call(r,t,i.x,i.y)};e.addEventListener(z[t],o,!1)}return function(){return e.removeEventListener(t,i,!1),B&&z[t]&&e.removeEventListener(z[t],i,!1),!0}}:D.doc.attachEvent?function(e,t,n,r){var i=function(e){e=e||D.win.event;var t=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,i=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,o=e.clientX+i,a=e.clientY+t;return e.preventDefault=e.preventDefault||He,e.stopPropagation=e.stopPropagation||Ue,n.call(r,e,o,a)};e.attachEvent("on"+t,i);var o=function(){return e.detachEvent("on"+t,i),!0};return o}:void 0}(),Ge=[],Ye=function(e){for(var n,r=e.clientX,i=e.clientY,o=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,a=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,s=Ge.length;s--;){if(n=Ge[s],B&&e.touches){for(var l,c=e.touches.length;c--;)if(l=e.touches[c],l.identifier==n.el._drag.id){r=l.clientX,i=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var u,d=n.el.node,h=d.nextSibling,f=d.parentNode,p=d.style.display;D.win.opera&&f.removeChild(d),d.style.display="none",u=n.el.paper.getElementByPoint(r,i),d.style.display=p,D.win.opera&&(h?f.insertBefore(d,h):f.appendChild(d)),u&&t("raphael.drag.over."+n.el.id,n.el,u),r+=a,i+=o,t("raphael.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,e)}},Ze=function(e){n.unmousemove(Ye).unmouseup(Ze);for(var r,i=Ge.length;i--;)r=Ge[i],r.el._drag={},t("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,e);Ge=[]},Qe=n.el={},Je=F.length;Je--;)!function(e){n[e]=Qe[e]=function(t,r){return n.is(t,"function")&&(this.events=this.events||[],this.events.push({name:e,f:t,unbind:Ke(this.shape||this.node||D.doc,e,t,r||this)})),this},n["un"+e]=Qe["un"+e]=function(t){for(var r=this.events||[],i=r.length;i--;)r[i].name!=e||!n.is(t,"undefined")&&r[i].f!=t||(r[i].unbind(),r.splice(i,1),!r.length&&delete this.events);return this}}(F[Je]);Qe.data=function(e,r){var i=ue[this.id]=ue[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(n.is(e,"object")){for(var o in e)e[S](o)&&this.data(o,e[o]);return this}return t("raphael.data.get."+this.id,this,i[e],e),i[e]}return i[e]=r,t("raphael.data.set."+this.id,this,r,e),this},Qe.removeData=function(e){return null==e?ue[this.id]={}:ue[this.id]&&delete ue[this.id][e],this},Qe.getData=function(){return r(ue[this.id]||{})},Qe.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},Qe.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var et=[];Qe.drag=function(e,r,i,o,a,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,u=l.clientY,d=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,h=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft;if(this._drag.id=l.identifier,B&&l.touches)for(var f,p=l.touches.length;p--;)if(f=l.touches[p],this._drag.id=f.identifier,f.identifier==this._drag.id){c=f.clientX,u=f.clientY;break}this._drag.x=c+h,this._drag.y=u+d,!Ge.length&&n.mousemove(Ye).mouseup(Ze),Ge.push({el:this,move_scope:o,start_scope:a,end_scope:s}),r&&t.on("raphael.drag.start."+this.id,r),e&&t.on("raphael.drag.move."+this.id,e),i&&t.on("raphael.drag.end."+this.id,i),t("raphael.drag.start."+this.id,a||o||this,l.clientX+h,l.clientY+d,l)}return this._drag={},et.push({el:this,start:l}),this.mousedown(l),this},Qe.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},Qe.undrag=function(){for(var e=et.length;e--;)et[e].el==this&&(this.unmousedown(et[e].start),et.splice(e,1),t.unbind("raphael.drag.*."+this.id));!et.length&&n.unmousemove(Ye).unmouseup(Ze),Ge=[]},_.circle=function(e,t,r){var i=n._engine.circle(this,e||0,t||0,r||0);return this.__set__&&this.__set__.push(i),i},_.rect=function(e,t,r,i,o){var a=n._engine.rect(this,e||0,t||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},_.ellipse=function(e,t,r,i){var o=n._engine.ellipse(this,e||0,t||0,r||0,i||0);return this.__set__&&this.__set__.push(o),o},_.path=function(e){e&&!n.is(e,V)&&!n.is(e[0],X)&&(e+=A);var t=n._engine.path(n.format[M](n,arguments),this);return this.__set__&&this.__set__.push(t),t},_.image=function(e,t,r,i,o){var a=n._engine.image(this,e||"about:blank",t||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},_.text=function(e,t,r){var i=n._engine.text(this,e||0,t||0,I(r));return this.__set__&&this.__set__.push(i),i},_.set=function(e){!n.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var t=new ht(e);return this.__set__&&this.__set__.push(t),t.paper=this,t.type="set",t},_.setStart=function(e){this.__set__=e||this.set()},_.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},_.setSize=function(e,t){return n._engine.setSize.call(this,e,t)},_.setViewBox=function(e,t,r,i,o){return n._engine.setViewBox.call(this,e,t,r,i,o)},_.top=_.bottom=null,_.raphael=n;var tt=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,o=i.clientTop||r.clientTop||0,a=i.clientLeft||r.clientLeft||0,s=t.top+(D.win.pageYOffset||i.scrollTop||r.scrollTop)-o,l=t.left+(D.win.pageXOffset||i.scrollLeft||r.scrollLeft)-a;return{y:s,x:l}};_.getElementByPoint=function(e,t){var n=this,r=n.canvas,i=D.doc.elementFromPoint(e,t);if(D.win.opera&&"svg"==i.tagName){var o=tt(r),a=r.createSVGRect();a.x=e-o.x,a.y=t-o.y,a.width=a.height=1;var s=r.getIntersectionList(a,null);s.length&&(i=s[s.length-1])}if(!i)return null;for(;i.parentNode&&i!=r.parentNode&&!i.raphael;)i=i.parentNode;return i==n.canvas.parentNode&&(i=r),i=i&&i.raphael?n.getById(i.raphaelid):null},_.getElementsByBBox=function(e){var t=this.set();return this.forEach(function(r){n.isBBoxIntersect(r.getBBox(),e)&&t.push(r)}),t},_.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},_.forEach=function(e,t){for(var n=this.bottom;n;){if(e.call(t,n)===!1)return this;n=n.next}return this},_.getElementsByPoint=function(e,t){var n=this.set();return this.forEach(function(r){r.isPointInside(e,t)&&n.push(r)}),n},Qe.isPointInside=function(e,t){var r=this.realPath=me[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=n.transformPath(r,this.attr("transform"))),n.isPointInsidePath(r,e,t)},Qe.getBBox=function(e){if(this.removed)return{};var t=this._;return e?((t.dirty||!t.bboxwt)&&(this.realPath=me[this.type](this),t.bboxwt=Te(this.realPath),t.bboxwt.toString=g,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&((t.dirty||!this.realPath)&&(t.bboxwt=0,this.realPath=me[this.type](this)),t.bbox=Te(ve(this.realPath,this.matrix)),t.bbox.toString=g,t.dirty=t.dirtyT=0),t.bbox)},Qe.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Qe.glow=function(e){if("text"==this.type)return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),o=this.realPath||me[this.type](this);o=this.matrix?ve(o,this.matrix):o;for(var a=1;n+1>a;a++)i.push(r.path(o).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*a).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var nt=function(e,t,r,i,o,a,s,l,d){return null==d?c(e,t,r,i,o,a,s,l):n.findDotsAtSegment(e,t,r,i,o,a,s,l,u(e,t,r,i,o,a,s,l,d))},rt=function(e,t){return function(r,i,o){r=Fe(r);for(var a,s,l,c,u,d="",h={},f=0,p=0,g=r.length;g>p;p++){if(l=r[p],"M"==l[0])a=+l[1],s=+l[2];else{if(c=nt(a,s,l[1],l[2],l[3],l[4],l[5],l[6]),f+c>i){if(t&&!h.start){if(u=nt(a,s,l[1],l[2],l[3],l[4],l[5],l[6],i-f),d+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],o)return d;h.start=d,d=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),f+=c,a=+l[5],s=+l[6];continue}if(!e&&!t)return u=nt(a,s,l[1],l[2],l[3],l[4],l[5],l[6],i-f),{x:u.x,y:u.y,alpha:u.alpha}}f+=c,a=+l[5],s=+l[6]}d+=l.shift()+l}return h.end=d,u=e?f:t?h:n.findDotsAtSegment(a,s,l[0],l[1],l[2],l[3],l[4],l[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},it=rt(1),ot=rt(),at=rt(0,1);n.getTotalLength=it,n.getPointAtLength=ot,n.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return at(e,t).end;var r=at(e,n,1);return t?at(r,t).end:r},Qe.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():it(e)},Qe.getPointAtLength=function(e){var t=this.getPath();if(t)return ot(t,e)},Qe.getPath=function(){var e,t=n._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return t&&(e=t(this)),e},Qe.getSubpath=function(e,t){var r=this.getPath();if(r)return n.getSubpath(r,e,t)};var st=n.easing_formulas={linear:function(e){return e},"<":function(e){return H(e,1.7)},">":function(e){return H(e,.48)},"<>":function(e){var t=.48-e/1.04,n=R.sqrt(.1734+t*t),r=n-t,i=H(P(r),1/3)*(0>r?-1:1),o=-n-t,a=H(P(o),1/3)*(0>o?-1:1),s=i+a+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:H(2,-10*e)*R.sin((e-.075)*(2*W)/.3)+1},bounce:function(e){var t,n=7.5625,r=2.75;return 1/r>e?t=n*e*e:2/r>e?(e-=1.5/r,t=n*e*e+.75):2.5/r>e?(e-=2.25/r,t=n*e*e+.9375):(e-=2.625/r,t=n*e*e+.984375),t}};st.easeIn=st["ease-in"]=st["<"],st.easeOut=st["ease-out"]=st[">"],st.easeInOut=st["ease-in-out"]=st["<>"],st["back-in"]=st.backIn,st["back-out"]=st.backOut;var lt=[],ct=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},ut=function(){for(var e=+new Date,r=0;r<lt.length;r++){var i=lt[r];if(!i.el.removed&&!i.paused){var o,a,s=e-i.start,l=i.ms,c=i.easing,u=i.from,d=i.diff,h=i.to,f=(i.t,i.el),p={},g={};if(i.initstatus?(s=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*l,i.status=i.initstatus,delete i.initstatus,i.stop&&lt.splice(r--,1)):i.status=(i.prev+(i.percent-i.prev)*(s/l))/i.anim.top,!(0>s))if(l>s){var m=c(s/l);for(var v in u)if(u[S](v)){switch(re[v]){case U:o=+u[v]+m*l*d[v];break;case"colour":o="rgb("+[dt(Q(u[v].r+m*l*d[v].r)),dt(Q(u[v].g+m*l*d[v].g)),dt(Q(u[v].b+m*l*d[v].b))].join(",")+")";break;case"path":o=[];for(var y=0,x=u[v].length;x>y;y++){o[y]=[u[v][y][0]];for(var _=1,w=u[v][y].length;w>_;_++)o[y][_]=+u[v][y][_]+m*l*d[v][y][_];o[y]=o[y].join(N)}o=o.join(N);break;case"transform":if(d[v].real)for(o=[],y=0,x=u[v].length;x>y;y++)for(o[y]=[u[v][y][0]],_=1,w=u[v][y].length;w>_;_++)o[y][_]=u[v][y][_]+m*l*d[v][y][_];else{var k=function(e){return+u[v][e]+m*l*d[v][e]};o=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==v)for(o=[],y=4;y--;)o[y]=+u[v][y]+m*l*d[v][y];break;default:var C=[][L](u[v]);for(o=[],y=f.paper.customAttributes[v].length;y--;)o[y]=+C[y]+m*l*d[v][y]}p[v]=o}f.attr(p),function(e,n,r){setTimeout(function(){t("raphael.anim.frame."+e,n,r)})}(f.id,f,i.anim)}else{if(function(e,r,i){setTimeout(function(){t("raphael.anim.frame."+r.id,r,i),t("raphael.anim.finish."+r.id,r,i),n.is(e,"function")&&e.call(r)})}(i.callback,f,i.anim),f.attr(h),lt.splice(r--,1),i.repeat>1&&!i.next){for(a in h)h[S](a)&&(g[a]=i.totalOrigin[a]);i.el.attr(g),b(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&b(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}n.svg&&f&&f.paper&&f.paper.safari(),lt.length&&ct(ut)},dt=function(e){return e>255?255:0>e?0:e};Qe.animateWith=function(e,t,r,i,o,a){var s=this;if(s.removed)return a&&a.call(s),s;var l=r instanceof v?r:n.animation(r,i,o,a);b(l,s,l.percents[0],null,s.attr());for(var c=0,u=lt.length;u>c;c++)if(lt[c].anim==t&&lt[c].el==e){lt[u-1].start=lt[c].start;break}return s},Qe.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},v.prototype.delay=function(e){var t=new v(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},v.prototype.repeat=function(e){var t=new v(this.anim,this.ms);return t.del=this.del,t.times=R.floor(j(e,0))||1,t},n.animation=function(e,t,r,i){if(e instanceof v)return e;(n.is(r,"function")||!r)&&(i=i||r||null,r=null),e=Object(e),t=+t||0;var o,a,s={};for(a in e)e[S](a)&&J(a)!=a&&J(a)+"%"!=a&&(o=!0,s[a]=e[a]);return o?(r&&(s.easing=r),i&&(s.callback=i),new v({100:s},t)):new v(e,t)},Qe.animate=function(e,t,r,i){var o=this;if(o.removed)return i&&i.call(o),o;var a=e instanceof v?e:n.animation(e,t,r,i);return b(a,o,a.percents[0],null,o.attr()),o},Qe.setTime=function(e,t){return e&&null!=t&&this.status(e,q(t,e.ms)/e.ms),this},Qe.status=function(e,t){var n,r,i=[],o=0;if(null!=t)return b(e,this,-1,q(t,1)),this;for(n=lt.length;n>o;o++)if(r=lt[o],r.el.id==this.id&&(!e||r.anim==e)){if(e)return r.status;i.push({anim:r.anim,status:r.status})}return e?0:i},Qe.pause=function(e){for(var n=0;n<lt.length;n++)lt[n].el.id!=this.id||e&&lt[n].anim!=e||t("raphael.anim.pause."+this.id,this,lt[n].anim)!==!1&&(lt[n].paused=!0);return this},Qe.resume=function(e){for(var n=0;n<lt.length;n++)if(lt[n].el.id==this.id&&(!e||lt[n].anim==e)){var r=lt[n];t("raphael.anim.resume."+this.id,this,r.anim)!==!1&&(delete r.paused,this.status(r.anim,r.status))}return this},Qe.stop=function(e){for(var n=0;n<lt.length;n++)lt[n].el.id!=this.id||e&&lt[n].anim!=e||t("raphael.anim.stop."+this.id,this,lt[n].anim)!==!1&&lt.splice(n--,1);return this},t.on("raphael.remove",y),t.on("raphael.clear",y),Qe.toString=function(){return"Raphaël’s object"};var ht=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,n=e.length;n>t;t++)!e[t]||e[t].constructor!=Qe.constructor&&e[t].constructor!=ht||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},ft=ht.prototype;ft.push=function(){for(var e,t,n=0,r=arguments.length;r>n;n++)e=arguments[n],!e||e.constructor!=Qe.constructor&&e.constructor!=ht||(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},ft.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ft.forEach=function(e,t){for(var n=0,r=this.items.length;r>n;n++)if(e.call(t,this.items[n],n)===!1)return this;return this};for(var pt in Qe)Qe[S](pt)&&(ft[pt]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][M](n,t)})}}(pt));return ft.attr=function(e,t){if(e&&n.is(e,X)&&n.is(e[0],"object"))for(var r=0,i=e.length;i>r;r++)this.items[r].attr(e[r]);else for(var o=0,a=this.items.length;a>o;o++)this.items[o].attr(e,t);return this},ft.clear=function(){for(;this.length;)this.pop()},ft.splice=function(e,t,n){e=0>e?j(this.length+e,0):e,t=j(0,q(this.length-e,t));var r,i=[],o=[],a=[];for(r=2;r<arguments.length;r++)a.push(arguments[r]);for(r=0;t>r;r++)o.push(this[e+r]);for(;r<this.length-e;r++)i.push(this[e+r]);var s=a.length;for(r=0;r<s+i.length;r++)this.items[e+r]=this[e+r]=s>r?a[r]:i[r-s];
for(r=this.items.length=this.length-=t-s;this[r];)delete this[r++];return new ht(o)},ft.exclude=function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]==e)return this.splice(t,1),!0},ft.animate=function(e,t,r,i){(n.is(r,"function")||!r)&&(i=r||null);var o,a,s=this.items.length,l=s,c=this;if(!s)return this;i&&(a=function(){!--s&&i.call(c)}),r=n.is(r,V)?r:a;var u=n.animation(e,t,r,a);for(o=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,u,u),this.items[l]&&!this.items[l].removed||s--;return this},ft.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},ft.getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();e.push(o.x),t.push(o.y),n.push(o.x+o.width),r.push(o.y+o.height)}return e=q[M](0,e),t=q[M](0,t),n=j[M](0,n),r=j[M](0,r),{x:e,y:t,x2:n,y2:r,width:n-e,height:r-t}},ft.clone=function(e){e=this.paper.set();for(var t=0,n=this.items.length;n>t;t++)e.push(this.items[t].clone());return e},ft.toString=function(){return"Raphaël‘s set"},ft.glow=function(e){var t=this.paper.set();return this.forEach(function(n,r){var i=n.glow(e);null!=i&&i.forEach(function(e,n){t.push(e)})}),t},ft.isPointInside=function(e,t){var n=!1;return this.forEach(function(r){return r.isPointInside(e,t)?(console.log("runned"),n=!0,!1):void 0}),n},n.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[S](r)&&(t.face[r]=e.face[r]);if(this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t],!e.svg){t.face["units-per-em"]=ee(e.face["units-per-em"],10);for(var i in e.glyphs)if(e.glyphs[S](i)){var o=e.glyphs[i];if(t.glyphs[i]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},o.k)for(var a in o.k)o[S](a)&&(t.glyphs[i].k[a]=o.k[a])}}return e},_.getFont=function(e,t,r,i){if(i=i||"normal",r=r||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400,n.fonts){var o=n.fonts[e];if(!o){var a=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,A)+"(\\s|$)","i");for(var s in n.fonts)if(n.fonts[S](s)&&a.test(s)){o=n.fonts[s];break}}var l;if(o)for(var c=0,u=o.length;u>c&&(l=o[c],l.face["font-weight"]!=t||l.face["font-style"]!=r&&l.face["font-style"]||l.face["font-stretch"]!=i);c++);return l}},_.print=function(e,t,r,i,o,a,s,l){a=a||"middle",s=j(q(s||0,1),-1),l=j(q(l||1,3),1);var c,u=I(r)[$](A),d=0,h=0,f=A;if(n.is(i,"string")&&(i=this.getFont(i)),i){c=(o||16)/i.face["units-per-em"];for(var p=i.face.bbox[$](w),g=+p[0],m=p[3]-p[1],v=0,b=+p[1]+("baseline"==a?m+ +i.face.descent:m/2),y=0,x=u.length;x>y;y++){if("\n"==u[y])d=0,k=0,h=0,v+=m*l;else{var _=h&&i.glyphs[u[y-1]]||{},k=i.glyphs[u[y]];d+=h?(_.w||i.w)+(_.k&&_.k[u[y]]||0)+i.w*s:0,h=1}k&&k.d&&(f+=n.transformPath(k.d,["t",d*c,v*c,"s",c,c,g,b,"t",(e-g)/c,(t-b)/c]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},_.add=function(e){if(n.is(e,"array"))for(var t,r=this.set(),i=0,o=e.length;o>i;i++)t=e[i]||{},k[S](t.type)&&r.push(this[t.type]().attr(t));return r},n.format=function(e,t){var r=n.is(t,X)?[0][L](t):arguments;return e&&n.is(e,V)&&r.length-1&&(e=e.replace(C,function(e,t){return null==r[++t]?A:r[t]})),e||A},n.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,function(e,t,n,r,o){t=t||r,i&&(t in i&&(i=i[t]),"function"==typeof i&&o&&(i=i()))}),i=(null==i||i==r?e:i)+""};return function(t,r){return String(t).replace(e,function(e,t){return n(e,t,r)})}}(),n.ninja=function(){return T.was?D.win.Raphael=T.is:delete Raphael,n},n.st=ft,function(e,t,r){function i(){/in/.test(e.readyState)?setTimeout(i,9):n.eve("raphael.DOMload")}null==e.readyState&&e.addEventListener&&(e.addEventListener(t,r=function(){e.removeEventListener(t,r,!1),e.readyState="complete"},!1),e.readyState="loading"),i()}(document,"DOMContentLoaded"),t.on("raphael.DOMload",function(){x=!0}),function(){if(n.svg){var e="hasOwnProperty",t=String,r=parseFloat,i=parseInt,o=Math,a=o.max,s=o.abs,l=o.pow,c=/[, ]+/,u=n.eve,d="",h=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};n.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(r,i){if(i){"string"==typeof r&&(r=m(r));for(var o in i)i[e](o)&&("xlink:"==o.substring(0,6)?r.setAttributeNS(f,o.substring(6),t(i[o])):r.setAttribute(o,t(i[o])))}else r=n._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},v=function(e,i){var c="linear",u=e.id+i,h=.5,f=.5,p=e.node,g=e.paper,v=p.style,b=n._g.doc.getElementById(u);if(!b){if(i=t(i).replace(n._radial_gradient,function(e,t,n){if(c="radial",t&&n){h=r(t),f=r(n);var i=2*(f>.5)-1;l(h-.5,2)+l(f-.5,2)>.25&&(f=o.sqrt(.25-l(h-.5,2))*i+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*i)}return d}),i=i.split(/\s*\-\s*/),"linear"==c){var y=i.shift();if(y=-r(y),isNaN(y))return null;var x=[0,0,o.cos(n.rad(y)),o.sin(n.rad(y))],_=1/(a(s(x[2]),s(x[3]))||1);x[2]*=_,x[3]*=_,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var w=n._parseDots(i);if(!w)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&u!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){b=m(c+"Gradient",{id:u}),e.gradient=b,m(b,"radial"==c?{fx:h,fy:f}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(b);for(var k=0,C=w.length;C>k;k++)b.appendChild(m("stop",{offset:w[k].offset?w[k].offset:k?"100%":"0%","stop-color":w[k].color||"#fff"}))}}return m(p,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),v.fill=d,v.opacity=1,v.fillOpacity=1,1},b=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},y=function(r,i,o){if("path"==r.type){for(var a,s,l,c,u,h=t(i).toLowerCase().split("-"),f=r.paper,v=o?"end":"start",b=r.node,y=r.attrs,x=y["stroke-width"],_=h.length,w="classic",k=3,C=3,S=5;_--;)switch(h[_]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=h[_];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==w?(k+=2,C+=2,S+=2,l=1,c=o?4:1,u={fill:"none",stroke:y.stroke}):(c=l=k/2,u={fill:y.stroke,stroke:"none"}),r._.arrows?o?(r._.arrows.endPath&&g[r._.arrows.endPath]--,r._.arrows.endMarker&&g[r._.arrows.endMarker]--):(r._.arrows.startPath&&g[r._.arrows.startPath]--,r._.arrows.startMarker&&g[r._.arrows.startMarker]--):r._.arrows={},"none"!=w){var D="raphael-marker-"+w,T="raphael-marker-"+v+w+k+C;n._g.doc.getElementById(D)?g[D]++:(f.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:p[w],id:D})),g[D]=1);var E,M=n._g.doc.getElementById(T);M?(g[T]++,E=M.getElementsByTagName("use")[0]):(M=m(m("marker"),{id:T,markerHeight:C,markerWidth:k,orient:"auto",refX:c,refY:C/2}),E=m(m("use"),{"xlink:href":"#"+D,transform:(o?"rotate(180 "+k/2+" "+C/2+") ":d)+"scale("+k/S+","+C/S+")","stroke-width":(1/((k/S+C/S)/2)).toFixed(4)}),M.appendChild(E),f.defs.appendChild(M),g[T]=1),m(E,u);var L=l*("diamond"!=w&&"oval"!=w);o?(a=r._.arrows.startdx*x||0,s=n.getTotalLength(y.path)-L*x):(a=L*x,s=n.getTotalLength(y.path)-(r._.arrows.enddx*x||0)),u={},u["marker-"+v]="url(#"+T+")",(s||a)&&(u.d=n.getSubpath(y.path,a,s)),m(b,u),r._.arrows[v+"Path"]=D,r._.arrows[v+"Marker"]=T,r._.arrows[v+"dx"]=L,r._.arrows[v+"Type"]=w,r._.arrows[v+"String"]=i}else o?(a=r._.arrows.startdx*x||0,s=n.getTotalLength(y.path)-a):(a=0,s=n.getTotalLength(y.path)-(r._.arrows.enddx*x||0)),r._.arrows[v+"Path"]&&m(b,{d:n.getSubpath(y.path,a,s)}),delete r._.arrows[v+"Path"],delete r._.arrows[v+"Marker"],delete r._.arrows[v+"dx"],delete r._.arrows[v+"Type"],delete r._.arrows[v+"String"];for(u in g)if(g[e](u)&&!g[u]){var B=n._g.doc.getElementById(u);B&&B.parentNode.removeChild(B)}}},x={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},_=function(e,n,r){if(n=x[t(n).toLowerCase()]){for(var i=e.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,a=[],s=n.length;s--;)a[s]=n[s]*i+(s%2?1:-1)*o;m(e.node,{"stroke-dasharray":a.join(",")})}},w=function(r,o){var l=r.node,u=r.attrs,h=l.style.visibility;l.style.visibility="hidden";for(var p in o)if(o[e](p)){if(!n._availableAttrs[e](p))continue;var g=o[p];switch(u[p]=g,p){case"blur":r.blur(g);break;case"href":case"title":var x=m("title"),w=n._g.doc.createTextNode(g);x.appendChild(w),l.appendChild(x);break;case"target":var k=l.parentNode;if("a"!=k.tagName.toLowerCase()){var x=m("a");k.insertBefore(x,l),x.appendChild(l),k=x}"target"==p?k.setAttributeNS(f,"show","blank"==g?"new":g):k.setAttributeNS(f,p,g);break;case"cursor":l.style.cursor=g;break;case"transform":r.transform(g);break;case"arrow-start":y(r,g);break;case"arrow-end":y(r,g,1);break;case"clip-rect":var S=t(g).split(c);if(4==S.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var D=m("clipPath"),T=m("rect");D.id=n.createUUID(),m(T,{x:S[0],y:S[1],width:S[2],height:S[3]}),D.appendChild(T),r.paper.defs.appendChild(D),m(l,{"clip-path":"url(#"+D.id+")"}),r.clip=T}if(!g){var E=l.getAttribute("clip-path");if(E){var M=n._g.doc.getElementById(E.replace(/(^url\(#|\)$)/g,d));M&&M.parentNode.removeChild(M),m(l,{"clip-path":d}),delete r.clip}}break;case"path":"path"==r.type&&(m(l,{d:g?u.path=n._pathToAbsolute(g):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,g),r._.dirty=1,!u.fx)break;p="x",g=u.x;case"x":u.fx&&(g=-u.x-(u.width||0));case"rx":if("rx"==p&&"rect"==r.type)break;case"cx":l.setAttribute(p,g),r.pattern&&b(r),r._.dirty=1;break;case"height":if(l.setAttribute(p,g),r._.dirty=1,!u.fy)break;p="y",g=u.y;case"y":u.fy&&(g=-u.y-(u.height||0));case"ry":if("ry"==p&&"rect"==r.type)break;case"cy":l.setAttribute(p,g),r.pattern&&b(r),r._.dirty=1;break;case"r":"rect"==r.type?m(l,{rx:g,ry:g}):l.setAttribute(p,g),r._.dirty=1;break;case"src":"image"==r.type&&l.setAttributeNS(f,"href",g);break;case"stroke-width":(1!=r._.sx||1!=r._.sy)&&(g/=a(s(r._.sx),s(r._.sy))||1),r.paper._vbSize&&(g*=r.paper._vbSize),l.setAttribute(p,g),u["stroke-dasharray"]&&_(r,u["stroke-dasharray"],o),r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1));break;case"stroke-dasharray":_(r,g,o);break;case"fill":var L=t(g).match(n._ISURL);if(L){D=m("pattern");var B=m("image");D.id=n.createUUID(),m(D,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(B,{x:0,y:0,"xlink:href":L[1]}),D.appendChild(B),function(e){n._preload(L[1],function(){var t=this.offsetWidth,n=this.offsetHeight;m(e,{width:t,height:n}),m(B,{width:t,height:n}),r.paper.safari()})}(D),r.paper.defs.appendChild(D),m(l,{fill:"url(#"+D.id+")"}),r.pattern=D,r.pattern&&b(r);break}var A=n.getRGB(g);if(A.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=t(g).charAt())&&v(r,g)){if("opacity"in u||"fill-opacity"in u){var N=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d));if(N){var I=N.getElementsByTagName("stop");m(I[I.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=g,u.fill="none";break}}else delete o.gradient,delete u.gradient,!n.is(u.opacity,"undefined")&&n.is(o.opacity,"undefined")&&m(l,{opacity:u.opacity}),!n.is(u["fill-opacity"],"undefined")&&n.is(o["fill-opacity"],"undefined")&&m(l,{"fill-opacity":u["fill-opacity"]});A[e]("opacity")&&m(l,{"fill-opacity":A.opacity>1?A.opacity/100:A.opacity});case"stroke":A=n.getRGB(g),l.setAttribute(p,A.hex),"stroke"==p&&A[e]("opacity")&&m(l,{"stroke-opacity":A.opacity>1?A.opacity/100:A.opacity}),"stroke"==p&&r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=t(g).charAt())&&v(r,g);break;case"opacity":u.gradient&&!u[e]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(u.gradient){N=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d)),N&&(I=N.getElementsByTagName("stop"),m(I[I.length-1],{"stop-opacity":g}));break}default:"font-size"==p&&(g=i(g,10)+"px");var $=p.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});l.style[$]=g,r._.dirty=1,l.setAttribute(p,g)}}C(r,o),l.style.visibility=h},k=1.2,C=function(r,o){if("text"==r.type&&(o[e]("text")||o[e]("font")||o[e]("font-size")||o[e]("x")||o[e]("y"))){var a=r.attrs,s=r.node,l=s.firstChild?i(n._g.doc.defaultView.getComputedStyle(s.firstChild,d).getPropertyValue("font-size"),10):10;if(o[e]("text")){for(a.text=o.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,u=t(o.text).split("\n"),h=[],f=0,p=u.length;p>f;f++)c=m("tspan"),f&&m(c,{dy:l*k,x:a.x}),c.appendChild(n._g.doc.createTextNode(u[f])),s.appendChild(c),h[f]=c}else for(h=s.getElementsByTagName("tspan"),f=0,p=h.length;p>f;f++)f?m(h[f],{dy:l*k,x:a.x}):m(h[0],{dy:0});m(s,{x:a.x,y:a.y}),r._.dirty=1;var g=r._getBBox(),v=a.y-(g.y+g.height/2);v&&n.is(v,"finite")&&m(h[0],{dy:v})}},S=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=n._oid++,e.raphaelid=this.id,this.matrix=n.matrix(),this.realPath=null,this.paper=t,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},D=n.el;S.prototype=D,D.constructor=S,n._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var r=new S(n,t);return r.type="path",w(r,{fill:"none",stroke:"#000",path:e}),r},D.rotate=function(e,n,i){if(this.removed)return this;if(e=t(e).split(c),e.length-1&&(n=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(n=i),null==n||null==i){var o=this.getBBox(1);n=o.x+o.width/2,i=o.y+o.height/2}return this.transform(this._.transform.concat([["r",e,n,i]])),this},D.scale=function(e,n,i,o){if(this.removed)return this;if(e=t(e).split(c),e.length-1&&(n=r(e[1]),i=r(e[2]),o=r(e[3])),e=r(e[0]),null==n&&(n=e),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",e,n,i,o]])),this},D.translate=function(e,n){return this.removed?this:(e=t(e).split(c),e.length-1&&(n=r(e[1])),e=r(e[0])||0,n=+n||0,this.transform(this._.transform.concat([["t",e,n]])),this)},D.transform=function(t){var r=this._;if(null==t)return r.transform;if(n._extractTransform(this,t),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&b(this),this.node&&m(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var i=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},D.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},D.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},D.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),n._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null;this.removed=!0}},D._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(n){}finally{t=t||{}}return e&&this.hide(),t},D.attr=function(t,r){if(this.removed)return this;if(null==t){var i={};for(var o in this.attrs)this.attrs[e](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&n.is(t,"string")){if("fill"==t&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==t)return this._.transform;for(var a=t.split(c),s={},l=0,d=a.length;d>l;l++)t=a[l],t in this.attrs?s[t]=this.attrs[t]:n.is(this.paper.customAttributes[t],"function")?s[t]=this.paper.customAttributes[t].def:s[t]=n._availableAttrs[t];return d-1?s:s[a[0]]}if(null==r&&n.is(t,"array")){for(s={},l=0,d=t.length;d>l;l++)s[t[l]]=this.attr(t[l]);return s}if(null!=r){var h={};h[t]=r}else null!=t&&n.is(t,"object")&&(h=t);for(var f in h)u("raphael.attr."+f+"."+this.id,this,h[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&h[e](f)&&n.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(h[f]));this.attrs[f]=h[f];for(var g in p)p[e](g)&&(h[g]=p[g])}return w(this,h),this},D.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&n._tofront(this,e),this},D.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper);this.paper;return this},D.insertAfter=function(e){if(this.removed)return this;var t=e.node||e[e.length-1].node;return t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode.appendChild(this.node),n._insertafter(this,e,this.paper),this},D.insertBefore=function(e){if(this.removed)return this;var t=e.node||e[0].node;return t.parentNode.insertBefore(this.node,t),n._insertbefore(this,e,this.paper),this},D.blur=function(e){var t=this;if(0!==+e){var r=m("filter"),i=m("feGaussianBlur");t.attrs.blur=e,r.id=n.createUUID(),m(i,{stdDeviation:+e||1.5}),r.appendChild(i),t.paper.defs.appendChild(r),t._blur=r,m(t.node,{filter:"url(#"+r.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},n._engine.circle=function(e,t,n,r){var i=m("circle");e.canvas&&e.canvas.appendChild(i);var o=new S(i,e);return o.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},o.type="circle",m(i,o.attrs),o},n._engine.rect=function(e,t,n,r,i,o){var a=m("rect");e.canvas&&e.canvas.appendChild(a);var s=new S(a,e);return s.attrs={x:t,y:n,width:r,height:i,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",m(a,s.attrs),s},n._engine.ellipse=function(e,t,n,r,i){var o=m("ellipse");e.canvas&&e.canvas.appendChild(o);var a=new S(o,e);return a.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},a.type="ellipse",m(o,a.attrs),a},n._engine.image=function(e,t,n,r,i,o){var a=m("image");m(a,{x:n,y:r,width:i,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(f,"href",t),e.canvas&&e.canvas.appendChild(a);var s=new S(a,e);return s.attrs={x:n,y:r,width:i,height:o,src:t},s.type="image",s},n._engine.text=function(e,t,r,i){var o=m("text");e.canvas&&e.canvas.appendChild(o);var a=new S(o,e);return a.attrs={x:t,y:r,"text-anchor":"middle",text:i,font:n._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",w(a,a.attrs),a},n._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},n._engine.create=function(){var e=n._getContainer.apply(0,arguments),t=e&&e.container,r=e.x,i=e.y,o=e.width,a=e.height;if(!t)throw new Error("SVG container not found.");var s,l=m("svg"),c="overflow:hidden;";return r=r||0,i=i||0,o=o||512,a=a||342,m(l,{height:a,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==t?(l.style.cssText=c+"position:absolute;left:"+r+"px;top:"+i+"px",n._g.doc.body.appendChild(l),s=1):(l.style.cssText=c+"position:relative",t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l)),t=new n._Paper,t.width=o,t.height=a,t.canvas=l,t.clear(),t._left=t._top=0,s&&(t.renderfix=function(){}),t.renderfix(),t},n._engine.setViewBox=function(e,t,n,r,i){u("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var o,s,l=a(n/this.width,r/this.height),c=this.top,d=i?"meet":"xMinYMin";for(null==e?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+h+this.height):(this._vbSize=l,o=e+h+t+h+n+h+r),m(this.canvas,{viewBox:o,preserveAspectRatio:d});l&&c;)s="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":s}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[e,t,n,r,!!i],this},n.prototype.renderfix=function(){var e,t=this.canvas,n=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(r){e=t.createSVGMatrix()}var i=-e.e%1,o=-e.f%1;(i||o)&&(i&&(this._left=(this._left+i)%1,n.left=this._left+"px"),o&&(this._top=(this._top+o)%1,n.top=this._top+"px"))},n.prototype.clear=function(){n.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(n._g.doc.createTextNode("Created with Raphaël "+n.version)),e.appendChild(this.desc),e.appendChild(this.defs=m("defs"))},n.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?n._removedFactory(e):null};var T=n.st;for(var E in D)D[e](E)&&!T[e](E)&&(T[E]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(E))}}(),function(){if(n.vml){var e="hasOwnProperty",t=String,r=parseFloat,i=Math,o=i.round,a=i.max,s=i.min,l=i.abs,c="fill",u=/[, ]+/,d=n.eve,h=" progid:DXImageTransform.Microsoft",f=" ",p="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,b=/-?[^,\s-]+/g,y="position:absolute;left:0;top:0;width:1px;height:1px",x=21600,_={path:1,rect:1,image:1},w={circle:1,ellipse:1},k=function(e){var r=/[ahqstv]/gi,i=n._pathToAbsolute;if(t(e).match(r)&&(i=n._path2curve),r=/[clmz]/g,i==n._pathToAbsolute&&!t(e).match(r)){var a=t(e).replace(m,function(e,t,n){var r=[],i="m"==t.toLowerCase(),a=g[t];return n.replace(b,function(e){i&&2==r.length&&(a+=r+g["m"==t?"l":"L"],r=[]),r.push(o(e*x))}),a+r});return a}var s,l,c=i(e);a=[];for(var u=0,d=c.length;d>u;u++){s=c[u],l=c[u][0].toLowerCase(),"z"==l&&(l="x");for(var h=1,v=s.length;v>h;h++)l+=o(s[h]*x)+(h!=v-1?",":p);a.push(l)}return a.join(f)},C=function(e,t,r){var i=n.matrix();return i.rotate(-e,.5,.5),{dx:i.x(t,r),dy:i.y(t,r)}},S=function(e,t,n,r,i,o){var a=e._,s=e.matrix,u=a.fillpos,d=e.node,h=d.style,p=1,g="",m=x/t,v=x/n;if(h.visibility="hidden",t&&n){if(d.coordsize=l(m)+f+l(v),h.rotation=o*(0>t*n?-1:1),o){var b=C(o,r,i);r=b.dx,i=b.dy}if(0>t&&(g+="x"),0>n&&(g+=" y")&&(p=-1),h.flip=g,d.coordorigin=r*-m+f+i*-v,u||a.fillsize){var y=d.getElementsByTagName(c);y=y&&y[0],d.removeChild(y),u&&(b=C(o,s.x(u[0],u[1]),s.y(u[0],u[1])),y.position=b.dx*p+f+b.dy*p),a.fillsize&&(y.size=a.fillsize[0]*l(t)+f+a.fillsize[1]*l(n)),d.appendChild(y)}h.visibility="visible"}};n.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var D=function(e,n,r){for(var i=t(n).toLowerCase().split("-"),o=r?"end":"start",a=i.length,s="classic",l="medium",c="medium";a--;)switch(i[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=i[a];break;case"wide":case"narrow":c=i[a];break;case"long":case"short":l=i[a]}var u=e.node.getElementsByTagName("stroke")[0];u[o+"arrow"]=s,u[o+"arrowlength"]=l,u[o+"arrowwidth"]=c},T=function(i,l){i.attrs=i.attrs||{};var d=i.node,h=i.attrs,g=d.style,m=_[i.type]&&(l.x!=h.x||l.y!=h.y||l.width!=h.width||l.height!=h.height||l.cx!=h.cx||l.cy!=h.cy||l.rx!=h.rx||l.ry!=h.ry||l.r!=h.r),v=w[i.type]&&(h.cx!=l.cx||h.cy!=l.cy||h.r!=l.r||h.rx!=l.rx||h.ry!=l.ry),b=i;for(var y in l)l[e](y)&&(h[y]=l[y]);if(m&&(h.path=n._getPath[i.type](i),i._.dirty=1),l.href&&(d.href=l.href),l.title&&(d.title=l.title),l.target&&(d.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&i.blur(l.blur),(l.path&&"path"==i.type||m)&&(d.path=k(~t(h.path).toLowerCase().indexOf("r")?n._pathToAbsolute(h.path):h.path),"image"==i.type&&(i._.fillpos=[h.x,h.y],i._.fillsize=[h.width,h.height],S(i,1,1,0,0,0))),"transform"in l&&i.transform(l.transform),v){var C=+h.cx,T=+h.cy,M=+h.rx||+h.r||0,L=+h.ry||+h.r||0;d.path=n.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((C-M)*x),o((T-L)*x),o((C+M)*x),o((T+L)*x),o(C*x)),i._.dirty=1}if("clip-rect"in l){var A=t(l["clip-rect"]).split(u);if(4==A.length){A[2]=+A[2]+ +A[0],A[3]=+A[3]+ +A[1];var N=d.clipRect||n._g.doc.createElement("div"),I=N.style;I.clip=n.format("rect({1}px {2}px {3}px {0}px)",A),d.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=i.paper.width+"px",I.height=i.paper.height+"px",d.parentNode.insertBefore(N,d),N.appendChild(d),d.clipRect=N)}l["clip-rect"]||d.clipRect&&(d.clipRect.style.clip="auto")}if(i.textpath){var $=i.textpath.style;l.font&&($.font=l.font),l["font-family"]&&($.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&($.fontSize=l["font-size"]),l["font-weight"]&&($.fontWeight=l["font-weight"]),l["font-style"]&&($.fontStyle=l["font-style"])}if("arrow-start"in l&&D(b,l["arrow-start"]),"arrow-end"in l&&D(b,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var F=d.getElementsByTagName(c),z=!1;if(F=F&&F[0],!F&&(z=F=B(c)),"image"==i.type&&l.src&&(F.src=l.src),l.fill&&(F.on=!0),(null==F.on||"none"==l.fill||null===l.fill)&&(F.on=!1),F.on&&l.fill){var O=t(l.fill).match(n._ISURL);if(O){F.parentNode==d&&d.removeChild(F),F.rotate=!0,F.src=O[1],F.type="tile";var R=i.getBBox(1);F.position=R.x+f+R.y,i._.fillpos=[R.x,R.y],n._preload(O[1],function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]})}else F.color=n.getRGB(l.fill).hex,F.src=p,F.type="solid",n.getRGB(l.fill).error&&(b.type in{circle:1,ellipse:1}||"r"!=t(l.fill).charAt())&&E(b,l.fill,F)&&(h.fill="none",h.gradient=l.fill,F.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var j=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+n.getRGB(l.fill).o+1||2)-1);j=s(a(j,0),1),F.opacity=j,F.src&&(F.color="none")}d.appendChild(F);var q=d.getElementsByTagName("stroke")&&d.getElementsByTagName("stroke")[0],P=!1;!q&&(P=q=B("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(q.on=!0),("none"==l.stroke||null===l.stroke||null==q.on||0==l.stroke||0==l["stroke-width"])&&(q.on=!1);var H=n.getRGB(l.stroke);q.on&&l.stroke&&(q.color=H.hex),j=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+H.o+1||2)-1);var W=.75*(r(l["stroke-width"])||1);if(j=s(a(j,0),1),null==l["stroke-width"]&&(W=h["stroke-width"]),l["stroke-width"]&&(q.weight=W),W&&1>W&&(j*=W)&&(q.weight=1),q.opacity=j,l["stroke-linejoin"]&&(q.joinstyle=l["stroke-linejoin"]||"miter"),q.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(q.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var U={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};q.dashstyle=U[e](l["stroke-dasharray"])?U[l["stroke-dasharray"]]:p}P&&d.appendChild(q)}if("text"==b.type){b.paper.canvas.style.display=p;var V=b.paper.span,X=100,K=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);g=V.style,h.font&&(g.font=h.font),h["font-family"]&&(g.fontFamily=h["font-family"]),h["font-weight"]&&(g.fontWeight=h["font-weight"]),h["font-style"]&&(g.fontStyle=h["font-style"]),K=r(h["font-size"]||K&&K[0])||10,g.fontSize=K*X+"px",b.textpath.string&&(V.innerHTML=t(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=V.getBoundingClientRect();b.W=h.w=(G.right-G.left)/X,b.H=h.h=(G.bottom-G.top)/X,b.X=h.x,b.Y=h.y+b.H/2,("x"in l||"y"in l)&&(b.path.v=n.format("m{0},{1}l{2},{1}",o(h.x*x),o(h.y*x),o(h.x*x)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,Q=Y.length;Q>Z;Z++)if(Y[Z]in l){b._.dirty=1;break}switch(h["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},E=function(e,o,a){e.attrs=e.attrs||{};var s=(e.attrs,Math.pow),l="linear",c=".5 .5";if(e.attrs.gradient=o,o=t(o).replace(n._radial_gradient,function(e,t,n){return l="radial",t&&n&&(t=r(t),n=r(n),s(t-.5,2)+s(n-.5,2)>.25&&(n=i.sqrt(.25-s(t-.5,2))*(2*(n>.5)-1)+.5),c=t+f+n),p}),o=o.split(/\s*\-\s*/),"linear"==l){var u=o.shift();if(u=-r(u),isNaN(u))return null}var d=n._parseDots(o);if(!d)return null;if(e=e.shape||e.node,d.length){e.removeChild(a),a.on=!0,a.method="none",a.color=d[0].color,a.color2=d[d.length-1].color;for(var h=[],g=0,m=d.length;m>g;g++)d[g].offset&&h.push(d[g].offset+f+d[g].color);a.colors=h.length?h.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=c,a.angle=0):(a.type="gradient",a.angle=(270-u)%360),e.appendChild(a)}return 1},M=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=n._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=t,this.matrix=n.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},L=n.el;M.prototype=L,L.constructor=M,L.transform=function(e){if(null==e)return this._.transform;var r,i=this.paper._viewBoxShift,o=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:p;i&&(r=e=t(e).replace(/\.{3}|\u2026/g,this._.transform||p)),n._extractTransform(this,o+e);var a,s=this.matrix.clone(),l=this.skew,c=this.node,u=~t(this.attrs.fill).indexOf("-"),d=!t(this.attrs.fill).indexOf("url(");if(s.translate(1,1),d||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=s.split(),u&&a.noRotation||!a.isSimple){c.style.filter=s.toFilter();var h=this.getBBox(),g=this.getBBox(1),m=h.x-g.x,v=h.y-g.y;c.coordorigin=m*-x+f+v*-x,S(this,1,1,m,v,0)}else c.style.filter=p,S(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else c.style.filter=p,l.matrix=t(s),l.offset=s.offset();return r&&(this._.transform=r),this},L.rotate=function(e,n,i){if(this.removed)return this;if(null!=e){if(e=t(e).split(u),e.length-1&&(n=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(n=i),null==n||null==i){var o=this.getBBox(1);n=o.x+o.width/2,i=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,n,i]])),this}},L.translate=function(e,n){return this.removed?this:(e=t(e).split(u),e.length-1&&(n=r(e[1])),e=r(e[0])||0,n=+n||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=n),this.transform(this._.transform.concat([["t",e,n]])),this)},L.scale=function(e,n,i,o){if(this.removed)return this;if(e=t(e).split(u),e.length-1&&(n=r(e[1]),i=r(e[2]),o=r(e[3]),isNaN(i)&&(i=null),isNaN(o)&&(o=null)),e=r(e[0]),null==n&&(n=e),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",e,n,i,o]])),this._.dirtyT=1,this},L.hide=function(){return!this.removed&&(this.node.style.display="none"),this},L.show=function(){return!this.removed&&(this.node.style.display=p),
this},L._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},L.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),n.eve.unbind("raphael.*.*."+this.id),n._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?n._removedFactory(e):null;this.removed=!0}},L.attr=function(t,r){if(this.removed)return this;if(null==t){var i={};for(var o in this.attrs)this.attrs[e](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&n.is(t,"string")){if(t==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=t.split(u),s={},l=0,h=a.length;h>l;l++)t=a[l],t in this.attrs?s[t]=this.attrs[t]:n.is(this.paper.customAttributes[t],"function")?s[t]=this.paper.customAttributes[t].def:s[t]=n._availableAttrs[t];return h-1?s:s[a[0]]}if(this.attrs&&null==r&&n.is(t,"array")){for(s={},l=0,h=t.length;h>l;l++)s[t[l]]=this.attr(t[l]);return s}var f;null!=r&&(f={},f[t]=r),null==r&&n.is(t,"object")&&(f=t);for(var p in f)d("raphael.attr."+p+"."+this.id,this,f[p]);if(f){for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&f[e](p)&&n.is(this.paper.customAttributes[p],"function")){var g=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var m in g)g[e](m)&&(f[m]=g[m])}f.text&&"text"==this.type&&(this.textpath.string=f.text),T(this,f)}return this},L.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&n._tofront(this,this.paper),this},L.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper)),this)},L.insertAfter=function(e){return this.removed?this:(e.constructor==n.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),n._insertafter(this,e,this.paper),this)},L.insertBefore=function(e){return this.removed?this:(e.constructor==n.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),n._insertbefore(this,e,this.paper),this)},L.blur=function(e){var t=this.node.runtimeStyle,r=t.filter;return r=r.replace(v,p),0!==+e?(this.attrs.blur=e,t.filter=r+f+h+".Blur(pixelradius="+(+e||1.5)+")",t.margin=n.format("-{0}px 0 0 -{0}px",o(+e||1.5))):(t.filter=r,t.margin=0,delete this.attrs.blur),this},n._engine.path=function(e,t){var n=B("shape");n.style.cssText=y,n.coordsize=x+f+x,n.coordorigin=t.coordorigin;var r=new M(n,t),i={fill:"none",stroke:"#000"};e&&(i.path=e),r.type="path",r.path=[],r.Path=p,T(r,i),t.canvas.appendChild(n);var o=B("skew");return o.on=!0,n.appendChild(o),r.skew=o,r.transform(p),r},n._engine.rect=function(e,t,r,i,o,a){var s=n._rectPath(t,r,i,o,a),l=e.path(s),c=l.attrs;return l.X=c.x=t,l.Y=c.y=r,l.W=c.width=i,l.H=c.height=o,c.r=a,c.path=s,l.type="rect",l},n._engine.ellipse=function(e,t,n,r,i){var o=e.path();o.attrs;return o.X=t-r,o.Y=n-i,o.W=2*r,o.H=2*i,o.type="ellipse",T(o,{cx:t,cy:n,rx:r,ry:i}),o},n._engine.circle=function(e,t,n,r){var i=e.path();i.attrs;return i.X=t-r,i.Y=n-r,i.W=i.H=2*r,i.type="circle",T(i,{cx:t,cy:n,r:r}),i},n._engine.image=function(e,t,r,i,o,a){var s=n._rectPath(r,i,o,a),l=e.path(s).attr({stroke:"none"}),u=l.attrs,d=l.node,h=d.getElementsByTagName(c)[0];return u.src=t,l.X=u.x=r,l.Y=u.y=i,l.W=u.width=o,l.H=u.height=a,u.path=s,l.type="image",h.parentNode==d&&d.removeChild(h),h.rotate=!0,h.src=t,h.type="tile",l._.fillpos=[r,i],l._.fillsize=[o,a],d.appendChild(h),S(l,1,1,0,0,0),l},n._engine.text=function(e,r,i,a){var s=B("shape"),l=B("path"),c=B("textpath");r=r||0,i=i||0,a=a||"",l.v=n.format("m{0},{1}l{2},{1}",o(r*x),o(i*x),o(r*x)+1),l.textpathok=!0,c.string=t(a),c.on=!0,s.style.cssText=y,s.coordsize=x+f+x,s.coordorigin="0 0";var u=new M(s,e),d={fill:"#000",stroke:"none",font:n._availableAttrs.font,text:a};u.shape=s,u.path=l,u.textpath=c,u.type="text",u.attrs.text=t(a),u.attrs.x=r,u.attrs.y=i,u.attrs.w=1,u.attrs.h=1,T(u,d),s.appendChild(c),s.appendChild(l),e.canvas.appendChild(s);var h=B("skew");return h.on=!0,s.appendChild(h),u.skew=h,u.transform(p),u},n._engine.setSize=function(e,t){var r=this.canvas.style;return this.width=e,this.height=t,e==+e&&(e+="px"),t==+t&&(t+="px"),r.width=e,r.height=t,r.clip="rect(0 "+e+" "+t+" 0)",this._viewBox&&n._engine.setViewBox.apply(this,this._viewBox),this},n._engine.setViewBox=function(e,t,r,i,o){n.eve("raphael.setViewBox",this,this._viewBox,[e,t,r,i,o]);var s,l,c=this.width,u=this.height,d=1/a(r/c,i/u);return o&&(s=u/i,l=c/r,c>r*s&&(e-=(c-r*s)/2/s),u>i*l&&(t-=(u-i*l)/2/l)),this._viewBox=[e,t,r,i,!!o],this._viewBoxShift={dx:-e,dy:-t,scale:d},this.forEach(function(e){e.transform("...")}),this};var B;n._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),B=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(n){B=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},n._engine.initWin(n._g.win),n._engine.create=function(){var e=n._getContainer.apply(0,arguments),t=e.container,r=e.height,i=e.width,o=e.x,a=e.y;if(!t)throw new Error("VML container not found.");var s=new n._Paper,l=s.canvas=n._g.doc.createElement("div"),c=l.style;return o=o||0,a=a||0,i=i||512,r=r||342,s.width=i,s.height=r,i==+i&&(i+="px"),r==+r&&(r+="px"),s.coordsize=1e3*x+f+1e3*x,s.coordorigin="0 0",s.span=n._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),c.cssText=n.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==t?(n._g.doc.body.appendChild(l),c.left=o+"px",c.top=a+"px",c.position="absolute"):t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l),s.renderfix=function(){},s},n.prototype.clear=function(){n.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=n._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},n.prototype.remove=function(){n.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?n._removedFactory(e):null;return!0};var A=n.st;for(var N in L)L[e](N)&&!A[e](N)&&(A[N]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(N))}}(),T.was?D.win.Raphael=n:Raphael=n,n}),!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd&&define("flow_diagram",[],t)}(this,function(){function e(t,n){if(!t||"function"==typeof t)return n;var r={};for(var i in n)r[i]=n[i];for(i in t)t[i]&&(r[i]="object"==typeof r[i]?e(r[i],t[i]):t[i]);return r}function t(e,t){if("function"==typeof Object.create)e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});else{e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}function n(e,t,n){var r,i,o="M{0},{1}";for(r=2,i=2*n.length+2;i>r;r+=2)o+=" L{"+r+"},{"+(r+1)+"}";var a=[t.x,t.y];for(r=0,i=n.length;i>r;r++)a.push(n[r].x),a.push(n[r].y);var s=e.paper.path(o,a);s.attr("stroke",e.options["element-color"]),s.attr("stroke-width",e.options["line-width"]);var l=e.options.font,c=e.options["font-family"],u=e.options["font-weight"];return l&&s.attr({font:l}),c&&s.attr({"font-family":c}),u&&s.attr({"font-weight":u}),s}function r(e,t,n,r){var i,o;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]);var a="M{0},{1}";for(i=2,o=2*n.length+2;o>i;i+=2)a+=" L{"+i+"},{"+(i+1)+"}";var s=[t.x,t.y];for(i=0,o=n.length;o>i;i++)s.push(n[i].x),s.push(n[i].y);var l=e.paper.path(a,s);l.attr({stroke:e.options["line-color"],"stroke-width":e.options["line-width"],"arrow-end":e.options["arrow-end"]});var c=e.options.font,u=e.options["font-family"],d=e.options["font-weight"];if(c&&l.attr({font:c}),u&&l.attr({"font-family":u}),d&&l.attr({"font-weight":d}),r){var h=!1,f=e.paper.text(0,0,r),p=!1,g=n[0];t.y===g.y&&(p=!0);var m=0,v=0;h?(m=t.x>g.x?t.x-(t.x-g.x)/2:g.x-(g.x-t.x)/2,v=t.y>g.y?t.y-(t.y-g.y)/2:g.y-(g.y-t.y)/2,p?(m-=f.getBBox().width/2,v-=e.options["text-margin"]):(m+=e.options["text-margin"],v-=f.getBBox().height/2)):(m=t.x,v=t.y,p?(m+=e.options["text-margin"]/2,v-=e.options["text-margin"]):(m+=e.options["text-margin"]/2,v+=e.options["text-margin"])),f.attr({"text-anchor":"start","font-size":e.options["font-size"],fill:e.options["font-color"],x:m,y:v}),c&&f.attr({font:c}),u&&f.attr({"font-family":u}),d&&f.attr({"font-weight":d})}return l}function i(e,t,n,r,i,o,a,s){var l,c,u,d,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return l=(s-o)*(n-e)-(a-i)*(r-t),0===l?f:(c=t-o,u=e-i,d=(a-i)*c-(s-o)*u,h=(n-e)*c-(r-t)*u,c=d/l,u=h/l,f.x=e+c*(n-e),f.y=t+c*(r-t),c>0&&1>c&&(f.onLine1=!0),u>0&&1>u&&(f.onLine2=!0),f)}function o(e,t){t=t||{},this.paper=new Raphael(e),this.options=m.defaults(t,g),this.symbols=[],this.lines=[],this.start=null}function a(e,t,n){this.chart=e,this.group=this.chart.paper.set(),this.symbol=n,this.connectedTo=[],this.symbolType=t.symbolType,this.flowstate=t.flowstate||"future",this.next_direction=t.next&&t.direction_next?t.direction_next:void 0,this.text=this.chart.paper.text(0,0,t.text),t.key&&(this.text.node.id=t.key+"t"),this.text.node.setAttribute("class",this.getAttr("class")+"t"),this.text.attr({"text-anchor":"start",x:this.getAttr("text-margin"),fill:this.getAttr("font-color"),"font-size":this.getAttr("font-size")});var r=this.getAttr("font"),i=this.getAttr("font-family"),o=this.getAttr("font-weight");r&&this.text.attr({font:r}),i&&this.text.attr({"font-family":i}),o&&this.text.attr({"font-weight":o}),t.link&&this.text.attr("href",t.link),t.target&&this.text.attr("target",t.target);var a=this.getAttr("maxWidth");if(a){for(var s=t.text.split(" "),l="",c=0,u=s.length;u>c;c++){var d=s[c];this.text.attr("text",l+" "+d),l+=this.text.getBBox().width>a?"\n"+d:" "+d}this.text.attr("text",l.substring(1))}if(this.group.push(this.text),n){var h=this.getAttr("text-margin");n.attr({fill:this.getAttr("fill"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*h,height:this.text.getBBox().height+2*h}),n.node.setAttribute("class",this.getAttr("class")),t.link&&n.attr("href",t.link),t.target&&n.attr("target",t.target),t.key&&(n.node.id=t.key),this.group.push(n),n.insertBefore(this.text),this.text.attr({y:n.getBBox().height/2}),this.initialize()}}function s(e,t){var n=e.paper.rect(0,0,0,0,20);t=t||{},t.text=t.text||"Start",a.call(this,e,t,n)}function l(e,t){var n=e.paper.rect(0,0,0,0,20);t=t||{},t.text=t.text||"End",a.call(this,e,t,n)}function c(e,t){var n=e.paper.rect(0,0,0,0);t=t||{},a.call(this,e,t,n)}function u(e,t){var n=e.paper.rect(0,0,0,0);t=t||{},a.call(this,e,t,n),n.attr({width:this.text.getBBox().width+4*this.getAttr("text-margin")}),this.text.attr({x:2*this.getAttr("text-margin")});var r=e.paper.rect(0,0,0,0);r.attr({x:this.getAttr("text-margin"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*this.getAttr("text-margin"),height:this.text.getBBox().height+2*this.getAttr("text-margin"),fill:this.getAttr("fill")}),t.key&&(r.node.id=t.key+"i");var i=this.getAttr("font"),o=this.getAttr("font-family"),s=this.getAttr("font-weight");i&&r.attr({font:i}),o&&r.attr({"font-family":o}),s&&r.attr({"font-weight":s}),t.link&&r.attr("href",t.link),t.target&&r.attr("target",t.target),this.group.push(r),r.insertBefore(this.text),this.initialize()}function d(e,t){t=t||{},a.call(this,e,t),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var r=this.text.getBBox().width+4*this.textMargin,i=this.text.getBBox().height+2*this.textMargin,o=this.textMargin,s=i/2,l={x:o,y:s},c=[{x:o-this.textMargin,y:i},{x:o-this.textMargin+r,y:i},{x:o-this.textMargin+r+2*this.textMargin,y:0},{x:o-this.textMargin+2*this.textMargin,y:0},{x:o,y:s}],u=n(e,l,c);u.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),t.link&&u.attr("href",t.link),t.target&&u.attr("target",t.target),t.key&&(u.node.id=t.key),u.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:u.getBBox().height/2}),this.group.push(u),u.insertBefore(this.text),this.initialize()}function h(e,t){t=t||{},a.call(this,e,t),this.textMargin=this.getAttr("text-margin"),this.yes_direction="bottom",this.no_direction="right",t.yes&&t.direction_yes&&t.no&&!t.direction_no?"right"===t.direction_yes?(this.no_direction="bottom",this.yes_direction="right"):(this.no_direction="right",this.yes_direction="bottom"):t.yes&&!t.direction_yes&&t.no&&t.direction_no?"right"===t.direction_no?(this.yes_direction="bottom",this.no_direction="right"):(this.yes_direction="right",this.no_direction="bottom"):(this.yes_direction="bottom",this.no_direction="right"),this.yes_direction=this.yes_direction||"bottom",this.no_direction=this.no_direction||"right",this.text.attr({x:2*this.textMargin});var r=this.text.getBBox().width+3*this.textMargin;r+=r/2;var i=this.text.getBBox().height+2*this.textMargin;i+=i/2,i=Math.max(.5*r,i);var o=r/4,s=i/4;this.text.attr({x:o+this.textMargin/2});var l={x:o,y:s},c=[{x:o-r/4,y:s+i/4},{x:o-r/4+r/2,y:s+i/4+i/2},{x:o-r/4+r,y:s+i/4},{x:o-r/4+r/2,y:s+i/4-i/2},{x:o-r/4,y:s+i/4}],u=n(e,l,c);u.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),t.link&&u.attr("href",t.link),t.target&&u.attr("target",t.target),t.key&&(u.node.id=t.key),u.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:u.getBBox().height/2}),this.group.push(u),u.insertBefore(this.text),this.initialize()}function f(e){function t(e){var t=e.indexOf("(")+1,n=e.indexOf(")");return t>=0&&n>=0?r.symbols[e.substring(0,t-1)]:r.symbols[e]}function n(e){var t="next",n=e.indexOf("(")+1,r=e.indexOf(")");return n>=0&&r>=0&&(t=M.substring(n,r),t.indexOf(",")<0&&"yes"!==t&&"no"!==t&&(t="next, "+t)),t}e=e||"",e=e.trim();for(var r={symbols:{},start:null,drawSVG:function(e,t){function n(e){if(a[e.key])return a[e.key];switch(e.symbolType){case"start":a[e.key]=new s(i,e);break;case"end":a[e.key]=new l(i,e);break;case"operation":a[e.key]=new c(i,e);break;case"inputoutput":a[e.key]=new d(i,e);break;case"subroutine":a[e.key]=new u(i,e);break;case"condition":a[e.key]=new h(i,e);break;default:return new Error("Wrong symbol type!")}return a[e.key]}var r=this;this.diagram&&this.diagram.clean();var i=new o(e,t);this.diagram=i;var a={};!function f(e,t,o){var a=n(e);return r.start===e?i.startWith(a):t&&o&&!t.pathOk&&(t instanceof h?(o.yes===e&&t.yes(a),o.no===e&&t.no(a)):t.then(a)),a.pathOk?a:(a instanceof h?(e.yes&&f(e.yes,a,e),e.no&&f(e.no,a,e)):e.next&&f(e.next,a,e),a)}(this.start),i.render()},clean:function(){this.diagram.clean()}},i=[],a=0,f=1,p=e.length;p>f;f++)if("\n"===e[f]&&"\\"!==e[f-1]){var g=e.substring(a,f);a=f+1,i.push(g.replace(/\\\n/g,"\n"))}a<e.length&&i.push(e.substr(a));for(var m=1,v=i.length;v>m;){var b=i[m];b.indexOf(": ")<0&&b.indexOf("(")<0&&b.indexOf(")")<0&&b.indexOf("->")<0&&b.indexOf("=>")<0?(i[m-1]+="\n"+b,i.splice(m,1),v--):m++}for(;i.length>0;){var y=i.splice(0,1)[0];if(y.indexOf("=>")>=0){var x,_=y.split("=>"),w={key:_[0],symbolType:_[1],text:null,link:null,target:null,flowstate:null};if(w.symbolType.indexOf(": ")>=0&&(x=w.symbolType.split(": "),w.symbolType=x[0],w.text=x[1]),w.text&&w.text.indexOf(":>")>=0?(x=w.text.split(":>"),w.text=x[0],w.link=x[1]):w.symbolType.indexOf(":>")>=0&&(x=w.symbolType.split(":>"),w.symbolType=x[0],w.link=x[1]),w.symbolType.indexOf("\n")>=0&&(w.symbolType=w.symbolType.split("\n")[0]),w.link){var k=w.link.indexOf("[")+1,C=w.link.indexOf("]");k>=0&&C>=0&&(w.target=w.link.substring(k,C),w.link=w.link.substring(0,k-1))}if(w.text&&w.text.indexOf("|")>=0){var S=w.text.split("|");w.text=S[0],w.flowstate=S[1].trim()}r.symbols[w.key]=w}else if(y.indexOf("->")>=0)for(var D=y.split("->"),T=0,E=D.length;E>T;T++){var M=D[T],L=t(M),B=n(M),A=null;if(B.indexOf(",")>=0){var N=B.split(",");B=N[0],A=N[1].trim()}if(r.start||(r.start=L),E>T+1){var I=D[T+1];L[B]=t(I),L["direction_"+B]=A,A=null}}}return r}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:0!==r&&1/0!=r&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!==r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var i=r>=0?Math.min(r,n-1):n-Math.abs(r);i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var p={},g={x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block","class":"flowchart",symbols:{start:{},end:{},condition:{},inputoutput:{},operation:{},subroutine:{}}},m={defaults:e,inherits:t};return o.prototype.handle=function(e){this.symbols.indexOf(e)<=-1&&this.symbols.push(e);var t=this;return e instanceof h?(e.yes=function(n){return e.yes_symbol=n,e.no_symbol&&(e.pathOk=!0),t.handle(n)},e.no=function(n){return e.no_symbol=n,e.yes_symbol&&(e.pathOk=!0),t.handle(n)}):e.then=function(n){return e.next=n,e.pathOk=!0,t.handle(n)},e},o.prototype.startWith=function(e){return this.start=e,this.handle(e)},o.prototype.render=function(){var e,t=0,n=0,r=0,i=0,o=0,a=0;for(r=0,i=this.symbols.length;i>r;r++)e=this.symbols[r],e.width>t&&(t=e.width),e.height>n&&(n=e.height);for(r=0,i=this.symbols.length;i>r;r++)e=this.symbols[r],e.shiftX(this.options.x+(t-e.width)/2+this.options["line-width"]),e.shiftY(this.options.y+(n-e.height)/2+this.options["line-width"]);for(this.start.render(),r=0,i=this.symbols.length;i>r;r++)e=this.symbols[r],e.renderLines();for(o=this.maxXFromLine,r=0,i=this.symbols.length;i>r;r++){e=this.symbols[r];var s=e.getX()+e.width,l=e.getY()+e.height;s>o&&(o=s),l>a&&(a=l)}this.paper.setSize(o+this.options["line-width"],a+this.options["line-width"])},o.prototype.clean=function(){if(this.paper){var e=this.paper.canvas;e.parentNode.removeChild(e)}},a.prototype.getAttr=function(e){if(this.chart){var t,n=this.chart.options?this.chart.options[e]:void 0,r=this.chart.options.symbols?this.chart.options.symbols[this.symbolType][e]:void 0;return this.chart.options.flowstate&&this.chart.options.flowstate[this.flowstate]&&(t=this.chart.options.flowstate[this.flowstate][e]),t||r||n}},a.prototype.initialize=function(){this.group.transform("t"+this.getAttr("line-width")+","+this.getAttr("line-width")),this.width=this.group.getBBox().width,this.height=this.group.getBBox().height},a.prototype.getCenter=function(){return{x:this.getX()+this.width/2,y:this.getY()+this.height/2}},a.prototype.getX=function(){return this.group.getBBox().x},a.prototype.getY=function(){return this.group.getBBox().y},a.prototype.shiftX=function(e){this.group.transform("t"+(this.getX()+e)+","+this.getY())},a.prototype.setX=function(e){this.group.transform("t"+e+","+this.getY())},a.prototype.shiftY=function(e){this.group.transform("t"+this.getX()+","+(this.getY()+e))},a.prototype.setY=function(e){this.group.transform("t"+this.getX()+","+e)},a.prototype.getTop=function(){var e=this.getY(),t=this.getX()+this.width/2;return{x:t,y:e}},a.prototype.getBottom=function(){var e=this.getY()+this.height,t=this.getX()+this.width/2;return{x:t,y:e}},a.prototype.getLeft=function(){var e=this.getY()+this.group.getBBox().height/2,t=this.getX();return{x:t,y:e}},a.prototype.getRight=function(){var e=this.getY()+this.group.getBBox().height/2,t=this.getX()+this.group.getBBox().width;return{x:t,y:e}},a.prototype.render=function(){if(this.next){var e=this.getAttr("line-length");if("right"===this.next_direction){var t=this.getRight();if(this.next.getLeft(),!this.next.isPositioned){this.next.setY(t.y-this.next.height/2),this.next.shiftX(this.group.getBBox().x+this.width+e);var n=this;!function i(){for(var t,r=!1,o=0,a=n.chart.symbols.length;a>o;o++){t=n.chart.symbols[o];var s=Math.abs(t.getCenter().x-n.next.getCenter().x);if(t.getCenter().y>n.next.getCenter().y&&s<=n.next.width/2){r=!0;break}}r&&(n.next.setX(t.getX()+t.width+e),i())}(),this.next.isPositioned=!0,this.next.render()}}else{var r=this.getBottom();this.next.getTop(),this.next.isPositioned||(this.next.shiftY(this.getY()+this.height+e),this.next.setX(r.x-this.next.width/2),this.next.isPositioned=!0,this.next.render())}}},a.prototype.renderLines=function(){this.next&&(this.next_direction?this.drawLineTo(this.next,"",this.next_direction):this.drawLineTo(this.next))},a.prototype.drawLineTo=function(e,t,n){this.connectedTo.indexOf(e)<0&&this.connectedTo.push(e);var o,a=this.getCenter().x,s=this.getCenter().y,l=(this.getTop(),this.getRight()),c=this.getBottom(),u=this.getLeft(),d=e.getCenter().x,h=e.getCenter().y,f=e.getTop(),p=e.getRight(),g=(e.getBottom(),e.getLeft()),m=a===d,v=s===h,b=h>s,y=s>h,x=a>d,_=d>a,w=0,k=this.getAttr("line-length"),C=this.getAttr("line-width");if(n&&"bottom"!==n||!m||!b)if(n&&"right"!==n||!v||!_)if(n&&"left"!==n||!v||!x)if(n&&"right"!==n||!m||!y)if(n&&"right"!==n||!m||!b)if(n&&"bottom"!==n||!x)if(n&&"bottom"!==n||!_)if(n&&"right"===n&&x)o=r(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t),this.rightStart=!0,e.topEnd=!0,w=l.x+k/2;else if(n&&"right"===n&&_)o=r(this.chart,l,[{x:f.x,y:l.y},{x:f.x,y:f.y}],t),this.rightStart=!0,e.topEnd=!0,w=l.x+k/2;else if(n&&"bottom"===n&&m&&y)o=r(this.chart,c,[{x:c.x,y:c.y+k/2},{x:l.x+k/2,y:c.y+k/2},{x:l.x+k/2,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t),this.bottomStart=!0,e.topEnd=!0,w=c.x+k/2;else if("left"===n&&m&&y){var S=u.x-k/2;g.x<u.x&&(S=g.x-k/2),o=r(this.chart,u,[{x:S,y:u.y},{x:S,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t),this.leftStart=!0,e.topEnd=!0,w=u.x}else"left"===n&&(o=r(this.chart,u,[{x:f.x+(u.x-f.x)/2,y:u.y},{x:f.x+(u.x-f.x)/2,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t),this.leftStart=!0,e.topEnd=!0,w=u.x);else o=r(this.chart,c,[{x:c.x,y:c.y+k/2},{x:c.x+(c.x-f.x)/2,y:c.y+k/2},{x:c.x+(c.x-f.x)/2,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t),this.bottomStart=!0,e.topEnd=!0,w=c.x+(c.x-f.x)/2;else o=this.leftEnd&&y?r(this.chart,c,[{x:c.x,y:c.y+k/2},{x:c.x+(c.x-f.x)/2,y:c.y+k/2},{x:c.x+(c.x-f.x)/2,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t):r(this.chart,c,[{x:c.x,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t),this.bottomStart=!0,e.topEnd=!0,w=c.x+(c.x-f.x)/2;else o=r(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t),this.rightStart=!0,e.topEnd=!0,w=l.x+k/2;else o=r(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:f.y-k/2},{x:f.x,y:f.y-k/2},{x:f.x,y:f.y}],t),this.rightStart=!0,e.topEnd=!0,w=l.x+k/2;else o=r(this.chart,u,p,t),this.leftStart=!0,e.rightEnd=!0,w=p.x;else o=r(this.chart,l,g,t),this.rightStart=!0,e.leftEnd=!0,w=g.x;else o=r(this.chart,c,f,t),this.bottomStart=!0,e.topEnd=!0,w=c.x;if(o){for(var D=0,T=this.chart.lines.length;T>D;D++)for(var E,M=this.chart.lines[D],L=M.attr("path"),B=o.attr("path"),A=0,N=L.length-1;N>A;A++){var I=[];I.push(["M",L[A][1],L[A][2]]),I.push(["L",L[A+1][1],L[A+1][2]]);for(var $=I[0][1],F=I[0][2],z=I[1][1],O=I[1][2],R=0,j=B.length-1;j>R;R++){var q=[];q.push(["M",B[R][1],B[R][2]]),q.push(["L",B[R+1][1],B[R+1][2]]);var P=q[0][1],H=q[0][2],W=q[1][1],U=q[1][2],V=i($,F,z,O,P,H,W,U);if(V.onLine1&&V.onLine2){var X;H===U?P>W?(X=["L",V.x+2*C,H],B.splice(R+1,0,X),X=["C",V.x+2*C,H,V.x,H-4*C,V.x-2*C,H],B.splice(R+2,0,X),o.attr("path",B)):(X=["L",V.x-2*C,H],B.splice(R+1,0,X),X=["C",V.x-2*C,H,V.x,H-4*C,V.x+2*C,H],B.splice(R+2,0,X),o.attr("path",B)):H>U?(X=["L",P,V.y+2*C],B.splice(R+1,0,X),X=["C",P,V.y+2*C,P+4*C,V.y,P,V.y-2*C],B.splice(R+2,0,X),o.attr("path",B)):(X=["L",P,V.y-2*C],B.splice(R+1,0,X),X=["C",P,V.y-2*C,P+4*C,V.y,P,V.y+2*C],B.splice(R+2,0,X),o.attr("path",B)),R+=2,E+=2}}}this.chart.lines.push(o)}(!this.chart.maxXFromLine||this.chart.maxXFromLine&&w>this.chart.maxXFromLine)&&(this.chart.maxXFromLine=w)},m.inherits(s,a),m.inherits(l,a),m.inherits(c,a),m.inherits(u,a),m.inherits(d,a),d.prototype.getLeft=function(){var e=this.getY()+this.group.getBBox().height/2,t=this.getX()+this.textMargin;return{x:t,y:e}},d.prototype.getRight=function(){var e=this.getY()+this.group.getBBox().height/2,t=this.getX()+this.group.getBBox().width-this.textMargin;return{x:t,y:e}},m.inherits(h,a),h.prototype.render=function(){this.yes_direction&&(this[this.yes_direction+"_symbol"]=this.yes_symbol),this.no_direction&&(this[this.no_direction+"_symbol"]=this.no_symbol);var e=this.getAttr("line-length");if(this.bottom_symbol){var t=this.getBottom();this.bottom_symbol.getTop(),this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+e),this.bottom_symbol.setX(t.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=!0,this.bottom_symbol.render())}if(this.right_symbol){var n=this.getRight();if(this.right_symbol.getLeft(),!this.right_symbol.isPositioned){this.right_symbol.setY(n.y-this.right_symbol.height/2),this.right_symbol.shiftX(this.group.getBBox().x+this.width+e);var r=this;!function i(){for(var t,n=!1,o=0,a=r.chart.symbols.length;a>o;o++){t=r.chart.symbols[o];var s=Math.abs(t.getCenter().x-r.right_symbol.getCenter().x);if(t.getCenter().y>r.right_symbol.getCenter().y&&s<=r.right_symbol.width/2){n=!0;break}}n&&(r.right_symbol.setX(t.getX()+t.width+e),i())}(),this.right_symbol.isPositioned=!0,this.right_symbol.render()}}},h.prototype.renderLines=function(){this.yes_symbol&&this.drawLineTo(this.yes_symbol,this.getAttr("yes-text"),this.yes_direction),this.no_symbol&&this.drawLineTo(this.no_symbol,this.getAttr("no-text"),this.no_direction)},p.parse=f,p}),define("flowChart",["jquery","Raphael","flow_diagram"],function(e,t,n){return function(e,t){var r;r=n.parse(e),r.drawSVG(t)}}),define("sequenceChart",[],function(){"use strict";return function(e){require(["jquery","Raphael","underscore","sequence_diagram"],function(t,n,r,i){e.sequenceDiagram({theme:"simple"})})}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("Clipboard",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){var r=e("matches-selector");t.exports=function(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(r(i,t))return i;i=i.parentNode}}},{"matches-selector":5}],2:[function(e,t,n){function r(e,t,n,r,o){var a=i.apply(this,arguments);return e.addEventListener(n,a,o),{destroy:function(){e.removeEventListener(n,a,o)}}}function i(e,t,n,r){return function(n){n.delegateTarget=o(n.target,t,!0),n.delegateTarget&&r.call(e,n)}}var o=e("closest");t.exports=r},{closest:1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return i(e,t,n);if(s.nodeList(e))return o(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function o(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var s=e("./is"),l=e("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(e,t,n){function r(e,t){if(o)return o.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0;r<n.length;++r)if(n[r]==e)return!0;return!1}var i=Element.prototype,o=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;t.exports=r},{}],6:[function(e,t,n){function r(e){var t;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}t.exports=r},{}],7:[function(e,t,n){function r(){}r.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;i>r;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;a>o;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},t.exports=r},{}],8:[function(t,n,r){!function(i,o){if("function"==typeof e&&e.amd)e(["module","select"],o);else if("undefined"!=typeof r)o(n,t("select"));else{var a={exports:{}};o(a,i.select),i.clipboardAction=a.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(t),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){r(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},e.prototype.selectFake=function(){
var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i["default"])(this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=(0,i["default"])(this.target),this.copyText()},e.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},a(e,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"==typeof e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},{select:6}],9:[function(t,n,r){!function(i,o){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],o);else if("undefined"!=typeof r)o(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var a={exports:{}};o(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var c=i(t),u=i(n),d=i(r),h=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this));return i.resolveOptions(r),i.listenClick(n),i}return s(t,e),t.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function(e){var t=this;this.listener=(0,d["default"])(e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c["default"]({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function(e){return l("action",e)},t.prototype.defaultTarget=function(e){var t=l("target",e);return t?document.querySelector(t):void 0},t.prototype.defaultText=function(e){return l("text",e)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(u["default"]);e.exports=h})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)}),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define("codemirror/lib/codemirror",[],e);this.CodeMirror=e()}}(function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r||{},oi(yo,r,!1),p(r);var i=r.value;"string"==typeof i&&(i=new Ho(i,r.mode)),this.doc=i;var o=this.display=new t(n,i);o.wrapper.CodeMirror=this,u(this),l(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!Zi&&pt(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Qr},ji&&11>qi&&setTimeout(ai(ft,this,!0),20),vt(this),xi();var a=this;Ze(this,function(){a.curOp.forceUpdate=!0,yr(a,i),r.autofocus&&!Zi||pi()==o.input?setTimeout(ai(jt,a),20):qt(a);for(var e in xo)xo.hasOwnProperty(e)&&xo[e](a,r[e],_o);for(var t=0;t<So.length;++t)So[t](a)})}function t(e,t){var n=this,r=n.input=ui("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Pi?r.style.width="1000px":r.setAttribute("wrap","off"),Yi&&(r.style.border="1px solid black"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false"),n.inputDiv=ui("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=ui("div",[ui("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=ui("div",[ui("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=ui("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=ui("div",null,"CodeMirror-gutter-filler"),n.lineDiv=ui("div",null,"CodeMirror-code"),n.selectionDiv=ui("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=ui("div",null,"CodeMirror-cursors"),n.measure=ui("div",null,"CodeMirror-measure"),n.lineMeasure=ui("div",null,"CodeMirror-measure"),n.lineSpace=ui("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=ui("div",[ui("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=ui("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=ui("div",null,null,"position: absolute; height: "+ea+"px; width: 1px;"),n.gutters=ui("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=ui("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=ui("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),ji&&8>qi&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),Yi&&(r.style.width="0px"),Pi||(n.scroller.draggable=!0),Xi&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),ji&&8>qi&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),n.viewFrom=n.viewTo=t.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Qr,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,ye(e,100),e.state.modeGen++,e.curOp&&rt(e)}function i(e){e.options.lineWrapping?(vi(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(mi(e.display.wrapper,"CodeMirror-wrap"),f(e)),a(e),rt(e),Fe(e),setTimeout(function(){v(e)},100)}function o(e){var t=Xe(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Ke(e.display)-3);return function(i){if(Vn(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function a(e){var t=e.doc,n=o(e);t.iter(function(e){var t=n(e);t!=e.height&&kr(e,t)})}function s(e){var t=Lo[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Fe(e)}function c(e){u(e),rt(e),setTimeout(function(){y(e)},20)}function u(e){var t=e.display.gutters,n=e.options.gutters;di(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(ui("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",d(e)}function d(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function h(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Rn(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=jn(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,r=i.to.line,n+=r.text.length-i.to.ch}return n}function f(e){var t=e.display,n=e.doc;t.maxLine=xr(n,n.first),t.maxLineLength=h(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=h(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function p(e){var t=ni(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function g(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<ea-3}function m(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:g(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Ce(e.display))}}function v(e,t){t||(t=m(e));var n=e.display,r=wi(n.measure),i=t.docHeight+ea,o=t.scrollWidth>t.clientWidth;o&&t.scrollWidth<=t.clientWidth+1&&r>0&&!t.hScrollbarTakesSpace&&(o=!1);var a=i>t.clientHeight;if(a?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=o?r+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),o?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=a?r+"px":"0",n.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),o&&a?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=r+"px"):n.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===r){var s=Qi&&!Ki?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=s;var l=function(t){Wr(t)!=n.scrollbarV&&Wr(t)!=n.scrollbarH&&Qe(e,_t)(t)};Yo(n.scrollbarV,"mousedown",l),Yo(n.scrollbarH,"mousedown",l)}e.state.checkedOverlayScrollbar=!0}}function b(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-ke(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=Sr(t,r),a=Sr(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;if(o>s)return{from:s,to:Sr(t,Dr(xr(t,s))+e.wrapper.clientHeight)};if(Math.min(l,t.lastLine())>=a)return{from:Sr(t,Dr(xr(t,l))-e.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(a,o+1)}}function y(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=w(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=o);var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function x(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=_(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ui("div",[ui("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a),r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",d(e),!0}return!1}function _(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function w(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function k(e,t,n){for(var r,i=e.display.viewFrom,o=e.display.viewTo,a=b(e.display,e.doc,t),s=!0;;s=!1){var l=e.display.scroller.clientWidth;if(!C(e,a,n))break;r=!0,e.display.maxLineChanged&&!e.options.lineWrapping&&S(e);var c=m(e);if(ge(e),D(e,c),v(e,c),Pi&&e.options.lineWrapping&&T(e,c),Pi&&c.scrollWidth>c.clientWidth&&c.scrollWidth<c.clientWidth+1&&!g(e)&&v(e),s&&e.options.lineWrapping&&l!=e.display.scroller.clientWidth)n=!0;else if(n=!1,t&&null!=t.top&&(t={top:Math.min(c.docHeight-ea-c.clientHeight,t.top)}),a=b(e.display,e.doc,t),a.from>=e.display.viewFrom&&a.to<=e.display.viewTo)break}return e.display.updateLineNumbers=null,r&&(Vr(e,"update",e),(e.display.viewFrom!=i||e.display.viewTo!=o)&&Vr(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)),r}function C(e,t,n){var r=e.display,i=e.doc;if(!r.wrapper.offsetWidth)return void ot(e);if(!(!n&&t.from>=r.viewFrom&&t.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&0==ct(e))){x(e)&&ot(e);var o=L(e),a=i.first+i.size,s=Math.max(t.from-e.options.viewportMargin,i.first),l=Math.min(a,t.to+e.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(i.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(a,r.viewTo)),io&&(s=Wn(e.doc,s),l=Un(e.doc,l));var c=s!=r.viewFrom||l!=r.viewTo||r.lastSizeC!=r.wrapper.clientHeight;lt(e,s,l),r.viewOffset=Dr(xr(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var u=ct(e);if(c||0!=u||n){var d=pi();return u>4&&(r.lineDiv.style.display="none"),B(e,r.updateLineNumbers,o),u>4&&(r.lineDiv.style.display=""),d&&pi()!=d&&d.offsetHeight&&d.focus(),di(r.cursorDiv),di(r.selectionDiv),c&&(r.lastSizeC=r.wrapper.clientHeight,ye(e,400)),E(e),!0}}}function S(e){var t=e.display,n=Me(e,t.maxLine,t.maxLine.text.length).left;t.maxLineChanged=!1;var r=Math.max(0,n+3),i=Math.max(0,t.sizer.offsetLeft+r+ea-t.scroller.clientWidth);t.sizer.style.minWidth=r+"px",i<e.doc.scrollLeft&&Lt(e,Math.min(t.scroller.scrollLeft,i),!0)}function D(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-ea)+"px"}function T(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function E(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,o=t.view[r];if(!o.hidden){if(ji&&8>qi){var a=o.node.offsetTop+o.node.offsetHeight;i=a-n,n=a}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var l=o.line.height-i;if(2>i&&(i=Xe(t)),(l>.001||-.001>l)&&(kr(o.line,i),M(o.line),o.rest))for(var c=0;c<o.rest.length;c++)M(o.rest[c])}}}function M(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function L(e){for(var t=e.display,n={},r={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)n[e.options.gutters[o]]=i.offsetLeft,r[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:w(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function B(e,t,n){function r(t){var n=t.nextSibling;return Pi&&Qi&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild,l=i.view,c=i.viewFrom,u=0;u<l.length;u++){var d=l[u];if(d.hidden);else if(d.node){for(;s!=d.node;)s=r(s);var h=o&&null!=t&&c>=t&&d.lineNumber;d.changes&&(ni(d.changes,"gutter")>-1&&(h=!1),A(e,d,c,n)),h&&(di(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(_(e.options,c)))),s=d.node.nextSibling}else{var f=j(e,d,c,n);a.insertBefore(f,s)}c+=d.size}for(;s;)s=r(s)}function A(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?F(e,t):"gutter"==o?O(e,t,n,r):"class"==o?z(t):"widget"==o&&R(t,r)}t.changes=null}function N(e){return e.node==e.text&&(e.node=ui("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),ji&&8>qi&&(e.node.style.zIndex=2)),e.node}function I(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=N(e);e.background=n.insertBefore(ui("div",null,t),n.firstChild)}}function $(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):sr(e,t)}function F(e,t){var n=t.text.className,r=$(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,z(t)):n&&(t.text.className=n)}function z(e){I(e),e.line.wrapClass?N(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function O(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=N(t),a=t.gutter=o.insertBefore(ui("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),t.text);if(!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(ui("div",_(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],c=i.hasOwnProperty(l)&&i[l];c&&a.appendChild(ui("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function R(e,t){e.alignable&&(e.alignable=null);for(var n,r=e.node.firstChild;r;r=n){var n=r.nextSibling;"CodeMirror-linewidget"==r.className&&e.node.removeChild(r)}q(e,t)}function j(e,t,n,r){var i=$(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),z(t),O(e,t,n,r),q(t,r),t.node}function q(e,t){if(P(e.line,e,t,!0),e.rest)for(var n=0;n<e.rest.length;n++)P(e.rest[n],e,t,!1)}function P(e,t,n,r){if(e.widgets)for(var i=N(t),o=0,a=e.widgets;o<a.length;++o){var s=a[o],l=ui("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(l.ignoreEvents=!0),H(s,l,t,n),r&&s.above?i.insertBefore(l,t.gutter||t.text):i.appendChild(l),Vr(s,"redraw")}}function H(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function W(e){return oo(e.line,e.ch)}function U(e,t){return ao(e,t)<0?t:e}function V(e,t){return ao(e,t)<0?e:t}function X(e,t){this.ranges=e,this.primIndex=t}function K(e,t){this.anchor=e,this.head=t}function G(e,t){var n=e[t];e.sort(function(e,t){return ao(e.from(),t.from())}),t=ni(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(ao(o.to(),i.from())>=0){var a=V(o.from(),i.from()),s=U(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;t>=r&&--t,e.splice(--r,2,new K(l?s:a,l?a:s))}}return new X(e,t)}function Y(e,t){return new X([new K(e,t||e)],0)}function Z(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Q(e,t){if(t.line<e.first)return oo(e.first,0);var n=e.first+e.size-1;return t.line>n?oo(n,xr(e,n).text.length):J(t,xr(e,t.line).text.length)}function J(e,t){var n=e.ch;return null==n||n>t?oo(e.line,t):0>n?oo(e.line,0):e}function ee(e,t){return t>=e.first&&t<e.first+e.size}function te(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Q(e,t[r]);return n}function ne(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var o=ao(n,i)<0;o!=ao(r,i)<0?(i=n,n=r):o!=ao(n,r)<0&&(n=r)}return new K(i,n)}return new K(r||n,n)}function re(e,t,n,r){ce(e,new X([ne(e,e.sel.primary(),t,n)],0),r)}function ie(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=ne(e,e.sel.ranges[i],t[i],null);var o=G(r,e.sel.primIndex);ce(e,o,n)}function oe(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,ce(e,G(i,e.sel.primIndex),r)}function ae(e,t,n,r){ce(e,Y(t,n),r)}function se(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new K(Q(e,t[n].anchor),Q(e,t[n].head))}};return Qo(e,"beforeSelectionChange",e,n),e.cm&&Qo(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?G(n.ranges,n.ranges.length-1):t}function le(e,t,n){var r=e.history.done,i=ti(r);i&&i.ranges?(r[r.length-1]=t,ue(e,t,n)):ce(e,t,n)}function ce(e,t,n){ue(e,t,n),Ir(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function ue(e,t,n){(Yr(e,"beforeSelectionChange")||e.cm&&Yr(e.cm,"beforeSelectionChange"))&&(t=se(e,t));var r=n&&n.bias||(ao(t.primary().head,e.sel.primary().head)<0?-1:1);de(e,fe(e,t,r,!0)),n&&n.scroll===!1||!e.cm||ln(e.cm)}function de(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Gr(e.cm)),Vr(e,"cursorActivity",e))}function he(e){de(e,fe(e,e.sel,null,!1),na)}function fe(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=pe(e,a.anchor,n,r),l=pe(e,a.head,n,r);(i||s!=a.anchor||l!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new K(s,l))}return i?G(i,t.primIndex):t}function pe(e,t,n,r){var i=!1,o=t,a=n||1;e.cantEdit=!1;e:for(;;){var s=xr(e,o.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var c=s.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(r&&(Qo(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!u.atomic)continue;var d=u.find(0>a?-1:1);if(0==ao(d,o)&&(d.ch+=a,d.ch<0?d=d.line>e.first?Q(e,oo(d.line-1)):null:d.ch>s.text.length&&(d=d.line<e.first+e.size-1?oo(d.line+1,0):null),!d)){if(i)return r?(e.cantEdit=!0,oo(e.first,0)):pe(e,t,n,!0);i=!0,d=t,a=-a}o=d;continue e}}return o}}function ge(e){for(var t=e.display,n=e.doc,r=document.createDocumentFragment(),i=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++){var a=n.sel.ranges[o],s=a.empty();(s||e.options.showCursorWhenSelecting)&&me(e,a,r),s||ve(e,a,i)}if(e.options.moveInputWithCursor){var l=Pe(e,n.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect(),d=Math.max(0,Math.min(t.wrapper.clientHeight-10,l.top+u.top-c.top)),h=Math.max(0,Math.min(t.wrapper.clientWidth-10,l.left+u.left-c.left));t.inputDiv.style.top=d+"px",t.inputDiv.style.left=h+"px"}hi(t.cursorDiv,r),hi(t.selectionDiv,i)}function me(e,t,n){var r=Pe(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(ui("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(ui("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function ve(e,t,n){function r(e,t,n,r){0>t&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(ui("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(r-t)+"px"))}function i(t,n,i){function o(n,r){return qe(e,oo(t,n),"div",d,r)}var s,l,d=xr(a,t),h=d.text.length;return Si(Tr(d),n||0,null==i?h:i,function(e,t,a){var d,f,p,g=o(e,"left");if(e==t)d=g,f=p=g.left;else{if(d=o(t-1,"right"),"rtl"==a){var m=g;g=d,d=m}f=g.left,p=d.right}null==n&&0==e&&(f=c),d.top-g.top>3&&(r(f,g.top,null,g.bottom),f=c,g.bottom<d.top&&r(f,g.bottom,null,d.top)),null==i&&t==h&&(p=u),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),c+1>f&&(f=c),r(f,d.top,p-f,d.bottom)}),{start:s,end:l}}var o=e.display,a=e.doc,s=document.createDocumentFragment(),l=Se(e.display),c=l.left,u=o.lineSpace.offsetWidth-l.right,d=t.from(),h=t.to();if(d.line==h.line)i(d.line,d.ch,h.ch);else{var f=xr(a,d.line),p=xr(a,h.line),g=Pn(f)==Pn(p),m=i(d.line,d.ch,g?f.text.length+1:null).end,v=i(h.line,g?0:null,h.ch).start;g&&(m.top<v.top-2?(r(m.right,m.top,null,m.bottom),r(c,v.top,v.left,v.bottom)):r(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&r(c,m.bottom,null,v.top)}n.appendChild(s)}function be(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ye(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,ai(xe,e))}function xe(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=To(t.mode,we(e,t.frontier));Ze(e,function(){t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(i){if(t.frontier>=e.display.viewFrom){var o=i.styles,a=rr(e,i,r,!0);i.styles=a.styles;var s=i.styleClasses,l=a.classes;l?i.styleClasses=l:s&&(i.styleClasses=null);for(var c=!o||o.length!=i.styles.length||s!=l&&(!s||!l||s.bgClass!=l.bgClass||s.textClass!=l.textClass),u=0;!c&&u<o.length;++u)c=o[u]!=i.styles[u];c&&it(e,t.frontier,"text"),i.stateAfter=To(t.mode,r)}else or(e,i.text,r),i.stateAfter=t.frontier%5==0?To(t.mode,r):null;return++t.frontier,+new Date>n?(ye(e,e.options.workDelay),!0):void 0})})}}function _e(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=xr(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var c=oa(l.text,null,e.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}function we(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=_e(e,t,n),a=o>r.first&&xr(r,o-1).stateAfter;return a=a?To(r.mode,a):Eo(r.mode),r.iter(o,t,function(n){or(e,n.text,a);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=s?To(r.mode,a):null,++o}),n&&(r.frontier=o),a}function ke(e){return e.lineSpace.offsetTop}function Ce(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Se(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=hi(e.measure,ui("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function De(e,t,n){var r=e.options.lineWrapping,i=r&&e.display.scroller.clientWidth;if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Te(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(Cr(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Ee(e,t){t=Pn(t);var n=Cr(t),r=e.display.externalMeasured=new tt(e.doc,t,n);r.lineN=n;var i=r.built=sr(e,r);return r.text=i.pre,hi(e.display.lineMeasure,i.pre),r}function Me(e,t,n,r){return Ae(e,Be(e,t),n,r)}function Le(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[at(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Be(e,t){var n=Cr(t),r=Le(e,n);r&&!r.text?r=null:r&&r.changes&&A(e,r,n,L(e)),r||(r=Ee(e,t));var i=Te(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ae(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(De(e,t.view,t.rect),t.hasHeights=!0),o=Ne(e,t,n,r),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function Ne(e,t,n,r){for(var i,o,a,s,l=t.map,c=0;c<l.length;c+=3){var u=l[c],d=l[c+1];if(u>n?(o=0,a=1,s="left"):d>n?(o=n-u,a=o+1):(c==l.length-3||n==d&&l[c+3]>n)&&(a=d-u,o=a-1,n>=d&&(s="right")),null!=o){if(i=l[c+2],u==d&&r==(i.insertLeft?"left":"right")&&(s=r),"left"==r&&0==o)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)i=l[(c-=3)+2],s="left";if("right"==r&&o==d-u)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)i=l[(c+=3)+2],s="right";break}}var h;if(3==i.nodeType){for(;o&&ci(t.line.text.charAt(u+o));)--o;for(;d>u+a&&ci(t.line.text.charAt(u+a));)++a;if(ji&&9>qi&&0==o&&a==d-u)h=i.parentNode.getBoundingClientRect();else if(ji&&e.options.lineWrapping){var f=la(i,o,a).getClientRects();h=f.length?f["right"==r?f.length-1:0]:uo}else h=la(i,o,a).getBoundingClientRect()||uo}else{o>0&&(s=r="right");var f;h=e.options.lineWrapping&&(f=i.getClientRects()).length>1?f["right"==r?f.length-1:0]:i.getBoundingClientRect()}if(ji&&9>qi&&!o&&(!h||!h.left&&!h.right)){var p=i.parentNode.getClientRects()[0];h=p?{left:p.left,right:p.left+Ke(e.display),top:p.top,bottom:p.bottom}:uo}for(var g=h.top-t.rect.top,m=h.bottom-t.rect.top,v=(g+m)/2,b=t.view.measure.heights,c=0;c<b.length-1&&!(v<b[c]);c++);var y=c?b[c-1]:0,x=b[c],_={left:("right"==s?h.right:h.left)-t.rect.left,right:("left"==s?h.left:h.right)-t.rect.left,top:y,bottom:x};return h.left||h.right||(_.bogus=!0),e.options.singleCursorHeightPerLine||(_.rtop=g,_.rbottom=m),_}function Ie(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function $e(e){e.display.externalMeasure=null,di(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ie(e.display.view[t])}function Fe(e){$e(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,
e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ze(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Oe(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Re(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=Gn(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Dr(t);if("local"==r?a+=ke(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:Oe());var l=s.left+("window"==r?0:ze());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function je(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=ze(),i-=Oe();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function qe(e,t,n,r,i){return r||(r=xr(e.doc,t.line)),Re(e,r,Me(e,r,t.ch,i),n)}function Pe(e,t,n,r,i,o){function a(t,a){var s=Ae(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Re(e,r,s,n)}function s(e,t){var n=l[t],r=n.level%2;return e==Di(n)&&t&&n.level<l[t-1].level?(n=l[--t],e=Ti(n)-(n.level%2?0:1),r=!0):e==Ti(n)&&t<l.length-1&&n.level<l[t+1].level&&(n=l[++t],e=Di(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?a(e-1):a(e,r)}r=r||xr(e.doc,t.line),i||(i=Be(e,r));var l=Tr(r),c=t.ch;if(!l)return a(c);var u=Ni(l,c),d=s(c,u);return null!=_a&&(d.other=s(c,_a)),d}function He(e,t){var n=0,t=Q(e.doc,t);e.options.lineWrapping||(n=Ke(e.display)*t.ch);var r=xr(e.doc,t.line),i=Dr(r)+ke(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function We(e,t,n,r){var i=oo(e,t);return i.xRel=r,n&&(i.outside=!0),i}function Ue(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,0>n)return We(r.first,0,!0,-1);var i=Sr(r,n),o=r.first+r.size-1;if(i>o)return We(r.first+r.size-1,xr(r,o).text.length,!0,1);0>t&&(t=0);for(var a=xr(r,i);;){var s=Ve(e,a,i,t,n),l=jn(a),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;i=Cr(a=c.to.line)}}function Ve(e,t,n,r,i){function o(r){var i=Pe(e,oo(n,r),"line",t,c);return s=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(s=!1,i.left)}var a=i-Dr(t),s=!1,l=2*e.display.wrapper.clientWidth,c=Be(e,t),u=Tr(t),d=t.text.length,h=Ei(t),f=Mi(t),p=o(h),g=s,m=o(f),v=s;if(r>m)return We(n,f,v,1);for(;;){if(u?f==h||f==$i(t,h,1):1>=f-h){for(var b=p>r||m-r>=r-p?h:f,y=r-(b==h?p:m);ci(t.text.charAt(b));)++b;var x=We(n,b,b==h?g:v,-1>y?-1:y>1?1:0);return x}var _=Math.ceil(d/2),w=h+_;if(u){w=h;for(var k=0;_>k;++k)w=$i(t,w,1)}var C=o(w);C>r?(f=w,m=C,(v=s)&&(m+=1e3),d=_):(h=w,p=C,g=s,d-=_)}}function Xe(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==so){so=ui("pre");for(var t=0;49>t;++t)so.appendChild(document.createTextNode("x")),so.appendChild(ui("br"));so.appendChild(document.createTextNode("x"))}hi(e.measure,so);var n=so.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),di(e.measure),n||1}function Ke(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=ui("span","xxxxxxxxxx"),n=ui("pre",[t]);hi(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Ge(e){e.curOp={viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++ho},Jo++||(Vo=[])}function Ye(e){var t=e.curOp,n=e.doc,r=e.display;if(e.curOp=null,t.updateMaxLine&&f(e),t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<r.viewFrom||t.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&e.options.lineWrapping){var i=k(e,{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate);e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)}if(!i&&t.selectionChanged&&ge(e),i||t.startHeight==e.doc.height||v(e),null==r.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=t.scrollTop&&r.scroller.scrollTop!=t.scrollTop){var o=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,t.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=o}if(null!=t.scrollLeft&&r.scroller.scrollLeft!=t.scrollLeft){var a=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,t.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=a,y(e)}if(t.scrollToPos){var s=rn(e,Q(e.doc,t.scrollToPos.from),Q(e.doc,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&nn(e,s)}t.selectionChanged&&be(e),e.state.focused&&t.updateInput&&ft(e,t.typing);var l=t.maybeHiddenMarkers,c=t.maybeUnhiddenMarkers;if(l)for(var u=0;u<l.length;++u)l[u].lines.length||Qo(l[u],"hide");if(c)for(var u=0;u<c.length;++u)c[u].lines.length&&Qo(c[u],"unhide");var d;if(--Jo||(d=Vo,Vo=null),t.changeObjs&&Qo(e,"changes",e,t.changeObjs),d)for(var u=0;u<d.length;++u)d[u]();if(t.cursorActivityHandlers)for(var u=0;u<t.cursorActivityHandlers.length;u++)t.cursorActivityHandlers[u](e)}function Ze(e,t){if(e.curOp)return t();Ge(e);try{return t()}finally{Ye(e)}}function Qe(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ge(e);try{return t.apply(e,arguments)}finally{Ye(e)}}}function Je(e){return function(){if(this.curOp)return e.apply(this,arguments);Ge(this);try{return e.apply(this,arguments)}finally{Ye(this)}}}function et(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ge(t);try{return e.apply(this,arguments)}finally{Ye(t)}}}function tt(e,t,n){this.line=t,this.rest=Hn(t),this.size=this.rest?Cr(ti(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Vn(e,t)}function nt(e,t,n){for(var r,i=[],o=t;n>o;o=r){var a=new tt(e.doc,xr(e.doc,o),o);r=o+a.size,i.push(a)}return i}function rt(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)io&&Wn(e.doc,t)<i.viewTo&&ot(e);else if(n<=i.viewFrom)io&&Un(e.doc,n+r)>i.viewFrom?ot(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)ot(e);else if(t<=i.viewFrom){var o=st(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):ot(e)}else if(n>=i.viewTo){var o=st(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):ot(e)}else{var a=st(e,t,t,-1),s=st(e,n,n+r,1);a&&s?(i.view=i.view.slice(0,a.index).concat(nt(e,a.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):ot(e)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:t<l.lineN+l.size&&(i.externalMeasured=null))}function it(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[at(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==ni(a,n)&&a.push(n)}}}function ot(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function at(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,0>t)return r}function st(e,t,n,r){var i,o=at(e,t),a=e.display.view;if(!io||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=0,l=e.display.viewFrom;o>s;s++)l+=a[s].size;if(l!=t){if(r>0){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,n+=i}for(;Wn(e.doc,n)!=n;){if(o==(0>r?0:a.length-1))return null;n+=r*a[o-(0>r?1:0)].size,o+=r}return{index:o,lineN:n}}function lt(e,t,n){var r=e.display,i=r.view;0==i.length||t>=r.viewTo||n<=r.viewFrom?(r.view=nt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=nt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(at(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(nt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,at(e,n)))),r.viewTo=n}function ct(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ut(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){ht(e),e.state.focused&&ut(e)})}function dt(e){function t(){var r=ht(e);r||n?(e.display.pollingFast=!1,ut(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function ht(e){var t=e.display.input,n=e.display.prevInput,r=e.doc;if(!e.state.focused||ba(t)&&!n||mt(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(ji&&qi>=9&&e.display.inputHasSelection===i)return ft(e),!1;var o=!e.curOp;o&&Ge(e),e.display.shift=!1,8203!=i.charCodeAt(0)||r.sel!=e.display.selForContextMenu||n||(n="​");for(var a=0,s=Math.min(n.length,i.length);s>a&&n.charCodeAt(a)==i.charCodeAt(a);)++a;for(var l=i.slice(a),c=va(l),u=e.state.pasteIncoming&&c.length>1&&r.sel.ranges.length==c.length,d=r.sel.ranges.length-1;d>=0;d--){var h=r.sel.ranges[d],f=h.from(),p=h.to();a<n.length?f=oo(f.line,f.ch-(n.length-a)):e.state.overwrite&&h.empty()&&!e.state.pasteIncoming&&(p=oo(p.line,Math.min(xr(r,p.line).text.length,p.ch+ti(c).length)));var g=e.curOp.updateInput,m={from:f,to:p,text:u?[c[d]]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(Gt(e.doc,m),Vr(e,"inputRead",e,m),l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&h.head.ch<100&&(!d||r.sel.ranges[d-1].head.line!=h.head.line)){var v=e.getModeAt(h.head);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(l.indexOf(v.electricChars.charAt(b))>-1){un(e,h.head.line,"smart");break}}else if(v.electricInput){var y=bo(m);v.electricInput.test(xr(r,y.line).text.slice(0,y.ch))&&un(e,h.head.line,"smart")}}}return ln(e),e.curOp.updateInput=g,e.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=i,o&&Ye(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function ft(e,t){var n,r,i=e.doc;if(e.somethingSelected()){e.display.prevInput="";var o=i.sel.primary();n=ya&&(o.to().line-o.from().line>100||(r=e.getSelection()).length>1e3);var a=n?"-":r||e.getSelection();e.display.input.value=a,e.state.focused&&sa(e.display.input),ji&&qi>=9&&(e.display.inputHasSelection=a)}else t||(e.display.prevInput=e.display.input.value="",ji&&qi>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=n}function pt(e){"nocursor"==e.options.readOnly||Zi&&pi()==e.display.input||e.display.input.focus()}function gt(e){e.state.focused||(pt(e),jt(e))}function mt(e){return e.options.readOnly||e.doc.cantEdit}function vt(e){function t(){e.state.focused&&setTimeout(ai(pt,e),0)}function n(t){Kr(e,t)||Go(t)}function r(t){if(e.somethingSelected())i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=e.getSelection(),sa(i.input));else{for(var n="",r=[],o=0;o<e.doc.sel.ranges.length;o++){var a=e.doc.sel.ranges[o].head.line,s={anchor:oo(a,0),head:oo(a+1,0)};r.push(s),n+=e.getRange(s.anchor,s.head)}"cut"==t.type?e.setSelections(r,null,na):(i.prevInput="",i.input.value=n,sa(i.input))}"cut"==t.type&&(e.state.cutIncoming=!0)}var i=e.display;Yo(i.scroller,"mousedown",Qe(e,_t)),ji&&11>qi?Yo(i.scroller,"dblclick",Qe(e,function(t){if(!Kr(e,t)){var n=xt(e,t);if(n&&!Dt(e,t)&&!yt(e.display,t)){Xo(t);var r=gn(e,n);re(e.doc,r.anchor,r.head)}}})):Yo(i.scroller,"dblclick",function(t){Kr(e,t)||Xo(t)}),Yo(i.lineSpace,"selectstart",function(e){yt(i,e)||Xo(e)}),no||Yo(i.scroller,"contextmenu",function(t){Pt(e,t)}),Yo(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Mt(e,i.scroller.scrollTop),Lt(e,i.scroller.scrollLeft,!0),Qo(e,"scroll",e))}),Yo(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&Mt(e,i.scrollbarV.scrollTop)}),Yo(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&Lt(e,i.scrollbarH.scrollLeft)}),Yo(i.scroller,"mousewheel",function(t){Bt(e,t)}),Yo(i.scroller,"DOMMouseScroll",function(t){Bt(e,t)}),Yo(i.scrollbarH,"mousedown",t),Yo(i.scrollbarV,"mousedown",t),Yo(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),Yo(i.input,"keyup",Qe(e,Ot)),Yo(i.input,"input",function(){ji&&qi>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),dt(e)}),Yo(i.input,"keydown",Qe(e,Ft)),Yo(i.input,"keypress",Qe(e,Rt)),Yo(i.input,"focus",ai(jt,e)),Yo(i.input,"blur",ai(qt,e)),e.options.dragDrop&&(Yo(i.scroller,"dragstart",function(t){Et(e,t)}),Yo(i.scroller,"dragenter",n),Yo(i.scroller,"dragover",n),Yo(i.scroller,"drop",Qe(e,Tt))),Yo(i.scroller,"paste",function(t){yt(i,t)||(e.state.pasteIncoming=!0,pt(e),dt(e))}),Yo(i.input,"paste",function(){if(Pi&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=i.input.selectionStart,n=i.input.selectionEnd;i.input.value+="$",i.input.selectionEnd=n,i.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,dt(e)}),Yo(i.input,"cut",r),Yo(i.input,"copy",r),Xi&&Yo(i.sizer,"mouseup",function(){pi()==i.input&&i.input.blur(),pt(e)})}function bt(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function yt(e,t){for(var n=Wr(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function xt(e,t,n,r){var i=e.display;if(!n){var o=Wr(t);if(o==i.scrollbarH||o==i.scrollbarV||o==i.scrollbarFiller||o==i.gutterFiller)return null}var a,s,l=i.lineSpace.getBoundingClientRect();try{a=t.clientX-l.left,s=t.clientY-l.top}catch(t){return null}var c,u=Ue(e,a,s);if(r&&1==u.xRel&&(c=xr(e.doc,u.line).text).length==u.ch){var d=oa(c,c.length,e.options.tabSize)-c.length;u=oo(u.line,Math.max(0,Math.round((a-Se(e.display).left)/Ke(e.display))-d))}return u}function _t(e){if(!Kr(this,e)){var t=this,n=t.display;if(n.shift=e.shiftKey,yt(n,e))return void(Pi||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Dt(t,e)){var r=xt(t,e);switch(window.focus(),Ur(e)){case 1:r?wt(t,e,r):Wr(e)==n.scroller&&Xo(e);break;case 2:Pi&&(t.state.lastMiddleDown=+new Date),r&&re(t.doc,r),setTimeout(ai(pt,t),20),Xo(e);break;case 3:no&&Pt(t,e)}}}}function wt(e,t,n){setTimeout(ai(gt,e),0);var r,i=+new Date;co&&co.time>i-400&&0==ao(co.pos,n)?r="triple":lo&&lo.time>i-400&&0==ao(lo.pos,n)?(r="double",co={time:i,pos:n}):(r="single",lo={time:i,pos:n});var o=e.doc.sel,a=Qi?t.metaKey:t.ctrlKey;e.options.dragDrop&&ma&&!mt(e)&&"single"==r&&o.contains(n)>-1&&o.somethingSelected()?kt(e,t,n,a):Ct(e,t,n,r,a)}function kt(e,t,n,r){var i=e.display,o=Qe(e,function(a){Pi&&(i.scroller.draggable=!1),e.state.draggingText=!1,Zo(document,"mouseup",o),Zo(i.scroller,"drop",o),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(Xo(a),r||re(e.doc,n),pt(e),ji&&9==qi&&setTimeout(function(){document.body.focus(),pt(e)},20))});Pi&&(i.scroller.draggable=!0),e.state.draggingText=o,i.scroller.dragDrop&&i.scroller.dragDrop(),Yo(document,"mouseup",o),Yo(i.scroller,"drop",o)}function Ct(e,t,n,r,i){function o(t){if(0!=ao(g,t))if(g=t,"rect"==r){for(var i=[],o=e.options.tabSize,a=oa(xr(c,n.line).text,n.ch,o),s=oa(xr(c,t.line).text,t.ch,o),l=Math.min(a,s),f=Math.max(a,s),p=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));m>=p;p++){var v=xr(c,p).text,b=Jr(v,l,o);l==f?i.push(new K(oo(p,b),oo(p,b))):v.length>b&&i.push(new K(oo(p,b),oo(p,Jr(v,f,o))))}i.length||i.push(new K(n,n)),ce(c,G(h.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=u,x=y.anchor,_=t;if("single"!=r){if("double"==r)var w=gn(e,t);else var w=new K(oo(t.line,0),Q(c,oo(t.line+1,0)));ao(w.anchor,x)>0?(_=w.head,x=V(y.from(),w.anchor)):(_=w.anchor,x=U(y.to(),w.head))}var i=h.ranges.slice(0);i[d]=new K(Q(c,x),_),ce(c,G(i,d),ra)}}function a(t){var n=++v,i=xt(e,t,!0,"rect"==r);if(i)if(0!=ao(i,g)){gt(e),o(i);var s=b(l,c);(i.line>=s.to||i.line<s.from)&&setTimeout(Qe(e,function(){v==n&&a(t)}),150)}else{var u=t.clientY<m.top?-20:t.clientY>m.bottom?20:0;u&&setTimeout(Qe(e,function(){v==n&&(l.scroller.scrollTop+=u,a(t))}),50)}}function s(t){v=1/0,Xo(t),pt(e),Zo(document,"mousemove",y),Zo(document,"mouseup",x),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;Xo(t);var u,d,h=c.sel;if(i&&!t.shiftKey?(d=c.sel.contains(n),u=d>-1?c.sel.ranges[d]:new K(n,n)):u=c.sel.primary(),t.altKey)r="rect",i||(u=new K(n,n)),n=xt(e,t,!0,!0),d=-1;else if("double"==r){var f=gn(e,n);u=e.display.shift||c.extend?ne(c,u,f.anchor,f.head):f}else if("triple"==r){var p=new K(oo(n.line,0),Q(c,oo(n.line+1,0)));u=e.display.shift||c.extend?ne(c,u,p.anchor,p.head):p}else u=ne(c,u,n);i?d>-1?oe(c,d,u,ra):(d=c.sel.ranges.length,ce(c,G(c.sel.ranges.concat([u]),d),{scroll:!1,origin:"*mouse"})):(d=0,ce(c,new X([u],0),ra),h=c.sel);var g=n,m=l.wrapper.getBoundingClientRect(),v=0,y=Qe(e,function(e){Ur(e)?a(e):s(e)}),x=Qe(e,s);Yo(document,"mousemove",y),Yo(document,"mouseup",x)}function St(e,t,n,r,i){try{var o=t.clientX,a=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Xo(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(a>l.bottom||!Yr(e,n))return Hr(t);a-=l.top-s.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var u=s.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=o){var d=Sr(e.doc,a),h=e.options.gutters[c];return i(e,n,e,d,h,t),Hr(t)}}}function Dt(e,t){return St(e,t,"gutterClick",!0,Vr)}function Tt(e){var t=this;if(!Kr(t,e)&&!yt(t.display,e)){Xo(e),ji&&(fo=+new Date);var n=xt(t,e,!0),r=e.dataTransfer.files;if(n&&!mt(t))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,s=function(e,r){var s=new FileReader;s.onload=Qe(t,function(){if(o[r]=s.result,++a==i){n=Q(t.doc,n);var e={from:n,to:n,text:va(o.join("\n")),origin:"paste"};Gt(t.doc,e),le(t.doc,Y(n,bo(e)))}}),s.readAsText(e)},l=0;i>l;++l)s(r[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(ai(pt,t),20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(Qi?e.metaKey:e.ctrlKey))var c=t.listSelections();if(ue(t.doc,Y(n,n)),c)for(var l=0;l<c.length;++l)tn(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(o,"around","paste"),pt(t)}}catch(e){}}}}function Et(e,t){if(ji&&(!e.state.draggingText||+new Date-fo<100))return void Go(t);if(!Kr(e,t)&&!yt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!Vi)){var n=ui("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ui&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Ui&&n.parentNode.removeChild(n)}}function Mt(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,zi||k(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),zi&&k(e),ye(e,100))}function Lt(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,y(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Bt(e,t){var n=t.wheelDeltaX,r=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==r&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:null==r&&(r=t.wheelDelta);var i=e.display,o=i.scroller;if(n&&o.scrollWidth>o.clientWidth||r&&o.scrollHeight>o.clientHeight){if(r&&Qi&&Pi)e:for(var a=t.target,s=i.view;a!=o;a=a.parentNode)for(var l=0;l<s.length;l++)if(s[l].node==a){e.display.currentWheelTarget=a;break e}if(n&&!zi&&!Ui&&null!=go)return r&&Mt(e,Math.max(0,Math.min(o.scrollTop+r*go,o.scrollHeight-o.clientHeight))),Lt(e,Math.max(0,Math.min(o.scrollLeft+n*go,o.scrollWidth-o.clientWidth))),Xo(t),void(i.wheelStartX=null);if(r&&null!=go){var c=r*go,u=e.doc.scrollTop,d=u+i.wrapper.clientHeight;0>c?u=Math.max(0,u+c-50):d=Math.min(e.doc.height,d+c+50),k(e,{top:u,bottom:d})}20>po&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=n,i.wheelDY=r,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(go=(go*po+n)/(po+1),++po)}},200)):(i.wheelDX+=n,i.wheelDY+=r))}}function At(e,t,n){if("string"==typeof t&&(t=Mo[t],!t))return!1;e.display.pollingFast&&ht(e)&&(e.display.pollingFast=!1);var r=e.display.shift,i=!1;try{mt(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=ta}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function Nt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function It(e,t){var n=vn(e.options.keyMap),r=n.auto;clearTimeout(mo),r&&!Ao(t)&&(mo=setTimeout(function(){vn(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,s(e))},50));var i=No(t,!0),o=!1;if(!i)return!1;var a=Nt(e);return o=t.shiftKey?Bo("Shift-"+i,a,function(t){return At(e,t,!0)})||Bo(i,a,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?At(e,t):void 0}):Bo(i,a,function(t){return At(e,t)}),o&&(Xo(t),be(e),Vr(e,"keyHandled",e,i,t)),o}function $t(e,t,n){var r=Bo("'"+n+"'",Nt(e),function(t){return At(e,t,!0)});return r&&(Xo(t),be(e),Vr(e,"keyHandled",e,"'"+n+"'",t)),r}function Ft(e){var t=this;if(gt(t),!Kr(t,e)){ji&&11>qi&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=It(t,e);Ui&&(vo=r?n:null,!r&&88==n&&!ya&&(Qi?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||zt(t)}}function zt(e){function t(e){18!=e.keyCode&&e.altKey||(mi(n,"CodeMirror-crosshair"),Zo(document,"keyup",t),Zo(document,"mouseover",t))}var n=e.display.lineDiv;vi(n,"CodeMirror-crosshair"),Yo(document,"keyup",t),Yo(document,"mouseover",t)}function Ot(e){Kr(this,e)||16==e.keyCode&&(this.doc.sel.shift=!1)}function Rt(e){var t=this;if(!(Kr(t,e)||e.ctrlKey||Qi&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(Ui&&n==vo)return vo=null,void Xo(e);if(!(Ui&&(!e.which||e.which<10)||Xi)||!It(t,e)){var i=String.fromCharCode(null==r?n:r);$t(t,e,i)||(ji&&qi>=9&&(t.display.inputHasSelection=null),dt(t))}}}function jt(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Qo(e,"focus",e),e.state.focused=!0,vi(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(ft(e),Pi&&setTimeout(ai(ft,e,!0),0))),ut(e),be(e))}function qt(e){e.state.focused&&(Qo(e,"blur",e),e.state.focused=!1,mi(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Pt(e,t){function n(){if(null!=i.input.selectionStart){var t=e.somethingSelected(),n=i.input.value="​"+(t?i.input.value:"");i.prevInput=t?"":"​",i.input.selectionStart=1,i.input.selectionEnd=n.length,i.selForContextMenu=e.doc.sel}}function r(){if(i.inputDiv.style.position="relative",i.input.style.cssText=l,ji&&9>qi&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),ut(e),null!=i.input.selectionStart){(!ji||ji&&9>qi)&&n();var t=0,r=function(){i.selForContextMenu==e.doc.sel&&0==i.input.selectionStart?Qe(e,Mo.selectAll)(e):t++<10?i.detectingSelectAll=setTimeout(r,500):ft(e)};i.detectingSelectAll=setTimeout(r,200)}}if(!Kr(e,t,"contextmenu")){var i=e.display;if(!yt(i,t)&&!Ht(e,t)){var o=xt(e,t),a=i.scroller.scrollTop;if(o&&!Ui){var s=e.options.resetSelectionOnContextMenu;s&&-1==e.doc.sel.contains(o)&&Qe(e,ce)(e.doc,Y(o),na);var l=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(ji?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",pt(e),ft(e),e.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=e.doc.sel,clearTimeout(i.detectingSelectAll),ji&&qi>=9&&n(),no){Go(t);var c=function(){Zo(window,"mouseup",c),setTimeout(r,20)};Yo(window,"mouseup",c)}else setTimeout(r,50)}}}}function Ht(e,t){return Yr(e,"gutterContextMenu")?St(e,t,"gutterContextMenu",!1,Qo):!1}function Wt(e,t){if(ao(e,t.from)<0)return e;if(ao(e,t.to)<=0)return bo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=bo(t).ch-t.to.ch),oo(n,r)}function Ut(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new K(Wt(i.anchor,t),Wt(i.head,t)))}return G(n,e.sel.primIndex)}function Vt(e,t,n){return e.line==t.line?oo(n.line,e.ch-t.ch+n.ch):oo(n.line+(e.line-t.line),e.ch)}function Xt(e,t,n){for(var r=[],i=oo(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=Vt(s.from,i,o),c=Vt(bo(s),i,o);if(i=s.to,o=c,"around"==n){var u=e.sel.ranges[a],d=ao(u.head,u.anchor)<0;r[a]=new K(d?c:l,d?l:c)}else r[a]=new K(l,l)}return new X(r,e.sel.primIndex)}function Kt(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Q(e,t)),n&&(this.to=Q(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Qo(e,"beforeChange",e,r),e.cm&&Qo(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Gt(e,t,n){if(e.cm){if(!e.cm.curOp)return Qe(e.cm,Gt)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Yr(e,"beforeChange")||e.cm&&Yr(e.cm,"beforeChange"))||(t=Kt(e,t,!0))){var r=ro&&!n&&An(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Yt(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Yt(e,t)}}function Yt(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ao(t.from,t.to)){var n=Ut(e,t);Ar(e,t,n,e.cm?e.cm.curOp.id:NaN),Jt(e,t,n,Mn(e,t));var r=[];br(e,function(e,n){n||-1!=ni(r,e.history)||(Pr(e.history,t),r.push(e.history)),Jt(e,t,null,Mn(e,t))})}}function Zt(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;r=a.pop(),r.ranges;){if($r(r,s),n&&!r.equals(e.sel))return void ce(e,r,{clearRedo:!1});o=r}var c=[];$r(o,s),s.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var u=Yr(e,"beforeChange")||e.cm&&Yr(e.cm,"beforeChange"),l=r.changes.length-1;l>=0;--l){var d=r.changes[l];if(d.origin=t,u&&!Kt(e,d,!1))return void(a.length=0);c.push(Mr(e,d));var h=l?Ut(e,d,null):ti(a);Jt(e,d,h,Bn(e,d)),!l&&e.cm&&e.cm.scrollIntoView(d);var f=[];br(e,function(e,t){t||-1!=ni(f,e.history)||(Pr(e.history,d),f.push(e.history)),Jt(e,d,null,Bn(e,d))})}}}}function Qt(e,t){if(0!=t&&(e.first+=t,e.sel=new X(ri(e.sel.ranges,function(e){return new K(oo(e.anchor.line+t,e.anchor.ch),oo(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){rt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)it(e.cm,r,"gutter")}}function Jt(e,t,n,r){if(e.cm&&!e.cm.curOp)return Qe(e.cm,Jt)(e,t,n,r);if(t.to.line<e.first)return void Qt(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Qt(e,i),t={from:oo(e.first,0),to:oo(t.to.line+i,t.to.ch),text:[ti(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:oo(o,xr(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=_r(e,t.from,t.to),n||(n=Ut(e,t,null)),e.cm?en(e.cm,t,r):gr(e,t,r),ue(e,n,na)}}function en(e,t,n){var r=e.doc,i=e.display,a=t.from,s=t.to,l=!1,c=a.line;e.options.lineWrapping||(c=Cr(Pn(xr(r,a.line))),r.iter(c,s.line+1,function(e){return e==i.maxLine?(l=!0,!0):void 0})),r.sel.contains(t.from,t.to)>-1&&Gr(e),gr(r,t,n,o(e)),e.options.lineWrapping||(r.iter(c,a.line+t.text.length,function(e){var t=h(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),ye(e,400);var u=t.text.length-(s.line-a.line)-1;a.line!=s.line||1!=t.text.length||pr(e.doc,t)?rt(e,a.line,s.line+1,u):it(e,a.line,"text");var d=Yr(e,"changes"),f=Yr(e,"change");if(f||d){var p={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};f&&Vr(e,"change",e,p),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function tn(e,t,n,r,i){if(r||(r=n),ao(r,n)<0){var o=r;r=n,n=o}"string"==typeof t&&(t=va(t)),Gt(e,{from:n,to:r,text:t,origin:i})}function nn(e,t){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Gi){var o=ui("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-ke(e.display))+"px; height: "+(t.bottom-t.top+ea)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}function rn(e,t,n,r){for(null==r&&(r=0);;){var i=!1,o=Pe(e,t),a=n&&n!=t?Pe(e,n):o,s=an(e,Math.min(o.left,a.left),Math.min(o.top,a.top)-r,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+r),l=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=s.scrollTop&&(Mt(e,s.scrollTop),Math.abs(e.doc.scrollTop-l)>1&&(i=!0)),null!=s.scrollLeft&&(Lt(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(i=!0)),!i)return o}}function on(e,t,n,r,i){var o=an(e,t,n,r,i);null!=o.scrollTop&&Mt(e,o.scrollTop),null!=o.scrollLeft&&Lt(e,o.scrollLeft)}function an(e,t,n,r,i){var o=e.display,a=Xe(e.display);0>n&&(n=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-ea,c={},u=e.doc.height+Ce(o),d=a>n,h=i>u-a;if(s>n)c.scrollTop=d?0:n;else if(i>s+l){var f=Math.min(n,(h?u:i)-l);f!=s&&(c.scrollTop=f)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,g=o.scroller.clientWidth-ea;t+=o.gutters.offsetWidth,r+=o.gutters.offsetWidth;var m=o.gutters.offsetWidth,v=m+10>t;return p+m>t||v?(v&&(t=0),c.scrollLeft=Math.max(0,t-10-m)):r>g+p-3&&(c.scrollLeft=r+10-g),c}function sn(e,t,n){(null!=t||null!=n)&&cn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function ln(e){cn(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?oo(t.line,t.ch-1):t,r=oo(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function cn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=He(e,t.from),r=He(e,t.to),i=an(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function un(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(e.doc.mode.indent?i=we(e,t):n="prev");var a=e.options.tabSize,s=xr(o,t),l=oa(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&(c=e.doc.mode.indent(i,s.text.slice(u.length),s.text),c==ta)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?oa(xr(o,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/a);f;--f)h+=a,d+="	";if(c>h&&(d+=ei(c-h)),d!=u)tn(e.doc,d,oo(t,0),oo(t,u.length),"+input");else for(var f=0;f<o.sel.ranges.length;f++){var p=o.sel.ranges[f];if(p.head.line==t&&p.head.ch<u.length){var h=oo(t,u.length);oe(o,f,new K(h,h));break}}s.stateAfter=null}function dn(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=xr(e,Z(e,t)):i=Cr(t),null==i?null:(r(o,i)&&e.cm&&it(e.cm,i,n),o)}function hn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){
for(var o=t(n[i]);r.length&&ao(o.from,ti(r).to)<=0;){var a=r.pop();if(ao(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Ze(e,function(){for(var t=r.length-1;t>=0;t--)tn(e.doc,"",r[t].from,r[t].to,"+delete");ln(e)})}function fn(e,t,n,r,i){function o(){var t=s+n;return t<e.first||t>=e.first+e.size?d=!1:(s=t,u=xr(e,t))}function a(e){var t=(i?$i:Fi)(u,l,n,!0);if(null==t){if(e||!o())return d=!1;l=i?(0>n?Mi:Ei)(u):0>n?u.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,c=n,u=xr(e,s),d=!0;if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var h=null,f="group"==r,p=e.cm&&e.cm.getHelper(t,"wordChars"),g=!0;!(0>n)||a(!g);g=!1){var m=u.text.charAt(l)||"\n",v=si(m,p)?"w":f&&"\n"==m?"n":!f||/\s/.test(m)?null:"p";if(!f||g||v||(v="s"),h&&h!=v){0>n&&(n=1,a());break}if(v&&(h=v),n>0&&!a(!g))break}var b=pe(e,oo(s,l),c,!0);return d||(b.hitSide=!0),b}function pn(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(s-(0>n?1.5:.5)*Xe(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var l=Ue(e,a,i);if(!l.outside)break;if(0>n?0>=i:i>=o.height){l.hitSide=!0;break}i+=5*n}return l}function gn(e,t){var n=e.doc,r=xr(n,t.line).text,i=t.ch,o=t.ch;if(r){var a=e.getHelper(t,"wordChars");(t.xRel<0||o==r.length)&&i?--i:++o;for(var s=r.charAt(i),l=si(s,a)?function(e){return si(e,a)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!si(e)};i>0&&l(r.charAt(i-1));)--i;for(;o<r.length&&l(r.charAt(o));)++o}return new K(oo(t.line,i),oo(t.line,o))}function mn(t,n,r,i){e.defaults[t]=n,r&&(xo[t]=i?function(e,t,n){n!=_o&&r(e,t,n)}:r)}function vn(e){return"string"==typeof e?Lo[e]:e}function bn(e,t,n,r,i){if(r&&r.shared)return yn(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Qe(e.cm,bn)(e,t,n,r,i);var o=new $o(e,i),a=ao(t,n);if(r&&oi(r,o,!1),a>0||0==a&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=ui("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(qn(e,t.line,t,n,o)||t.line!=n.line&&qn(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");io=!0}o.addToHistory&&Ar(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Pn(e)==c.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&kr(e,0),Dn(e,new kn(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Vn(e,t)&&kr(t,0)}),o.clearOnEnter&&Yo(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(ro=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Fo,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)rt(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var u=t.line;u<=n.line;u++)it(c,u,"text");o.atomic&&he(c.doc),Vr(c,"markerAdded",c,o)}return o}function yn(e,t,n,r,i){r=oi(r),r.shared=!1;var o=[bn(e,t,n,r,i)],a=o[0],s=r.widgetNode;return br(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(bn(e,Q(e,t),Q(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=ti(o)}),new zo(o,a)}function xn(e){return e.findMarks(oo(e.first,0),e.clipPos(oo(e.lastLine())),function(e){return e.parent})}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(ao(o,a)){var s=bn(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function wn(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];br(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==ni(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}}}function kn(e,t,n){this.marker=e,this.from=t,this.to=n}function Cn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Sn(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Dn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Tn(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new kn(a,o.from,l?null:o.to))}}return r}function En(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new kn(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}function Mn(e,t){var n=ee(e,t.from.line)&&xr(e,t.from.line).markedSpans,r=ee(e,t.to.line)&&xr(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==ao(t.from,t.to),s=Tn(n,i,a),l=En(r,o,a),c=1==t.text.length,u=ti(t.text).length+(c?i:0);if(s)for(var d=0;d<s.length;++d){var h=s[d];if(null==h.to){var f=Cn(l,h.marker);f?c&&(h.to=null==f.to?null:f.to+u):h.to=i}}if(l)for(var d=0;d<l.length;++d){var h=l[d];if(null!=h.to&&(h.to+=u),null==h.from){var f=Cn(s,h.marker);f||(h.from=u,c&&(s||(s=[])).push(h))}else h.from+=u,c&&(s||(s=[])).push(h)}s&&(s=Ln(s)),l&&l!=s&&(l=Ln(l));var p=[s];if(!c){var g,m=t.text.length-2;if(m>0&&s)for(var d=0;d<s.length;++d)null==s[d].to&&(g||(g=[])).push(new kn(s[d].marker,null,null));for(var d=0;m>d;++d)p.push(g);p.push(l)}return p}function Ln(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Bn(e,t){var n=Or(e,t),r=Mn(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function An(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=ni(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(ao(c.to,s.from)<0||ao(c.from,s.to)>0)){var u=[l,1],d=ao(c.from,s.from),h=ao(c.to,s.to);(0>d||!a.inclusiveLeft&&!d)&&u.push({from:c.from,to:s.from}),(h>0||!a.inclusiveRight&&!h)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-1}}return i}function Nn(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function In(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function $n(e){return e.inclusiveLeft?-1:0}function Fn(e){return e.inclusiveRight?1:0}function zn(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=ao(r.from,i.from)||$n(e)-$n(t);if(o)return-o;var a=ao(r.to,i.to)||Fn(e)-Fn(t);return a?a:t.id-e.id}function On(e,t){var n,r=io&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||zn(n,i.marker)<0)&&(n=i.marker);return n}function Rn(e){return On(e,!0)}function jn(e){return On(e,!1)}function qn(e,t,n,r,i){var o=xr(e,t),a=io&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=ao(c.from,n)||$n(l.marker)-$n(i),d=ao(c.to,r)||Fn(l.marker)-Fn(i);if(!(u>=0&&0>=d||0>=u&&d>=0)&&(0>=u&&(ao(c.to,n)>0||l.marker.inclusiveRight&&i.inclusiveLeft)||u>=0&&(ao(c.from,r)<0||l.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function Pn(e){for(var t;t=Rn(e);)e=t.find(-1,!0).line;return e}function Hn(e){for(var t,n;t=jn(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function Wn(e,t){var n=xr(e,t),r=Pn(n);return n==r?t:Cr(r)}function Un(e,t){if(t>e.lastLine())return t;var n,r=xr(e,t);if(!Vn(e,r))return t;for(;n=jn(r);)r=n.find(1,!0).line;return Cr(r)+1}function Vn(e,t){var n=io&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Xn(e,t,r))return!0}}function Xn(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Xn(e,r.line,Cn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Xn(e,t,i))return!0}function Kn(e,t,n){Dr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&sn(e,null,n)}function Gn(e){if(null!=e.height)return e.height;if(!fi(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),hi(e.cm.display.measure,ui("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function Yn(e,t,n,r){var i=new Oo(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),dn(e.doc,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!Vn(e.doc,t)){var r=Dr(t)<e.doc.scrollTop;kr(t,t.height+Gn(i)),r&&sn(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function Zn(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Nn(e),In(e,n);var i=r?r(e):1;i!=e.height&&kr(e,i)}function Qn(e){e.parent=null,Nn(e)}function Jn(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function er(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var r=e.innerMode(t,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function tr(e,t,n){for(var r=0;10>r;r++){var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function nr(t,n,r,i,o,a,s){var l=r.flattenSpans;null==l&&(l=t.options.flattenSpans);var c,u=0,d=null,h=new Io(n,t.options.tabSize);for(""==n&&Jn(er(r,i),a);!h.eol();){if(h.pos>t.options.maxHighlightLength?(l=!1,s&&or(t,n,i,h.pos),h.pos=n.length,c=null):c=Jn(tr(r,h,i),a),t.options.addModeClass){var f=e.innerMode(r,i).mode.name;f&&(c="m-"+(c?f+" "+c:f))}l&&d==c||(u<h.start&&o(h.start,d),u=h.start,d=c),h.start=h.pos}for(;u<h.pos;){var p=Math.min(h.pos,u+5e4);o(p,d),u=p}}function rr(e,t,n,r){var i=[e.state.modeGen],o={};nr(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},o,r);for(var a=0;a<e.state.overlays.length;++a){var s=e.state.overlays[a],l=1,c=0;nr(e,t.text,s.mode,!0,function(e,t){for(var n=l;e>c;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;l>n;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function ir(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=rr(e,t,t.stateAfter=we(e,Cr(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function or(e,t,n,r){var i=e.doc.mode,o=new Io(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&er(i,n);!o.eol()&&o.pos<=e.options.maxHighlightLength;)tr(i,o,n),o.start=o.pos}function ar(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?qo:jo;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function sr(e,t){var n=ui("span",null,null,Pi?"padding-right: .1px":null),r={pre:ui("pre",[n]),content:n,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,a=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=cr,(ji||Pi)&&e.getOption("lineWrapping")&&(r.addToken=ur(r.addToken)),Ci(e.display.measure)&&(o=Tr(a))&&(r.addToken=dr(r.addToken,o)),r.map=[],fr(a,r,ir(e,a)),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=bi(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=bi(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(ki(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return Qo(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=bi(r.pre.className,r.textClass||"")),r}function lr(e){var t=ui("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function cr(e,t,n,r,i,o){if(t){var a=e.cm.options.specialChars,s=!1;if(a.test(t))for(var l=document.createDocumentFragment(),c=0;;){a.lastIndex=c;var u=a.exec(t),d=u?u.index-c:t.length-c;if(d){var h=document.createTextNode(t.slice(c,c+d));ji&&9>qi?l.appendChild(ui("span",[h])):l.appendChild(h),e.map.push(e.pos,e.pos+d,h),e.col+=d,e.pos+=d}if(!u)break;if(c+=d+1,"	"==u[0]){var f=e.cm.options.tabSize,p=f-e.col%f,h=l.appendChild(ui("span",ei(p),"cm-tab"));e.col+=p}else{var h=e.cm.options.specialCharPlaceholder(u[0]);ji&&9>qi?l.appendChild(ui("span",[h])):l.appendChild(h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}else{e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),ji&&9>qi&&(s=!0),e.pos+=t.length}if(n||r||i||s){var g=n||"";r&&(g+=r),i&&(g+=i);var m=ui("span",[l],g);return o&&(m.title=o),e.content.appendChild(m)}e.content.appendChild(l)}}function ur(e){function t(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}return function(n,r,i,o,a,s){e(n,r.replace(/ {3,}/g,t),i,o,a,s)}}function dr(e,t){return function(n,r,i,o,a,s){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+r.length;;){for(var u=0;u<t.length;u++){var d=t[u];if(d.to>l&&d.from<=l)break}if(d.to>=c)return e(n,r,i,o,a,s);e(n,r.slice(0,d.to-l),i,o,null,s),o=null,r=r.slice(d.to-l),l=d.to}}}function hr(e,t,n,r){var i=!r&&n.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function fr(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,c,u,d,h=i.length,f=0,p=1,g="",m=0;;){if(m==f){s=l=c=u="",d=null,m=1/0;for(var v=[],b=0;b<r.length;++b){var y=r[b],x=y.marker;y.from<=f&&(null==y.to||y.to>f)?(null!=y.to&&m>y.to&&(m=y.to,l=""),x.className&&(s+=" "+x.className),x.startStyle&&y.from==f&&(c+=" "+x.startStyle),x.endStyle&&y.to==m&&(l+=" "+x.endStyle),x.title&&!u&&(u=x.title),x.collapsed&&(!d||zn(d.marker,x)<0)&&(d=y)):y.from>f&&m>y.from&&(m=y.from),"bookmark"==x.type&&y.from==f&&x.widgetNode&&v.push(x)}if(d&&(d.from||0)==f&&(hr(t,(null==d.to?h+1:d.to)-f,d.marker,null==d.from),null==d.to))return;if(!d&&v.length)for(var b=0;b<v.length;++b)hr(t,0,v[b])}if(f>=h)break;for(var _=Math.min(h,m);;){if(g){var w=f+g.length;if(!d){var k=w>_?g.slice(0,_-f):g;t.addToken(t,k,a?a+s:s,c,f+k.length==m?l:"",u)}if(w>=_){g=g.slice(_-f),f=_;break}f=w,c=""}g=i.slice(o,o=n[p++]),a=ar(n[p++],t.cm.options)}}else for(var p=1;p<n.length;p+=2)t.addToken(t,i.slice(o,o=n[p]),ar(n[p+1],t.cm.options))}function pr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==ti(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function gr(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){Zn(e,n,i,r),Vr(e,"change",e,t)}var a=t.from,s=t.to,l=t.text,c=xr(e,a.line),u=xr(e,s.line),d=ti(l),h=i(l.length-1),f=s.line-a.line;if(pr(e,t)){for(var p=0,g=[];p<l.length-1;++p)g.push(new Ro(l[p],i(p),r));o(u,u.text,h),f&&e.remove(a.line,f),g.length&&e.insert(a.line,g)}else if(c==u)if(1==l.length)o(c,c.text.slice(0,a.ch)+d+c.text.slice(s.ch),h);else{for(var g=[],p=1;p<l.length-1;++p)g.push(new Ro(l[p],i(p),r));g.push(new Ro(d+c.text.slice(s.ch),h,r)),o(c,c.text.slice(0,a.ch)+l[0],i(0)),e.insert(a.line+1,g)}else if(1==l.length)o(c,c.text.slice(0,a.ch)+l[0]+u.text.slice(s.ch),i(0)),e.remove(a.line+1,f);else{o(c,c.text.slice(0,a.ch)+l[0],i(0)),o(u,d+u.text.slice(s.ch),h);for(var p=1,g=[];p<l.length-1;++p)g.push(new Ro(l[p],i(p),r));f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,g)}Vr(e,"change",e,t)}function mr(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function vr(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function br(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;(!n||l)&&(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function yr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,a(e),n(e),e.options.lineWrapping||f(e),e.options.mode=t.modeOption,rt(e)}function xr(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(o>t){n=i;break}t-=o}return n.lines[t]}function _r(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function wr(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function kr(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Cr(e){if(null==e.parent)return null;for(var t=e.parent,n=ni(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Sr(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(o>t){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var a=e.lines[r],s=a.height;if(s>t)break;t-=s}return n+r}function Dr(e){e=Pn(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var r=0;r<o.children.length;++r){var a=o.children[r];if(a==n)break;t+=a.height}return t}function Tr(e){var t=e.order;return null==t&&(t=e.order=wa(e.text)),t}function Er(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Mr(e,t){var n={from:W(t.from),to:bo(t),text:_r(e,t.from,t.to)};return Fr(e,n,t.from.line,t.to.line+1),br(e,function(e){Fr(e,n,t.from.line,t.to.line+1)},!0),n}function Lr(e){for(;e.length;){var t=ti(e);if(!t.ranges)break;e.pop()}}function Br(e,t){return t?(Lr(e.done),ti(e.done)):e.done.length&&!ti(e.done).ranges?ti(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),ti(e.done)):void 0}function Ar(e,t,n,r){var i=e.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Br(i,i.lastOp==r))){var s=ti(o.changes);0==ao(t.from,t.to)&&0==ao(t.from,s.to)?s.to=bo(t):o.changes.push(Mr(e,t))}else{var l=ti(i.done);for(l&&l.ranges||$r(e.sel,i.done),o={changes:[Mr(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||Qo(e,"historyAdded")}function Nr(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ir(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Nr(e,o,ti(i.done),t))?i.done[i.done.length-1]=t:$r(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastOp=n,r&&r.clearRedo!==!1&&Lr(i.undone)}function $r(e,t){var n=ti(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Fr(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function zr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Or(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(zr(n[r]));return i}function Rr(e,t,n){for(var r=0,i=[];r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?X.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var c,u=a[l];if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&ni(t,Number(c[1]))>-1&&(ti(s)[d]=u[d],delete u[d])}}}return i}function jr(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function qr(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)jr(o.ranges[s].anchor,t,n,r),jr(o.ranges[s].head,t,n,r)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(n<l.from.line)l.from=oo(l.from.line+r,l.from.ch),l.to=oo(l.to.line+r,l.to.ch);else if(t<=l.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function Pr(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;qr(e.done,n,r,i),qr(e.undone,n,r,i)}function Hr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Wr(e){return e.target||e.srcElement}function Ur(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Qi&&e.ctrlKey&&1==t&&(t=3),t}function Vr(e,t){function n(e){return function(){e.apply(null,i)}}var r=e._handlers&&e._handlers[t];if(r){var i=Array.prototype.slice.call(arguments,2);Vo||(++Jo,Vo=[],setTimeout(Xr,0));for(var o=0;o<r.length;++o)Vo.push(n(r[o]))}}function Xr(){--Jo;var e=Vo;Vo=null;for(var t=0;t<e.length;++t)e[t]()}function Kr(e,t,n){return Qo(e,n||t.type,e,t),Hr(t)||t.codemirrorIgnore}function Gr(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==ni(n,t[r])&&n.push(t[r])}function Yr(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Zr(e){e.prototype.on=function(e,t){Yo(this,e,t)},e.prototype.off=function(e,t){Zo(this,e,t)}}function Qr(){this.id=null}function Jr(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("	",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=t)return r}}function ei(e){for(;aa.length<=e;)aa.push(ti(aa)+" ");return aa[e]}function ti(e){return e[e.length-1]}function ni(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function ri(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function ii(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&oi(t,n),n}function oi(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||n===!1&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function ai(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function si(e,t){return t?t.source.indexOf("\\w")>-1&&ua(e)?!0:t.test(e):ua(e)}function li(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function ci(e){return e.charCodeAt(0)>=768&&da.test(e)}function ui(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function di(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function hi(e,t){return di(e).appendChild(t)}function fi(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function pi(){return document.activeElement}function gi(e){return new RegExp("\\b"+e+"\\b\\s*")}function mi(e,t){var n=gi(t);n.test(e.className)&&(e.className=e.className.replace(n,""))}function vi(e,t){gi(t).test(e.className)||(e.className+=" "+t)}function bi(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!gi(n[r]).test(t)&&(t+=" "+n[r]);return t}function yi(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function xi(){ga||(_i(),ga=!0)}function _i(){var e;Yo(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ha=null,yi(bt)},100))}),Yo(window,"blur",function(){yi(qt)})}function wi(e){if(null!=ha)return ha;var t=ui("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return hi(e,t),t.offsetWidth&&(ha=t.offsetHeight-t.clientHeight),ha||0}function ki(e){if(null==fa){var t=ui("span","​");hi(e,ui("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(fa=t.offsetWidth<=1&&t.offsetHeight>2&&!(ji&&8>qi))}return fa?ui("span","​"):ui("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Ci(e){if(null!=pa)return pa;var t=hi(e,document.createTextNode("AخA")),n=la(t,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var r=la(t,1,2).getBoundingClientRect();return pa=r.right-n.right<3}function Si(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function Di(e){return e.level%2?e.to:e.from}function Ti(e){return e.level%2?e.from:e.to}function Ei(e){var t=Tr(e);return t?Di(t[0]):0}function Mi(e){var t=Tr(e);return t?Ti(ti(t)):e.text.length}function Li(e,t){var n=xr(e.doc,t),r=Pn(n);r!=n&&(t=Cr(r));var i=Tr(r),o=i?i[0].level%2?Mi(r):Ei(r):0;return oo(t,o)}function Bi(e,t){for(var n,r=xr(e.doc,t);n=jn(r);)r=n.find(1,!0).line,t=null;var i=Tr(r),o=i?i[0].level%2?Ei(r):Mi(r):r.text.length;return oo(null==t?Cr(r):t,o)}function Ai(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:n>t}function Ni(e,t){_a=null;for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return Ai(e,i.level,e[n].level)?(i.from!=i.to&&(_a=n),r):(i.from!=i.to&&(_a=r),n);n=r}}return n}function Ii(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&ci(e.text.charAt(t)));return t}function $i(e,t,n,r){var i=Tr(e);if(!i)return Fi(e,t,n,r);for(var o=Ni(i,t),a=i[o],s=Ii(e,t,a.level%2?-n:n,r);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return Ni(i,s)==o?s:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(a=i[o+=n],!a)return null;s=n>0==a.level%2?Ii(e,a.to,-1,r):Ii(e,a.from,1,r)}}function Fi(e,t,n,r){var i=t+n;if(r)for(;i>0&&ci(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var zi=/gecko\/\d/i.test(navigator.userAgent),Oi=/MSIE \d/.test(navigator.userAgent),Ri=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ji=Oi||Ri,qi=ji&&(Oi?document.documentMode||6:Ri[1]),Pi=/WebKit\//.test(navigator.userAgent),Hi=Pi&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Wi=/Chrome\//.test(navigator.userAgent),Ui=/Opera\//.test(navigator.userAgent),Vi=/Apple Computer/.test(navigator.vendor),Xi=/KHTML\//.test(navigator.userAgent),Ki=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Gi=/PhantomJS/.test(navigator.userAgent),Yi=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Zi=Yi||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Qi=Yi||/Mac/.test(navigator.platform),Ji=/win/i.test(navigator.platform),eo=Ui&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);eo&&(eo=Number(eo[1])),eo&&eo>=15&&(Ui=!1,Pi=!0);var to=Qi&&(Hi||Ui&&(null==eo||12.11>eo)),no=zi||ji&&qi>=9,ro=!1,io=!1,oo=e.Pos=function(e,t){return this instanceof oo?(this.line=e,void(this.ch=t)):new oo(e,t)},ao=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};X.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=ao(n.anchor,r.anchor)||0!=ao(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new K(W(this.ranges[t].anchor),W(this.ranges[t].head));return new X(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ao(t,r.from())>=0&&ao(e,r.to())<=0)return n}return-1}},K.prototype={from:function(){return V(this.anchor,this.head)},to:function(){return U(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var so,lo,co,uo={left:0,right:0,top:0,bottom:0},ho=0,fo=0,po=0,go=null;ji?go=-.53:zi?go=15:Wi?go=-.7:Vi&&(go=-1/3);var mo,vo=null,bo=e.changeEnd=function(e){return e.text?oo(e.from.line+e.text.length-1,ti(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),pt(this),dt(this)},setOption:function(e,t){var n=this.options,r=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,xo.hasOwnProperty(e)&&Qe(this,xo[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||"string"!=typeof t[n]&&t[n].name==e)return t.splice(n,1),!0},addOverlay:Je(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,rt(this)}),removeOverlay:Je(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void rt(this)}}),indentLine:Je(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ee(this.doc,e)&&un(this,e,t,n)}),indentSelection:Je(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(un(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&ln(this));else{var o=Math.max(n,i.from().line),a=i.to();n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=o;n>s;++s)un(this,s,e)}}}),getTokenAt:function(e,t){var n=this.doc;e=Q(n,e);for(var r=we(this,e.line,t),i=this.doc.mode,o=xr(n,e.line),a=new Io(o.text,this.options.tabSize);a.pos<e.ch&&!a.eol();){a.start=a.pos;var s=tr(i,a,r)}return{start:a.start,end:a.pos,string:a.current(),type:s||null,state:r}},getTokenTypeAt:function(e){e=Q(this.doc,e);var t,n=ir(this,xr(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("cm-overlay "):-1;return 0>s?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!Do.hasOwnProperty(t))return Do;var r=Do[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=r[i[t][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var o=0;o<r._global.length;o++){var s=r._global[o];s.pred(i,this)&&-1==ni(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=Z(n,null==e?n.first+n.size-1:e),we(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?Q(this.doc,e):e?r.from():r.to(),Pe(this,n,t||"page")},charCoords:function(e,t){return qe(this,Q(this.doc,e),t||"page")},coordsChar:function(e,t){return e=je(this,e,t||"page"),Ue(this,e.left,e.top)},lineAtHeight:function(e,t){return e=je(this,{top:e,left:0},t||"page").top,Sr(this.doc,e+this.display.viewOffset);
},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=xr(this.doc,e);return Re(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Dr(i):0)},defaultTextHeight:function(){return Xe(this.display)},defaultCharWidth:function(){return Ke(this.display)},setGutterMarker:Je(function(e,t,n){return dn(this.doc,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&li(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Je(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,it(t,r,"gutter"),li(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineWidget:Je(function(e,t,n){return Yn(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!ee(this.doc,e))return null;var t=e;if(e=xr(this.doc,e),!e)return null}else{var t=Cr(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=Pe(this,Q(this.doc,e));var a=e.bottom,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&on(this,s,a,s+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:Je(Ft),triggerOnKeyPress:Je(Rt),triggerOnKeyUp:Je(Ot),execCommand:function(e){return Mo.hasOwnProperty(e)?Mo[e](this):void 0},findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var o=0,a=Q(this.doc,e);t>o&&(a=fn(this.doc,a,i,n,r),!a.hitSide);++o);return a},moveH:Je(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?fn(n.doc,r.head,e,t,n.options.rtlMoveVisually):0>e?r.from():r.to()},ia)}),deleteH:Je(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):hn(this,function(n){var i=fn(r,n.head,e,t,!1);return 0>e?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;0>t&&(i=-1,t=-t);for(var a=0,s=Q(this.doc,e);t>a;++a){var l=Pe(this,s,"div");if(null==o?o=l.left:l.left=o,s=pn(this,l,i,n),s.hitSide)break}return s},moveV:Je(function(e,t){var n=this,r=this.doc,i=[],o=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return 0>e?a.from():a.to();var s=Pe(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=pn(n,s,e,t);return"page"==t&&a==r.sel.primary()&&sn(n,null,qe(n,l,"div").top-s.top),l},ia),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?vi(this.display.cursorDiv,"CodeMirror-overwrite"):mi(this.display.cursorDiv,"CodeMirror-overwrite"),Qo(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return pi()==this.display.input},scrollTo:Je(function(e,t){(null!=e||null!=t)&&cn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=ea;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Je(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:oo(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)cn(this),this.curOp.scrollToPos=e;else{var n=an(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Je(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var r=this;null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&$e(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){it(r,i,"widget");break}++i}),r.curOp.forceUpdate=!0,Qo(r,"refresh",this)}),operation:function(e){return Ze(this,e)},refresh:Je(function(){var e=this.display.cachedTextHeight;rt(this),this.curOp.forceUpdate=!0,Fe(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==e||Math.abs(e-Xe(this.display))>.5)&&a(this),Qo(this,"refresh",this)}),swapDoc:Je(function(e){var t=this.doc;return t.cm=null,yr(this,e),Fe(this),ft(this),this.scrollTo(e.scrollLeft,e.scrollTop),Vr(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Zr(e);var yo=e.defaults={},xo=e.optionHandlers={},_o=e.Init={toString:function(){return"CodeMirror.Init"}};mn("value","",function(e,t){e.setValue(t)},!0),mn("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),mn("indentUnit",2,n,!0),mn("indentWithTabs",!1),mn("smartIndent",!0),mn("tabSize",4,function(e){r(e),Fe(e),rt(e)},!0),mn("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),mn("specialCharPlaceholder",lr,function(e){e.refresh()},!0),mn("electricChars",!0),mn("rtlMoveVisually",!Ji),mn("wholeLineUpdateBefore",!0),mn("theme","default",function(e){l(e),c(e)},!0),mn("keyMap","default",s),mn("extraKeys",null),mn("lineWrapping",!1,i,!0),mn("gutters",[],function(e){p(e.options),c(e)},!0),mn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?w(e.display)+"px":"0",e.refresh()},!0),mn("coverGutterNextToScrollbar",!1,v,!0),mn("lineNumbers",!1,function(e){p(e.options),c(e)},!0),mn("firstLineNumber",1,c,!0),mn("lineNumberFormatter",function(e){return e},c,!0),mn("showCursorWhenSelecting",!1,ge,!0),mn("resetSelectionOnContextMenu",!0),mn("readOnly",!1,function(e,t){"nocursor"==t?(qt(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||ft(e))}),mn("disableInput",!1,function(e,t){t||ft(e)},!0),mn("dragDrop",!0),mn("cursorBlinkRate",530),mn("cursorScrollMargin",0),mn("cursorHeight",1,ge,!0),mn("singleCursorHeightPerLine",!0,ge,!0),mn("workTime",100),mn("workDelay",100),mn("flattenSpans",!0,r,!0),mn("addModeClass",!1,r,!0),mn("pollInterval",100),mn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),mn("historyEventDelay",1250),mn("viewportMargin",10,function(e){e.refresh()},!0),mn("maxHighlightLength",1e4,r,!0),mn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),mn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),mn("autofocus",null);var wo=e.modes={},ko=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}wo[t]=n},e.defineMIME=function(e,t){ko[e]=t},e.resolveMode=function(t){if("string"==typeof t&&ko.hasOwnProperty(t))t=ko[t];else if(t&&"string"==typeof t.name&&ko.hasOwnProperty(t.name)){var n=ko[t.name];"string"==typeof n&&(n={name:n}),t=ii(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=wo[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(Co.hasOwnProperty(n.name)){var o=Co[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)i[a]=n.modeProps[a];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Co=e.modeExtensions={};e.extendMode=function(e,t){var n=Co.hasOwnProperty(e)?Co[e]:Co[e]={};oi(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){Ho.prototype[e]=t},e.defineOption=mn;var So=[];e.defineInitHook=function(e){So.push(e)};var Do=e.helpers={};e.registerHelper=function(t,n,r){Do.hasOwnProperty(t)||(Do[t]=e[t]={_global:[]}),Do[t][n]=r},e.registerGlobalHelper=function(t,n,r,i){e.registerHelper(t,n,i),Do[t]._global.push({pred:r,val:i})};var To=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},Eo=e.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var Mo=e.commands={selectAll:function(e){e.setSelection(oo(e.firstLine(),0),oo(e.lastLine()),na)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),na)},killLine:function(e){hn(e,function(t){if(t.empty()){var n=xr(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:oo(t.head.line+1,0)}:{from:t.head,to:oo(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){hn(e,function(t){return{from:oo(t.from().line,0),to:Q(e.doc,oo(t.to().line+1,0))}})},delLineLeft:function(e){hn(e,function(e){return{from:oo(e.from().line,0),to:e.from()}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(oo(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(oo(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Li(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){var n=Li(e,t.head.line),r=e.getLineHandle(n.line),i=Tr(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.head.line==n.line&&t.head.ch<=o&&t.head.ch;return oo(n.line,a?0:o)}return n},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Bi(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},ia)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},ia)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=oa(e.getLine(o.line),o.ch,r);t.push(new Array(r-a%r+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Ze(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=xr(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new oo(i.line,i.ch-1)),i.ch>0)i=new oo(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),oo(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=xr(e.doc,i.line-1).text;a&&e.replaceRange(o.charAt(0)+"\n"+a.charAt(a.length-1),oo(i.line-1,a.length-1),oo(i.line,1),"+transpose")}n.push(new K(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){Ze(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var r=e.listSelections()[n];e.replaceRange("\n",r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0),ln(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},Lo=e.keyMap={};Lo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Lo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Lo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Lo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Lo["default"]=Qi?Lo.macDefault:Lo.pcDefault;var Bo=e.lookupKey=function(e,t,n){function r(t){t=vn(t);var i=t[e];if(i===!1)return"stop";if(null!=i&&n(i))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return r(o);for(var a=0;a<o.length;++a){var s=r(o[a]);if(s)return s}return!1}for(var i=0;i<t.length;++i){var o=r(t[i]);if(o)return"stop"!=o}},Ao=e.isModifierKey=function(e){var t=xa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},No=e.keyName=function(e,t){if(Ui&&34==e.keyCode&&e["char"])return!1;var n=xa[e.keyCode];return null==n||e.altGraphKey?!1:(e.altKey&&(n="Alt-"+n),(to?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(to?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)};e.fromTextArea=function(t,n){function r(){t.value=c.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=pi();n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Yo(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=t.form,a=o.submit;try{var s=o.submit=function(){r(),o.submit=a,o.submit(),o.submit=s}}catch(l){}}t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c.save=r,c.getTextArea=function(){return t},c.toTextArea=function(){r(),t.parentNode.removeChild(c.getWrapperElement()),t.style.display="",t.form&&(Zo(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=a))},c};var Io=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Io.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=oa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?oa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return oa(this.string,null,this.tabSize)-(this.lineStart?oa(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var $o=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};Zr($o),$o.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ge(e),Yr(this,"clear")){var n=this.find();n&&Vr(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Cn(a.markedSpans,this);e&&!this.collapsed?it(e,Cr(a),"text"):e&&(null!=s.to&&(i=Cr(a)),null!=s.from&&(r=Cr(a))),a.markedSpans=Sn(a.markedSpans,s),null==s.from&&this.collapsed&&!Vn(this.doc,a)&&e&&kr(a,Xe(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Pn(this.lines[o]),c=h(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&rt(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&he(e.doc)),e&&Vr(e,"markerCleared",e,this),t&&Ye(e),this.parent&&this.parent.clear()}},$o.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],a=Cn(o.markedSpans,this);if(null!=a.from&&(n=oo(t?o:Cr(o),a.from),-1==e))return n;if(null!=a.to&&(r=oo(t?o:Cr(o),a.to),1==e))return r}return n&&{from:n,to:r}},$o.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&Ze(n,function(){var r=e.line,i=Cr(e.line),o=Le(n,i);if(o&&(Ie(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Vn(t.doc,r)&&null!=t.height){var a=t.height;t.height=null;var s=Gn(t)-a;s&&kr(r,r.height+s)}})},$o.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=ni(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},$o.prototype.detachLine=function(e){if(this.lines.splice(ni(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Fo=0,zo=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Zr(zo),zo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Vr(this,"clear")}},zo.prototype.find=function(e,t){return this.primary.find(e,t)};var Oo=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};Zr(Oo),Oo.prototype.clear=function(){var e=this.cm,t=this.line.widgets,n=this.line,r=Cr(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=Gn(this);Ze(e,function(){Kn(e,n,-o),it(e,r,"widget"),kr(n,Math.max(0,n.height-o))})}},Oo.prototype.changed=function(){var e=this.height,t=this.cm,n=this.line;this.height=null;var r=Gn(this)-e;r&&Ze(t,function(){t.curOp.forceUpdate=!0,Kn(t,n,r),kr(n,n.height+r)})};var Ro=e.Line=function(e,t,n){this.text=e,In(this,t),this.height=n?n(this):1};Zr(Ro),Ro.prototype.lineNo=function(){return Cr(this)};var jo={},qo={};mr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,Qn(i),Vr(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},vr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof mr))){var s=[];this.collapse(s),this.children=[new mr(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>=e){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var a=i.lines.splice(i.lines.length-25,25),s=new mr(a);i.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new vr(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=ni(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new vr(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>e){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var Po=0,Ho=e.Doc=function(e,t,n){if(!(this instanceof Ho))return new Ho(e,t,n);null==n&&(n=0),vr.call(this,[new mr([new Ro("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=oo(n,0);this.sel=Y(r),this.history=new Er(null),this.id=++Po,this.modeOption=t,"string"==typeof e&&(e=va(e)),gr(this,{from:r,to:r,text:e}),ce(this,Y(r),na)};Ho.prototype=ii(vr.prototype,{constructor:Ho,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=wr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:et(function(e){var t=oo(this.first,0),n=this.first+this.size-1;Gt(this,{from:t,to:oo(n,xr(this,n).text.length),text:va(e),origin:"setValue"},!0),ce(this,Y(t))}),replaceRange:function(e,t,n,r){t=Q(this,t),n=n?Q(this,n):t,tn(this,e,t,n,r)},getRange:function(e,t,n){var r=_r(this,Q(this,e),Q(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ee(this,e)?xr(this,e):void 0},getLineNumber:function(e){return Cr(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=xr(this,e)),Pn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Q(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:et(function(e,t,n){ae(this,Q(this,"number"==typeof e?oo(e,t||0):e),null,n)}),setSelection:et(function(e,t,n){ae(this,Q(this,e),Q(this,t||e),n)}),extendSelection:et(function(e,t,n){re(this,Q(this,e),t&&Q(this,t),n)}),extendSelections:et(function(e,t){ie(this,te(this,e,t))}),extendSelectionsBy:et(function(e,t){ie(this,ri(this.sel.ranges,e),t)}),setSelections:et(function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new K(Q(this,e[r].anchor),Q(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ce(this,G(i,t),n)}}),addSelection:et(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new K(Q(this,e),Q(this,t||e))),ce(this,G(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=_r(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=_r(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||"\n")),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:et(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:va(e[o]),origin:n}}for(var s=t&&"end"!=t&&Xt(this,r,t),o=r.length-1;o>=0;o--)Gt(this,r[o]);s?le(this,s):this.cm&&ln(this.cm)}),undo:et(function(){Zt(this,"undo")}),redo:et(function(){Zt(this,"redo")}),undoSelection:et(function(){Zt(this,"undo",!0)}),redoSelection:et(function(){Zt(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Er(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Rr(this.history.done),undone:Rr(this.history.undone)}},setHistory:function(e){var t=this.history=new Er(this.history.maxGeneration);t.done=Rr(e.done.slice(0),null,!0),t.undone=Rr(e.undone.slice(0),null,!0)},addLineClass:et(function(e,t,n){return dn(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[r]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:et(function(e,t,n){return dn(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),markText:function(e,t,n){return bn(this,Q(this,e),Q(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Q(this,e),bn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Q(this,e);var t=[],n=xr(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Q(this,e),t=Q(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];i==e.line&&e.ch>l.to||null==l.from&&i!=e.line||i==t.line&&l.from>t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),Q(this,oo(n,t))},indexFromPos:function(e){e=Q(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Ho(wr(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Ho(wr(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],_n(r,xn(this)),r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),wn(xn(this));break}}if(t.history==this.history){var i=[t.id];br(t,function(e){i.push(e.id)},!0),t.history=new Er(null),t.history.done=Rr(this.history.done,i),t.history.undone=Rr(this.history.undone,i)}},iterLinkedDocs:function(e){br(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Ho.prototype.eachLine=Ho.prototype.iter;var Wo="iter insert remove copy getEditor".split(" ");for(var Uo in Ho.prototype)Ho.prototype.hasOwnProperty(Uo)&&ni(Wo,Uo)<0&&(e.prototype[Uo]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ho.prototype[Uo]));Zr(Ho);var Vo,Xo=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Ko=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Go=e.e_stop=function(e){Xo(e),Ko(e)},Yo=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},Zo=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){
r.splice(i,1);break}}},Qo=e.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},Jo=0,ea=30,ta=e.Pass={toString:function(){return"CodeMirror.Pass"}},na={scroll:!1},ra={origin:"*mouse"},ia={origin:"+move"};Qr.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var oa=e.countColumn=function(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=r||0,a=i||0;;){var s=e.indexOf("	",o);if(0>s||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}},aa=[""],sa=function(e){e.select()};Yi?sa=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:ji&&(sa=function(e){try{e.select()}catch(t){}}),[].indexOf&&(ni=function(e,t){return e.indexOf(t)}),[].map&&(ri=function(e,t){return e.map(t)});var la,ca=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ua=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ca.test(e))},da=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;la=document.createRange?function(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r}:function(e,t,n){var r=document.body.createTextRange();return r.moveToElementText(e.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},ji&&11>qi&&(pi=function(){try{return document.activeElement}catch(e){return document.body}});var ha,fa,pa,ga=!1,ma=function(){if(ji&&9>qi)return!1;var e=ui("div");return"draggable"in e||"dragDrop"in e}(),va=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},ba=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},ya=function(){var e=ui("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),xa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=xa,function(){for(var e=0;10>e;e++)xa[e+48]=xa[e+96]=String(e);for(var e=65;90>=e;e++)xa[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)xa[e+111]=xa[e+63235]="F"+e}();var _a,wa=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?r.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!i.test(n))return!1;for(var r,u=n.length,d=[],h=0;u>h;++h)d.push(r=e(n.charCodeAt(h)));for(var h=0,f=c;u>h;++h){var r=d[h];"m"==r?d[h]=f:f=r}for(var h=0,p=c;u>h;++h){var r=d[h];"1"==r&&"r"==p?d[h]="n":a.test(r)&&(p=r,"r"==r&&(d[h]="R"))}for(var h=1,f=d[0];u-1>h;++h){var r=d[h];"+"==r&&"1"==f&&"1"==d[h+1]?d[h]="1":","!=r||f!=d[h+1]||"1"!=f&&"n"!=f||(d[h]=f),f=r}for(var h=0;u>h;++h){var r=d[h];if(","==r)d[h]="N";else if("%"==r){for(var g=h+1;u>g&&"%"==d[g];++g);for(var m=h&&"!"==d[h-1]||u>g&&"1"==d[g]?"1":"N",v=h;g>v;++v)d[v]=m;h=g-1}}for(var h=0,p=c;u>h;++h){var r=d[h];"L"==p&&"1"==r?d[h]="L":a.test(r)&&(p=r)}for(var h=0;u>h;++h)if(o.test(d[h])){for(var g=h+1;u>g&&o.test(d[g]);++g);for(var b="L"==(h?d[h-1]:c),y="L"==(u>g?d[g]:c),m=b||y?"L":"R",v=h;g>v;++v)d[v]=m;h=g-1}for(var x,_=[],h=0;u>h;)if(s.test(d[h])){var w=h;for(++h;u>h&&s.test(d[h]);++h);_.push(new t(0,w,h))}else{var k=h,C=_.length;for(++h;u>h&&"L"!=d[h];++h);for(var v=k;h>v;)if(l.test(d[v])){v>k&&_.splice(C,0,new t(1,k,v));var S=v;for(++v;h>v&&l.test(d[v]);++v);_.splice(C,0,new t(2,S,v)),k=v}else++v;h>k&&_.splice(C,0,new t(1,k,h))}return 1==_[0].level&&(x=n.match(/^\s+/))&&(_[0].from=x[0].length,_.unshift(new t(0,0,x[0].length))),1==ti(_).level&&(x=n.match(/\s+$/))&&(ti(_).to-=x[0].length,_.push(new t(0,u-x[0].length,u))),_[0].level!=ti(_).level&&_.push(new t(_[0].level,u,u)),_}}();return e.version="4.3.0",e}),define("codemirror",["codemirror/lib/codemirror"],function(e){return e}),define("autoSave",["jquery"],function(e){"use strict";var t,n,r,i;return n=void 0,i=void 0,r=void 0,t=function(){},t.prototype.bind=function(t,i){var o,a,s,l;o=e("#editorStatus"),n=t,this.form=i,r=this,e("[name=title]").on("input",function(){""!==e.trim(e(this).val())&&r.change(),window.localStorage&&localStorage.setItem("autoSaveTitle_"+location.pathname+location.search,e(this).val())}),e("[name=tags]").on("change",function(){""!==e.trim(e(this).val())&&r.change()}),a=e("#license"),a.length&&a.on("change",function(){return r.change()}),l=e(".reasons"),l.length&&l.on("click",function(){return r.change()}),s=e("input[name=noticeAnswerers]"),s.length&&s.on("change",function(){return r.change()}),n.change?n.change(function(){""!==e.trim(n.getVal())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getVal())}):n.on("change",function(){""!==e.trim(n.getValue())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getValue())}),e("#dropIt").unbind(),e("#dropIt").click(function(){e.post("/api/draft/"+e("#draftId").val()+"/delete",function(t){0===t.status?(o.html("已舍弃"),e("#draftId").val(""),window.localStorage&&localStorage.removeItem("autoSaveContent_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTitle_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTag_"+location.pathname)):o.html("舍弃失败"),e("#dropIt").addClass("hidden")})})},t.prototype.change=function(){var t;t=e("#editorStatus"),t.html("保存中...").removeClass("hidden"),e("#dropIt").addClass("hidden"),clearTimeout(i),i=setTimeout(function(){r.save()},4e3)},t.prototype.save=function(){var t,n,r;t=e("#editorStatus"),n=this,e("#answerIt, #publishIt").attr("disabled")||(r=new n.form,e.post("/api/"+r.type+"/draft/save",r,function(n){0===n.status?(t.html("已保存草稿"),e("#dropIt").data("id",n.data).removeClass("hidden"),e("#draftId").val(n.data),window.localStorage&&(window.localStorage.removeItem("autoSaveContent_"+location.pathname+location.search),window.localStorage.removeItem("autoSaveTitle_"+location.pathname+location.search))):t.html("保存失败"),e("#publishIt, #answerIt").removeAttr("disabled")}))},new t}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/python/python",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function n(e){return e.scopes[e.scopes.length-1]}var r=t(["and","or","not","is","in"]),i=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],o=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],a={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},s={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};e.registerHelper("hintWords","python",i.concat(o)),e.defineMode("python",function(l,c){function u(e,t){if(e.sol()&&"py"==n(t).type){var r=n(t).offset;if(e.eatSpace()){var i=e.indentation();return i>r?f(e,t,"py"):r>i&&p(e,t)&&(t.errorToken=!0),null}var o=d(e,t);return r>0&&p(e,t)&&(o+=" "+m),o}return d(e,t)}function d(e,t){if(e.eatSpace())return null;var n=e.peek();if("#"==n)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var i=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),e.match(/^\d+\.\d*/)&&(i=!0),e.match(/^\.\d+/)&&(i=!0),i)return e.eat(/J/i),"number";var o=!1;if(e.match(/^0x[0-9a-f]+/i)&&(o=!0),e.match(/^0b[01]+/i)&&(o=!0),e.match(/^0o[0-7]+/i)&&(o=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),o=!0),e.match(/^0(?![\dx])/i)&&(o=!0),o)return e.eat(/L/i),"number"}return e.match(D)?(t.tokenize=h(e.current()),t.tokenize(e,t)):e.match(_)||e.match(x)?null:e.match(y)||e.match(v)||e.match(r)?"operator":e.match(b)?null:e.match(T)?"keyword":e.match(E)?"builtin":e.match(/^(self|cls)\b/)?"variable-2":e.match(w)?"def"==t.lastToken||"class"==t.lastToken?"def":"variable":(e.next(),m)}function h(e){function t(t,i){for(;!t.eol();)if(t.eatWhile(/[^'"\\]/),t.eat("\\")){if(t.next(),n&&t.eol())return r}else{if(t.match(e))return i.tokenize=u,r;t.eat(/['"]/)}if(n){if(c.singleLineStringErrors)return m;i.tokenize=u}return r}for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var n=1==e.length,r="string";return t.isString=!0,t}function f(e,t,r){var i=0,o=null;if("py"==r)for(;"py"!=n(t).type;)t.scopes.pop();i=n(t).offset+~~("py"==r?l.indentUnit:k),"py"==r||e.match(/^(\s|#.*)*$/,!1)||(o=e.column()+1),t.scopes.push({offset:i,type:r,align:o})}function p(e,t){for(var r=e.indentation();n(t).offset>r;){if("py"!=n(t).type)return!0;t.scopes.pop()}return n(t).offset!=r}function g(e,t){var r=t.tokenize(e,t),i=e.current();if("."==i)return r=e.match(w,!1)?null:m,null==r&&"meta"==t.lastStyle&&(r="meta"),r;if("@"==i)return e.match(w,!1)?"meta":m;"variable"!=r&&"builtin"!=r||"meta"!=t.lastStyle||(r="meta"),("pass"==i||"return"==i)&&(t.dedent+=1),"lambda"==i&&(t.lambda=!0),":"!=i||t.lambda||"py"!=n(t).type||f(e,t,"py");var o=1==i.length?"[({".indexOf(i):-1;if(-1!=o&&f(e,t,"])}".slice(o,o+1)),o="])}".indexOf(i),-1!=o){if(n(t).type!=i)return m;t.scopes.pop()}return t.dedent>0&&e.eol()&&"py"==n(t).type&&(t.scopes.length>1&&t.scopes.pop(),t.dedent-=1),r}var m="error",v=c.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),b=c.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),y=c.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),x=c.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),_=c.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),w=c.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),k=c.hangingIndent||l.indentUnit,C=i,S=o;if(void 0!=c.extra_keywords&&(C=C.concat(c.extra_keywords)),void 0!=c.extra_builtins&&(S=S.concat(c.extra_builtins)),c.version&&3==parseInt(c.version,10)){C=C.concat(s.keywords),S=S.concat(s.builtins);var D=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{C=C.concat(a.keywords),S=S.concat(a.builtins);var D=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var T=t(C),E=t(S),M={startState:function(e){return{tokenize:u,scopes:[{offset:e||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=t.errorToken;n&&(t.errorToken=!1);var r=g(e,t);t.lastStyle=r;var i=e.current();return i&&r&&(t.lastToken=i),e.eol()&&t.lambda&&(t.lambda=!1),n?r+" "+m:r},indent:function(t,r){if(t.tokenize!=u)return t.tokenize.isString?e.Pass:0;var i=n(t),o=r&&r.charAt(0)==i.type;return null!=i.align?i.align-(o?1:0):o&&t.scopes.length>1?t.scopes[t.scopes.length-2].offset:i.offset},lineComment:"#",fold:"indent"};return M}),e.defineMIME("text/x-python","python");var l=function(e){return e.split(" ")};e.defineMIME("text/x-cython",{name:"python",extra_keywords:l("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/ruby/ruby",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("ruby",function(e){function t(e){for(var t={},n=0,r=e.length;r>n;++n)t[e[n]]=!0;return t}function n(e,t,n){return n.tokenize.push(e),e(t,n)}function r(e,t){if(c=null,e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(l),"comment";if(e.eatSpace())return null;var r,i=e.next();if("`"==i||"'"==i||'"'==i)return n(a(i,"string",'"'==i||"`"==i),e,t);if("/"!=i||e.eol()||" "==e.peek()){if("%"==i){var o="string",u=!0;e.eat("s")?o="atom":e.eat(/[WQ]/)?o="string":e.eat(/[r]/)?o="string-2":e.eat(/[wxq]/)&&(o="string",u=!1);var d=e.eat(/[^\w\s]/);return d?(f.propertyIsEnumerable(d)&&(d=f[d]),n(a(d,o,u,!0),e,t)):"operator"}if("#"==i)return e.skipToEnd(),"comment";if("<"==i&&(r=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return n(s(r[1]),e,t);if("0"==i)return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(i))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==i){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}return":"==i?e.eat("'")?n(a("'","atom",!1),e,t):e.eat('"')?n(a('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_]/)?(e.eatWhile(/[\w]/),e.eat(/[\?\!\=]/),"atom"):"operator":"@"==i&&e.match(/^@?[a-zA-Z_]/)?(e.eat("@"),e.eatWhile(/[\w]/),"variable-2"):"$"==i?(e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3"):/[a-zA-Z_]/.test(i)?(e.eatWhile(/[\w]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident"):"|"!=i||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok?/[\(\)\[\]{}\\;]/.test(i)?(c=i,null):"-"==i&&e.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(i)?(e.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(c="|",null)}return e.eat("=")?"operator":n(a(i,"string-2",!0),e,t)}function i(){var e=1;return function(t,n){if("}"==t.peek()){if(e--,0==e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else"{"==t.peek()&&e++;return r(t,n)}}function o(){var e=!1;return function(t,n){return e?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)):(e=!0,r(t,n))}}function a(e,t,n,r){return function(a,s){var l,c=!1;for("read-quoted-paused"===s.context.type&&(s.context=s.context.prev,a.eat("}"));null!=(l=a.next());){if(l==e&&(r||!c)){s.tokenize.pop();break}if(n&&"#"==l&&!c){if(a.eat("{")){"}"==e&&(s.context={prev:s.context,type:"read-quoted-paused"}),s.tokenize.push(i());break}if(/[@\$]/.test(a.peek())){s.tokenize.push(o());break}}c=!c&&"\\"==l}return t}}function s(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function l(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var c,u=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),d=t(["def","class","case","for","while","module","then","catch","loop","proc","begin"]),h=t(["end","until"]),f={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[r],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var n,r=t.tokenize[t.tokenize.length-1](e,t);if("ident"==r){var i=e.current();r=u.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(i)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable",d.propertyIsEnumerable(i)?n="indent":h.propertyIsEnumerable(i)?n="dedent":"if"!=i&&"unless"!=i||e.column()!=e.indentation()?"do"==i&&t.context.indented<t.indented&&(n="indent"):n="indent"}return(c||r&&"comment"!=r)&&(t.lastTok=i||c||r),"|"==c&&(t.varList=!t.varList),"indent"==n||/[\(\[\{]/.test(c)?t.context={prev:t.context,type:c||r,indented:t.indented}:("dedent"==n||/[\)\]\}]/.test(c))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==c||"operator"==r),r},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=r)return 0;var i=n&&n.charAt(0),o=t.context,a=o.type==f[i]||"keyword"==o.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return o.indented+(a?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricChars:"}de",lineComment:"#"}}),e.defineMIME("text/x-ruby","ruby")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/xml/xml",["codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,n){function r(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(s(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta"):(k=e.eat("/")?"closeTag":"openTag",t.tokenize=i,"tag bracket");if("&"==r){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function i(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=r,k=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return k="equals",null;if("<"==n){t.tokenize=r,t.state=d,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=o(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"};return t.isInAttribute=!0,t}function a(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=r;break}n.next()}return e}}function s(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=s(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=r;break}return n.tokenize=s(e-1),n.tokenize(t,n)}}return"meta"}}function l(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(S.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!S.contextGrabbers.hasOwnProperty(n)||!S.contextGrabbers[n].hasOwnProperty(t))return;c(e)}}function d(e,t,n){return"openTag"==e?(n.tagStart=t.column(),h):"closeTag"==e?f:d}function h(e,t,n){return"word"==e?(n.tagName=t.current(),C="tag",m):(C="error",h)}function f(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&S.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==r?(C="tag",p):(C="tag error",g)}return C="error",g}function p(e,t,n){return"endTag"!=e?(C="error",p):(c(n),d)}function g(e,t,n){return C="error",p(e,t,n)}function m(e,t,n){if("word"==e)return C="attribute",v;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||S.autoSelfClosers.hasOwnProperty(r)?u(n,r):(u(n,r),n.context=new l(n,r,i==n.indented)),d}return C="error",m}function v(e,t,n){return"equals"==e?b:(S.allowMissing||(C="error"),m(e,t,n))}function b(e,t,n){return"string"==e?y:"word"==e&&S.allowUnquoted?(C="string",m):(C="error",m(e,t,n))}function y(e,t,n){return"string"==e?y:m(e,t,n)}var x=t.indentUnit,_=n.multilineTagIndentFactor||1,w=n.multilineTagIndentPastTag;null==w&&(w=!0);var k,C,S=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},D=n.alignCDATA;return{startState:function(){return{tokenize:r,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;k=null;var n=t.tokenize(e,t);return(n||k)&&"comment"!=n&&(C=null,t.state=t.state(k||n,e,t),C&&(n="error"==C?n+" error":C)),n},indent:function(t,n,o){var a=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+x;if(a&&a.noIndent)return e.Pass;if(t.tokenize!=i&&t.tokenize!=r)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return w?t.tagStart+t.tagName.length+2:t.tagStart+x*_;if(D&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;a;){if(a.tagName==s[2]){a=a.prev;break}if(!S.implicitlyClosed.hasOwnProperty(a.tagName))break;a=a.prev}else if(s)for(;a;){var l=S.contextGrabbers[a.tagName];if(!l||!l.hasOwnProperty(s[2]))break;a=a.prev}for(;a&&!a.startOfLine;)a=a.prev;return a?a.indent+x:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/javascript/javascript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,n){function r(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function i(e,t,n){return pe=e,ge=n,t}function o(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=a(n),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==n&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if("="==n&&e.eat(">"))return i("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==n)return e.eat("*")?(t.tokenize=s,s(e,t)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(r(e),e.eatWhile(/[gimy]/),i("regexp","string-2")):(e.eatWhile(we),i("operator","operator",e.current()));if("`"==n)return t.tokenize=l,l(e,t);if("#"==n)return e.skipToEnd(),i("error","error");if(we.test(n))return e.eatWhile(we),i("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var o=e.current(),c=_e.propertyIsEnumerable(o)&&_e[o];return c&&"."!=t.lastType?i(c.type,c.style,o):i("variable","variable",o)}function a(e){return function(t,n){var r,a=!1;if(be&&"@"==t.peek()&&t.match(ke))return n.tokenize=o,i("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=e||a);)a=!a&&"\\"==r;return a||(n.tokenize=o),i("string","string")}}function s(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=o;break}r="*"==n}return i("comment","comment")}function l(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=o;break}r=!r&&"\\"==n}return i("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(0>n)){for(var r=0,i=!1,o=n-1;o>=0;--o){var a=e.string.charAt(o),s=Ce.indexOf(a);if(s>=0&&3>s){if(!r){++o;break}if(0==--r)break}else if(s>=3&&6>s)++r;else if(/[$\w]/.test(a))i=!0;else if(i&&!r){++o;break}}i&&!r&&(t.fatArrowAt=o)}}function u(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function h(e,t,n,r,i){var o=e.cc;for(De.state=e,De.stream=i,De.marked=null,De.cc=o,De.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=o.length?o.pop():ye?w:_;if(a(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return De.marked?De.marked:"variable"==n&&d(e,r)?"variable-2":t}}}function f(){for(var e=arguments.length-1;e>=0;e--)De.cc.push(arguments[e])}function p(){return f.apply(null,arguments),!0}function g(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var r=De.state;if(r.context){if(De.marked="def",t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function m(){De.state.context={prev:De.state.context,vars:De.state.localVars},De.state.localVars=Te}function v(){De.state.localVars=De.state.context.vars,De.state.context=De.state.context.prev}function b(e,t){var n=function(){var n=De.state,r=n.indented;"stat"==n.lexical.type&&(r=n.lexical.indented),n.lexical=new u(r,De.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function y(){var e=De.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function x(e){function t(n){return n==e?p():";"==e?f():p(t)}return t}function _(e,t){return"var"==e?p(b("vardef",t.length),H,x(";"),y):"keyword a"==e?p(b("form"),w,_,y):"keyword b"==e?p(b("form"),_,y):"{"==e?p(b("}"),j,y):";"==e?p():"if"==e?("else"==De.state.lexical.info&&De.state.cc[De.state.cc.length-1]==y&&De.state.cc.pop()(),p(b("form"),w,_,y,K)):"function"==e?p(ee):"for"==e?p(b("form"),G,_,y):"variable"==e?p(b("stat"),N):"switch"==e?p(b("form"),w,b("}","switch"),x("{"),j,y,y):"case"==e?p(w,x(":")):"default"==e?p(x(":")):"catch"==e?p(b("form"),m,x("("),te,x(")"),_,y,v):"module"==e?p(b("form"),m,ae,v,y):"class"==e?p(b("form"),ne,y):"export"==e?p(b("form"),se,y):"import"==e?p(b("form"),le,y):f(b("stat"),w,x(";"),y)}function w(e){return C(e,!1)}function k(e){return C(e,!0)}function C(e,t){if(De.state.fatArrowAt==De.stream.start){var n=t?A:B;if("("==e)return p(m,b(")"),O(W,")"),y,x("=>"),n,v);if("variable"==e)return f(m,W,x("=>"),n,v)}var r=t?E:T;return Se.hasOwnProperty(e)?p(r):"function"==e?p(ee,r):"keyword c"==e?p(t?D:S):"("==e?p(b(")"),S,fe,x(")"),y,r):"operator"==e||"spread"==e?p(t?k:w):"["==e?p(b("]"),de,y,r):"{"==e?R($,"}",null,r):"quasi"==e?f(M,r):p()}function S(e){return e.match(/[;\}\)\],]/)?f():f(w)}function D(e){return e.match(/[;\}\)\],]/)?f():f(k)}function T(e,t){return","==e?p(w):E(e,t,!1)}function E(e,t,n){var r=0==n?T:E,i=0==n?w:k;return"=>"==t?p(m,n?A:B,v):"operator"==e?/\+\+|--/.test(t)?p(r):"?"==t?p(w,x(":"),i):p(i):"quasi"==e?f(M,r):";"!=e?"("==e?R(k,")","call",r):"."==e?p(I,r):"["==e?p(b("]"),S,x("]"),y,r):void 0:void 0}function M(e,t){return"quasi"!=e?f():"${"!=t.slice(t.length-2)?p(M):p(w,L)}function L(e){return"}"==e?(De.marked="string-2",De.state.tokenize=l,p(M)):void 0}function B(e){return c(De.stream,De.state),f("{"==e?_:w)}function A(e){return c(De.stream,De.state),f("{"==e?_:k)}function N(e){return":"==e?p(y,_):f(T,x(";"),y)}function I(e){return"variable"==e?(De.marked="property",p()):void 0}function $(e,t){return"variable"==e||"keyword"==De.style?(De.marked="property",p("get"==t||"set"==t?F:z)):"number"==e||"string"==e?(De.marked=be?"property":De.style+" property",p(z)):"jsonld-keyword"==e?p(z):"["==e?p(w,x("]"),z):void 0}function F(e){return"variable"!=e?f(z):(De.marked="property",p(ee))}function z(e){return":"==e?p(k):"("==e?f(ee):void 0}function O(e,t){function n(r){if(","==r){var i=De.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),p(e,n)}return r==t?p():p(x(t))}return function(r){return r==t?p():f(e,n)}}function R(e,t,n){for(var r=3;r<arguments.length;r++)De.cc.push(arguments[r]);return p(b(t,n),O(e,t),y)}function j(e){return"}"==e?p():f(_,j)}function q(e){return xe&&":"==e?p(P):void 0}function P(e){return"variable"==e?(De.marked="variable-3",p()):void 0}function H(){return f(W,q,V,X)}function W(e,t){return"variable"==e?(g(t),p()):"["==e?R(W,"]"):"{"==e?R(U,"}"):void 0}function U(e,t){return"variable"!=e||De.stream.match(/^\s*:/,!1)?("variable"==e&&(De.marked="property"),
p(x(":"),W,V)):(g(t),p(V))}function V(e,t){return"="==t?p(k):void 0}function X(e){return","==e?p(H):void 0}function K(e,t){return"keyword b"==e&&"else"==t?p(b("form","else"),_,y):void 0}function G(e){return"("==e?p(b(")"),Y,x(")"),y):void 0}function Y(e){return"var"==e?p(H,x(";"),Q):";"==e?p(Q):"variable"==e?p(Z):f(w,x(";"),Q)}function Z(e,t){return"in"==t||"of"==t?(De.marked="keyword",p(w)):p(T,Q)}function Q(e,t){return";"==e?p(J):"in"==t||"of"==t?(De.marked="keyword",p(w)):f(w,x(";"),J)}function J(e){")"!=e&&p(w)}function ee(e,t){return"*"==t?(De.marked="keyword",p(ee)):"variable"==e?(g(t),p(ee)):"("==e?p(m,b(")"),O(te,")"),y,_,v):void 0}function te(e){return"spread"==e?p(te):f(W,q)}function ne(e,t){return"variable"==e?(g(t),p(re)):void 0}function re(e,t){return"extends"==t?p(w,re):"{"==e?p(b("}"),ie,y):void 0}function ie(e,t){return"variable"==e||"keyword"==De.style?(De.marked="property","get"==t||"set"==t?p(oe,ee,ie):p(ee,ie)):"*"==t?(De.marked="keyword",p(ie)):";"==e?p(ie):"}"==e?p():void 0}function oe(e){return"variable"!=e?f():(De.marked="property",p())}function ae(e,t){return"string"==e?p(_):"variable"==e?(g(t),p(ue)):void 0}function se(e,t){return"*"==t?(De.marked="keyword",p(ue,x(";"))):"default"==t?(De.marked="keyword",p(w,x(";"))):f(_)}function le(e){return"string"==e?p():f(ce,ue)}function ce(e,t){return"{"==e?R(ce,"}"):("variable"==e&&g(t),p())}function ue(e,t){return"from"==t?(De.marked="keyword",p(w)):void 0}function de(e){return"]"==e?p():f(k,he)}function he(e){return"for"==e?f(fe,x("]")):","==e?p(O(k,"]")):f(O(k,"]"))}function fe(e){return"for"==e?p(G,fe):"if"==e?p(w,fe):void 0}var pe,ge,me=t.indentUnit,ve=n.statementIndent,be=n.jsonld,ye=n.json||be,xe=n.typescript,_e=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},a={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"debugger":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":r,"export":e("export"),"import":e("import"),"extends":r};if(xe){var s={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:s,number:s,bool:s,any:s};for(var c in l)a[c]=l[c]}return a}(),we=/[+\-*&%=<>!?|~^]/,ke=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ce="([{}])",Se={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},De={state:null,column:null,marked:null,cc:null},Te={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(e){var t={tokenize:o,lastType:"sof",cc:[],lexical:new u((e||0)-me,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=s&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==pe?n:(t.lastType="operator"!=pe||"++"!=ge&&"--"!=ge?pe:"incdec",h(t,n,pe,ge,e))},indent:function(t,r){if(t.tokenize==s)return e.Pass;if(t.tokenize!=o)return 0;var i=r&&r.charAt(0),a=t.lexical;if(!/^\s*else\b/.test(r))for(var l=t.cc.length-1;l>=0;--l){var c=t.cc[l];if(c==y)a=a.prev;else if(c!=K)break}"stat"==a.type&&"}"==i&&(a=a.prev),ve&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var u=a.type,d=i==u;return"vardef"==u?a.indented+("operator"==t.lastType||","==t.lastType?a.info+1:0):"form"==u&&"{"==i?a.indented:"form"==u?a.indented+me:"stat"==u?a.indented+("operator"==t.lastType||","==t.lastType?ve||me:0):"switch"!=a.info||d||0==n.doubleIndentSwitch?a.align?a.column+(d?0:1):a.indented+(d?0:me):a.indented+(/^(?:case|default)\b/.test(r)?me:2*me)},electricChars:":{}",blockCommentStart:ye?null:"/*",blockCommentEnd:ye?null:"*/",lineComment:ye?null:"//",fold:"brace",helperType:ye?"json":"javascript",jsonldMode:be,jsonMode:ye}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/css/css",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}function n(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}function r(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,n){function r(e,t){return f=t,e}function i(e,t){var n=e.next();if(m[n]){var i=m[n](e,t);if(i!==!1)return i}return"@"==n?(e.eatWhile(/[\w\\\-]/),r("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?r(null,"compare"):'"'==n||"'"==n?(t.tokenize=o(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),r("atom","hash")):"!"==n?(e.match(/^\s*\w*/),r("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),r("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?r(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?r("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?r(null,n):"u"==n&&e.match("rl(")?(e.backUp(1),t.tokenize=a,r("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),r("property","word")):r(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),r("number","unit")):e.match(/^\w+-/)?r("meta","meta"):void 0}function o(e){return function(t,n){for(var i,o=!1;null!=(i=t.next());){if(i==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==i}return(i==e||!o&&")"!=e)&&(n.tokenize=null),r("string","string")}}function a(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=o(")"),r(null,"(")}function s(e,t,n){this.type=e,this.indent=t,this.prev=n}function l(e,t,n){return e.context=new s(n,t.indentation()+g,e.context),n}function c(e){return e.context=e.context.prev,e.context.type}function u(e,t,n){return S[n.context.type](e,t,n)}function d(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return u(e,t,n)}function h(e){var t=e.current().toLowerCase();p=w.hasOwnProperty(t)?"atom":_.hasOwnProperty(t)?"keyword":"variable"}n.propertyKeywords||(n=e.resolveMode("text/css"));var f,p,g=t.indentUnit,m=n.tokenHooks,v=n.mediaTypes||{},b=n.mediaFeatures||{},y=n.propertyKeywords||{},x=n.nonStandardPropertyKeywords||{},_=n.colorKeywords||{},w=n.valueKeywords||{},k=n.fontProperties||{},C=n.allowNested,S={};return S.top=function(e,t,n){if("{"==e)return l(n,t,"block");if("}"==e&&n.context.prev)return c(n);if("@media"==e)return l(n,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(n,t,"at");if("hash"==e)p="builtin";else if("word"==e)p="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(n,t,"interpolation");if(":"==e)return"pseudo";if(C&&"("==e)return l(n,t,"parens")}return n.context.type},S.block=function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return y.hasOwnProperty(r)?(p="property","maybeprop"):x.hasOwnProperty(r)?(p="string-2","maybeprop"):C?(p=t.match(/^\s*:/,!1)?"property":"tag","block"):(p+=" error","maybeprop")}return"meta"==e?"block":C||"hash"!=e&&"qualifier"!=e?S.top(e,t,n):(p="error","block")},S.maybeprop=function(e,t,n){return":"==e?l(n,t,"prop"):u(e,t,n)},S.prop=function(e,t,n){if(";"==e)return c(n);if("{"==e&&C)return l(n,t,"propBlock");if("}"==e||"{"==e)return d(e,t,n);if("("==e)return l(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)h(t);else if("interpolation"==e)return l(n,t,"interpolation")}else p+=" error";return"prop"},S.propBlock=function(e,t,n){return"}"==e?c(n):"word"==e?(p="property","maybeprop"):n.context.type},S.parens=function(e,t,n){return"{"==e||"}"==e?d(e,t,n):")"==e?c(n):"("==e?l(n,t,"parens"):("word"==e&&h(t),"parens")},S.pseudo=function(e,t,n){return"word"==e?(p="variable-3",n.context.type):u(e,t,n)},S.media=function(e,t,n){if("("==e)return l(n,t,"media_parens");if("}"==e)return d(e,t,n);if("{"==e)return c(n)&&l(n,t,C?"block":"top");if("word"==e){var r=t.current().toLowerCase();p="only"==r||"not"==r||"and"==r?"keyword":v.hasOwnProperty(r)?"attribute":b.hasOwnProperty(r)?"property":"error"}return n.context.type},S.media_parens=function(e,t,n){return")"==e?c(n):"{"==e||"}"==e?d(e,t,n,2):S.media(e,t,n)},S.font_face_before=function(e,t,n){return"{"==e?l(n,t,"font_face"):u(e,t,n)},S.font_face=function(e,t,n){return"}"==e?c(n):"word"==e?(p=k.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},S.keyframes=function(e,t,n){return"word"==e?(p="variable","keyframes"):"{"==e?l(n,t,"top"):u(e,t,n)},S.at=function(e,t,n){return";"==e?c(n):"{"==e||"}"==e?d(e,t,n):("word"==e?p="tag":"hash"==e&&(p="builtin"),"at")},S.interpolation=function(e,t,n){return"}"==e?c(n):"{"==e||";"==e?d(e,t,n):("variable"!=e&&(p="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new s("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||i)(e,t);return n&&"object"==typeof n&&(f=n[1],n=n[0]),p=n,t.state=S[t.state](f,e,t),p},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),!n.prev||("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"font_face"!=n.type)&&(")"!=r||"parens"!=n.type&&"media_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"media"!=n.type)||(i=n.indent-g,n=n.prev),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(i),a=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],s=t(a),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],c=t(l),u=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],u=t(u),d=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],h=t(d),f=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],p=t(f),g=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],m=t(g),v=i.concat(a).concat(l).concat(u).concat(d).concat(f);e.registerHelper("hintWords","css",v),e.defineMIME("text/css",{mediaTypes:o,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:h,valueKeywords:p,fontProperties:m,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=r,r(e,t)):!1},"/":function(e,t){return e.eat("*")?(t.tokenize=n,n(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:h,valueKeywords:p,fontProperties:m,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:h,valueKeywords:p,fontProperties:m,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("htmlmixed",function(t,n){function r(e,t){var n=t.htmlState.tagName,r=s.token(e,t.htmlState);if("script"==n&&/\btag\b/.test(r)&&">"==e.current()){var i=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);i=i?i[1]:"",i&&/[\"\']/.test(i.charAt(0))&&(i=i.slice(1,i.length-1));for(var u=0;u<c.length;++u){var d=c[u];if("string"==typeof d.matches?i==d.matches:d.matches.test(i)){d.mode&&(t.token=o,t.localMode=d.mode,t.localState=d.mode.startState&&d.mode.startState(s.indent(t.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(r)&&">"==e.current()&&(t.token=a,t.localMode=l,t.localState=l.startState(s.indent(t.htmlState,"")));return r}function i(e,t,n){var r,i=e.current(),o=i.search(t);return o>-1?e.backUp(i.length-o):(r=i.match(/<\/?$/))&&(e.backUp(i.length),e.match(t,!1)||e.match(i)),n}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=r,t.localState=t.localMode=null,r(e,t)):i(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function a(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=r,t.localState=t.localMode=null,r(e,t)):i(e,/<\/\s*style\s*>/,l.token(e,t.localState))}var s=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),l=e.getMode(t,"css"),c=[],u=n&&n.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),u)for(var d=0;d<u.length;++d){var h=u[d];c.push({matches:h.matches,mode:h.mode&&e.getMode(t,h.mode)})}return c.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){var e=s.startState();return{token:r,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var n=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:n,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n){return!t.localMode||/^\s*<\//.test(n)?s.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/clike/clike",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e,t){if(!t.startOfLine)return!1;for(;;){if(!e.skipTo("\\")){e.skipToEnd(),t.tokenize=null;break}if(e.next(),e.eol()){t.tokenize=n;break}}return"meta"}function r(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return n?(t.cpp11RawStringDelim=n[1],t.tokenize=o,o(e,t)):!1}return e.match(/(u8|u|U|L)/)?e.match(/["']/,!1)?"string":!1:(e.next(),!1)}function i(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}function o(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),r=e.match(new RegExp(".*?\\)"+n+'"'));return r?t.tokenize=null:e.skipToEnd(),"string"}function a(t,n){function r(e){if(e)for(var t in e)e.hasOwnProperty(t)&&i.push(t)}"string"==typeof t&&(t=[t]);var i=[];r(n.keywords),r(n.builtin),r(n.atoms),i.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],i));for(var o=0;o<t.length;++o)e.defineMIME(t[o],n)}e.defineMode("clike",function(t,n){function r(e,t){var n=e.next();if(v[n]){var r=v[n](e,t);if(r!==!1)return r}if('"'==n||"'"==n)return t.tokenize=i(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return c=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if("/"==n){if(e.eat("*"))return t.tokenize=o,o(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(y.test(n))return e.eatWhile(y),"operator";e.eatWhile(/[\w\$_]/);var a=e.current();return f.propertyIsEnumerable(a)?(g.propertyIsEnumerable(a)&&(c="newstatement"),"keyword"):p.propertyIsEnumerable(a)?(g.propertyIsEnumerable(a)&&(c="newstatement"),"builtin"):m.propertyIsEnumerable(a)?"atom":"variable"}function i(e){return function(t,n){for(var r,i=!1,o=!1;null!=(r=t.next());){if(r==e&&!i){o=!0;break}i=!i&&"\\"==r}return(o||!i&&!b)&&(n.tokenize=null),"string"}}function o(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=null;break}r="*"==n}return"comment"}function a(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function s(e,t,n){var r=e.indented;return e.context&&"statement"==e.context.type&&(r=e.context.indented),e.context=new a(r,t,n,null,e.context)}function l(e){var t=e.context.type;return(")"==t||"]"==t||"}"==t)&&(e.indented=e.context.indented),e.context=e.context.prev}var c,u=t.indentUnit,d=n.statementIndentUnit||u,h=n.dontAlignCalls,f=n.keywords||{},p=n.builtin||{},g=n.blockKeywords||{},m=n.atoms||{},v=n.hooks||{},b=n.multiLineStrings,y=/[+\-*&%=<>!?|\/]/;return{startState:function(e){return{tokenize:null,context:new a((e||0)-u,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.context;if(e.sol()&&(null==n.align&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return null;c=null;var i=(t.tokenize||r)(e,t);if("comment"==i||"meta"==i)return i;if(null==n.align&&(n.align=!0),";"!=c&&":"!=c&&","!=c||"statement"!=n.type)if("{"==c)s(t,e.column(),"}");else if("["==c)s(t,e.column(),"]");else if("("==c)s(t,e.column(),")");else if("}"==c){
for(;"statement"==n.type;)n=l(t);for("}"==n.type&&(n=l(t));"statement"==n.type;)n=l(t)}else c==n.type?l(t):(("}"==n.type||"top"==n.type)&&";"!=c||"statement"==n.type&&"newstatement"==c)&&s(t,e.column(),"statement");else l(t);return t.startOfLine=!1,i},indent:function(t,n){if(t.tokenize!=r&&null!=t.tokenize)return e.Pass;var i=t.context,o=n&&n.charAt(0);"statement"==i.type&&"}"==o&&(i=i.prev);var a=o==i.type;return"statement"==i.type?i.indented+("{"==o?0:d):!i.align||h&&")"==i.type?")"!=i.type||a?i.indented+(a?0:u):i.indented+d:i.column+(a?0:1)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var s="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";a(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:t(s),blockKeywords:t("case do else for if switch while struct"),atoms:t("null"),hooks:{"#":n},modeProps:{fold:["brace","include"]}}),a(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:t(s+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),blockKeywords:t("catch class do else finally for if struct switch try while"),atoms:t("true false null"),hooks:{"#":n,u:r,U:r,L:r,R:r},modeProps:{fold:["brace","include"]}}),a("text/x-java",{name:"clike",keywords:t("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:t("catch class do else finally for if switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),a("text/x-csharp",{name:"clike",keywords:t("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:t("catch class do else finally for foreach if struct switch try while"),builtin:t("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:t("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=i,i(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),a("text/x-scala",{name:"clike",keywords:t("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:t("catch class do else finally for forSome if match switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}}),a(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:t("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:t("for while do if else struct"),builtin:t("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:t("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),hooks:{"#":n},modeProps:{fold:["brace","include"]}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define("codemirror/mode/php/php",["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e){return function(t,n){return t.match(e)?n.tokenize=null:t.skipToEnd(),"string"}}function r(e){return 0==e.length?i:function(t,n){for(var o=e[0],a=0;a<o.length;a++)if(t.match(o[a][0]))return n.tokenize=r(e.slice(1)),o[a][1];return n.tokenize=i,"string"}}function i(e,t){var n,i=!1,o=!1;if('"'==e.current())return"string";if(e.match("${",!1)||e.match("{$",!1))return t.tokenize=null,"string";if(e.match(/\$[a-zA-Z_][a-zA-Z0-9_]*/))return e.match("[",!1)&&(t.tokenize=r([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]])),e.match(/\-\>\w/,!1)&&(t.tokenize=r([[["->",null]],[[/[\w]+/,"variable"]]])),"variable-2";for(;!e.eol()&&!e.match("{$",!1)&&(!e.match(/(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1)||i);){if(n=e.next(),!i&&'"'==n){o=!0;break}i=!i&&"\\"==n}return o&&(t.tokenize=null,t.phpEncapsStack.pop()),"string"}var o="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",a="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",s="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once";e.registerHelper("hintWords","php",[o,a,s].join(" ").split(" ")),e.registerHelper("wordChars","php",/[\\w$]/);var l={name:"clike",helperType:"php",keywords:t(o),blockKeywords:t("catch do else elseif for foreach if switch try while finally"),atoms:t(a),builtin:t(s),multiLineStrings:!0,hooks:{$:function(e){return e.eatWhile(/[\w\$_]/),"variable-2"},"<":function(e,t){return e.match(/<</)?(e.eatWhile(/[\w\.]/),t.tokenize=n(e.current().slice(3)),t.tokenize(e,t)):!1},"#":function(e){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"},"/":function(e){if(e.eat("/")){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"}return!1},'"':function(e,t){return t.phpEncapsStack||(t.phpEncapsStack=[]),t.phpEncapsStack.push(0),t.tokenize=i,t.tokenize(e,t)},"{":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&t.phpEncapsStack[t.phpEncapsStack.length-1]++,!1},"}":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&0==--t.phpEncapsStack[t.phpEncapsStack.length-1]&&(t.tokenize=i),!1}}};e.defineMode("php",function(t,n){function r(e,t){var n=t.curMode==o;if(e.sol()&&t.pending&&'"'!=t.pending&&"'"!=t.pending&&(t.pending=null),n)return n&&null==t.php.tokenize&&e.match("?>")?(t.curMode=i,t.curState=t.html,"meta"):o.token(e,t.curState);if(e.match(/^<\?\w*/))return t.curMode=o,t.curState=t.php,"meta";if('"'==t.pending||"'"==t.pending){for(;!e.eol()&&e.next()!=t.pending;);var r="string"}else if(t.pending&&e.pos<t.pending.end){e.pos=t.pending.end;var r=t.pending.style}else var r=i.token(e,t.curState);t.pending&&(t.pending=null);var a,s=e.current(),l=s.search(/<\?/);return-1!=l&&("string"==r&&(a=s.match(/[\'\"]$/))&&!/\?>/.test(s)?t.pending=a[0]:t.pending={end:e.pos,style:r},e.backUp(s.length-l)),r}var i=e.getMode(t,"text/html"),o=e.getMode(t,l);return{startState:function(){var t=e.startState(i),r=e.startState(o);return{html:t,php:r,curMode:n.startOpen?o:i,curState:n.startOpen?r:t,pending:null}},copyState:function(t){var n,r=t.html,a=e.copyState(i,r),s=t.php,l=e.copyState(o,s);return n=t.curMode==i?a:l,{html:a,php:l,curMode:t.curMode,curState:n,pending:t.pending}},token:r,indent:function(e,t){return e.curMode!=o&&/^\s*<\//.test(t)||e.curMode==o&&/^\?>/.test(t)?i.indent(e.html,t):e.curMode.indent(e.curState,t)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(e){return{state:e.curState,mode:e.curMode}}}},"htmlmixed","clike"),e.defineMIME("application/x-httpd-php","php"),e.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),e.defineMIME("text/x-php",l)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/go/go",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("go",function(e){function t(e,t){var i=e.next();if('"'==i||"'"==i||"`"==i)return t.tokenize=n(i),t.tokenize(e,t);if(/[\d\.]/.test(i))return"."==i?e.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==i?e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^0[0-7]+/):e.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(i))return s=i,null;if("/"==i){if(e.eat("*"))return t.tokenize=r,r(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(d.test(i))return e.eatWhile(d),"operator";e.eatWhile(/[\w\$_]/);var o=e.current();return c.propertyIsEnumerable(o)?(("case"==o||"default"==o)&&(s="case"),"keyword"):u.propertyIsEnumerable(o)?"atom":"variable"}function n(e){return function(n,r){for(var i,o=!1,a=!1;null!=(i=n.next());){if(i==e&&!o){a=!0;break}o=!o&&"\\"==i}return(a||!o&&"`"!=e)&&(r.tokenize=t),"string"}}function r(e,n){for(var r,i=!1;r=e.next();){if("/"==r&&i){n.tokenize=t;break}i="*"==r}return"comment"}function i(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function o(e,t,n){return e.context=new i(e.indented,t,n,null,e.context)}function a(e){var t=e.context.type;return(")"==t||"]"==t||"}"==t)&&(e.indented=e.context.indented),e.context=e.context.prev}var s,l=e.indentUnit,c={"break":!0,"case":!0,chan:!0,"const":!0,"continue":!0,"default":!0,defer:!0,"else":!0,fallthrough:!0,"for":!0,func:!0,go:!0,"goto":!0,"if":!0,"import":!0,"interface":!0,map:!0,"package":!0,range:!0,"return":!0,select:!0,struct:!0,"switch":!0,type:!0,"var":!0,bool:!0,"byte":!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,"int":!0,uint:!0,uintptr:!0},u={"true":!0,"false":!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,imag:!0,len:!0,make:!0,"new":!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},d=/[+\-*&^%:=<>!|\/]/;return{startState:function(e){return{tokenize:null,context:new i((e||0)-l,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,n){var r=n.context;if(e.sol()&&(null==r.align&&(r.align=!1),n.indented=e.indentation(),n.startOfLine=!0,"case"==r.type&&(r.type="}")),e.eatSpace())return null;s=null;var i=(n.tokenize||t)(e,n);return"comment"==i?i:(null==r.align&&(r.align=!0),"{"==s?o(n,e.column(),"}"):"["==s?o(n,e.column(),"]"):"("==s?o(n,e.column(),")"):"case"==s?r.type="case":"}"==s&&"}"==r.type?r=a(n):s==r.type&&a(n),n.startOfLine=!1,i)},indent:function(e,n){if(e.tokenize!=t&&null!=e.tokenize)return 0;var r=e.context,i=n&&n.charAt(0);if("case"==r.type&&/^(?:case|default)\b/.test(n))return e.context.type="}",r.indented;var o=i==r.type;return r.align?r.column+(o?0:1):r.indented+(o?0:l)},electricChars:"{}):",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-go","go")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror",require("../xml/xml"))):"function"==typeof define&&define.amd?define("codemirror/mode/markdown/markdown",["codemirror","codemirror/mode/xml/xml"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("markdown",function(t,n){function r(e,t,n){return t.f=t.inline=n,n(e,t)}function i(e,t,n){return t.f=t.block=n,n(e,t)}function o(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=0,y||e.f!=s||(e.f=d,e.block=a),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.thisLineHasContent=!1,null}function a(e,t){var o=e.sol(),a=t.list!==!1;t.list!==!1&&t.indentationDiff>=0?(t.indentationDiff<4&&(t.indentation-=t.indentationDiff),t.list=null):t.list!==!1&&t.indentation>0?(t.list=null,t.listDepth=Math.floor(t.indentation/4)):t.list!==!1&&(t.list=!1,t.listDepth=0);var s=null;if(t.indentationDiff>=4)return t.indentation-=4,e.skipToEnd(),S;if(e.eatSpace())return null;if(s=e.match(H))return t.header=s[0].length<=6?s[0].length:6,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,c(t);if(t.prevLineHasContent&&(s=e.match(W)))return t.header="="==s[0].charAt(0)?1:2,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,c(t);if(e.eat(">"))return t.indentation++,t.quote=o?1:t.quote+1,n.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),c(t);if("["===e.peek())return r(e,t,g);if(e.match(R,!0))return L;if((!t.prevLineHasContent||a)&&(e.match(j,!1)||e.match(q,!1))){var u=null;return e.match(j,!0)?u="ul":(e.match(q,!0),u="ol"),t.indentation+=4,t.list=!0,t.listDepth++,n.taskLists&&e.match(P,!1)&&(t.taskList=!0),t.f=t.inline,n.highlightFormatting&&(t.formatting=["list","list-"+u]),c(t)}return n.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0)?(t.localMode=w(RegExp.$1),t.localMode&&(t.localState=t.localMode.startState()),i(e,t,l),n.highlightFormatting&&(t.formatting="code-block"),t.code=!0,c(t)):r(e,t,t.inline)}function s(e,t){var n=x.token(e,t.htmlState);return(y&&null===t.htmlState.tagStart&&!t.htmlState.context||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=d,t.block=a,t.htmlState=null),n}function l(e,t){if(e.sol()&&e.match(/^```/,!0)){t.localMode=t.localState=null,t.f=d,t.block=a,n.highlightFormatting&&(t.formatting="code-block"),t.code=!0;var r=c(t);return t.code=!1,r}return t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),S)}function c(e){var t=[];if(e.formatting){t.push(A),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(A+"-"+e.formatting[r]),"header"===e.formatting[r]&&t.push(A+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(A+"-"+e.formatting[r]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref)return t.push(F),t.length?t.join(" "):null;if(e.strong&&t.push(O),e.em&&t.push(z),e.linkText&&t.push($),e.code&&t.push(S),e.header&&(t.push(C),t.push(C+"-"+e.header)),e.quote&&(t.push(D),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(D+"-"+e.quote):t.push(D+"-"+n.maxBlockquoteDepth)),e.list!==!1){var i=(e.listDepth-1)%3;i?1===i?t.push(E):t.push(M):t.push(T)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function u(e,t){return e.match(U,!0)?c(t):void 0}function d(t,r){var o=r.text(t,r);if("undefined"!=typeof o)return o;if(r.list)return r.list=null,c(r);if(r.taskList){var a="x"!==t.match(P,!0)[1];return a?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,c(r)}if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),c(r);var l=t.sol(),u=t.next();if(r.escape)return r.escape=!1,c(r);if(r.linkTitle){r.linkTitle=!1;var d=u;"("===u&&(d=")"),d=(d+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var p="^\\s*(?:[^"+d+"\\\\]+|\\\\\\\\|\\\\.)"+d;if(t.match(new RegExp(p),!0))return F}if("`"===u){var g=r.formatting;n.highlightFormatting&&(r.formatting="code");var m=c(r),v=t.pos;t.eatWhile("`");var b=1+t.pos-v;return r.code?b===k?(r.code=!1,m):(r.formatting=g,c(r)):(k=b,r.code=!0,c(r))}if(r.code)return c(r);if("!"===u&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=f,B;if("["===u&&t.match(/.*\](\(| ?\[)/,!1))return r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),c(r);if("]"===u&&r.linkText){n.highlightFormatting&&(r.formatting="link");var y=c(r);return r.linkText=!1,r.inline=r.f=f,y}if("<"===u&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=h,n.highlightFormatting&&(r.formatting="link");var y=c(r);return y?y+=" ":y="",y+N}if("<"===u&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=h,n.highlightFormatting&&(r.formatting="link");var y=c(r);return y?y+=" ":y="",y+I}if("<"===u&&t.match(/^\w/,!1)){if(-1!=t.string.indexOf(">")){var _=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(_)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(x),i(t,r,s)}if("<"===u&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var w=!1;if(!n.underscoresBreakWords&&"_"===u&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var C=t.pos-2;if(C>=0){var S=t.string.charAt(C);"_"!==S&&S.match(/(\w)/,!1)&&(w=!0)}}if("*"===u||"_"===u&&!w)if(l&&" "===t.peek());else{if(r.strong===u&&t.eat(u)){n.highlightFormatting&&(r.formatting="strong");var m=c(r);return r.strong=!1,m}if(!r.strong&&t.eat(u))return r.strong=u,n.highlightFormatting&&(r.formatting="strong"),c(r);if(r.em===u){n.highlightFormatting&&(r.formatting="em");var m=c(r);return r.em=!1,m}if(!r.em)return r.em=u,n.highlightFormatting&&(r.formatting="em"),c(r)}else if(" "===u&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return c(r);t.backUp(1)}return" "===u&&(t.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),c(r)}function h(e,t){var r=e.next();if(">"===r){t.f=t.inline=d,n.highlightFormatting&&(t.formatting="link");var i=c(t);return i?i+=" ":i="",i+N}return e.match(/^[^>]+/,!0),N}function f(e,t){if(e.eatSpace())return null;var r=e.next();return"("===r||"["===r?(t.f=t.inline=p("("===r?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,c(t)):"error"}function p(e){return function(t,r){var i=t.next();if(i===e){r.f=r.inline=d,n.highlightFormatting&&(r.formatting="link-string");var o=c(r);return r.linkHref=!1,o}return t.match(b(e),!0)&&t.backUp(1),r.linkHref=!0,c(r)}}function g(e,t){return e.match(/^[^\]]*\]:/,!1)?(t.f=m,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,c(t)):r(e,t,d)}function m(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=v,n.highlightFormatting&&(t.formatting="link");var r=c(t);return t.linkText=!1,r}return e.match(/^[^\]]+/,!0),$}function v(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=d,F)}function b(e){return V[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),V[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),V[e]}var y=e.modes.hasOwnProperty("xml"),x=e.getMode(t,y?{name:"xml",htmlMode:!0}:"text/plain"),_={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},w=function(){var n,r,i={},o={},a=[];for(var s in e.modes)e.modes.propertyIsEnumerable(s)&&a.push(s);for(n=0;n<a.length;n++)i[a[n]]=a[n];var l=[];for(var s in e.mimeModes)e.mimeModes.propertyIsEnumerable(s)&&l.push({mime:s,mode:e.mimeModes[s]});for(n=0;n<l.length;n++)r=l[n].mime,o[r]=l[n].mime;for(var c in _)(_[c]in i||_[c]in o)&&(i[c]=_[c]);return function(n){return i[n]?e.getMode(t,i[n]):null}}();void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.fencedCodeBlocks&&(n.fencedCodeBlocks=!1),void 0===n.taskLists&&(n.taskLists=!1);var k=0,C="header",S="comment",D="quote",T="variable-2",E="variable-3",M="keyword",L="hr",B="tag",A="formatting",N="link",I="link",$="link",F="string",z="em",O="strong",R=/^([*\-=_])(?:\s*\1){2,}\s*$/,j=/^[*\-+]\s+/,q=/^[0-9]+\.\s+/,P=/^\[(x| )\](?=\s)/,H=/^#+/,W=/^(?:\={1,}|-{1,})$/,U=/^[^#!\[\]*_\\<>` "'(]+/,V=[],X={startState:function(){return{f:a,prevLineHasContent:!1,thisLineHasContent:!1,block:a,htmlState:null,indentation:0,inline:d,text:u,escape:!1,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:t.htmlState&&e.copyState(x,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,escape:!1,formatting:!1,linkTitle:t.linkTitle,em:t.em,strong:t.strong,header:t.header,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside}},token:function(e,t){if(t.formatting=!1,e.sol()){var n=e.match(/^\s*$/,!0)||t.header;if(t.header=0,n)return t.prevLineHasContent=!1,o(t);t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.escape=!1,t.taskList=!1,t.code=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((r-t.indentation)/4);i>4&&(i=4);var a=t.indentation+i;if(t.indentationDiff=a-t.indentation,t.indentation=a,r>0)return null}var s=t.f(e,t);return e.start==e.pos?this.token(e,t):s},innerMode:function(e){return e.block==s?{state:e.htmlState,mode:x}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:X}},blankLine:o,getType:c,fold:"markdown"};return X},"xml"),e.defineMIME("text/x-markdown","markdown");
}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/shell/shell",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("shell",function(){function e(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)i[n[r]]=e}function t(e,t){if(e.eatSpace())return null;var a=e.sol(),s=e.next();if("\\"===s)return e.next(),null;if("'"===s||'"'===s||"`"===s)return t.tokens.unshift(n(s)),r(e,t);if("#"===s)return a&&e.eat("!")?(e.skipToEnd(),"meta"):(e.skipToEnd(),"comment");if("$"===s)return t.tokens.unshift(o),r(e,t);if("+"===s||"="===s)return"operator";if("-"===s)return e.eat("-"),e.eatWhile(/\w/),"attribute";if(/\d/.test(s)&&(e.eatWhile(/\d/),e.eol()||!/\w/.test(e.peek())))return"number";e.eatWhile(/[\w-]/);var l=e.current();return"="===e.peek()&&/\w+/.test(l)?"def":i.hasOwnProperty(l)?i[l]:null}function n(e){return function(t,n){for(var r,i=!1,a=!1;null!=(r=t.next());){if(r===e&&!a){i=!0;break}if("$"===r&&!a&&"'"!==e){a=!0,t.backUp(1),n.tokens.unshift(o);break}a=!a&&"\\"===r}return(i||!a)&&n.tokens.shift(),"`"===e||")"===e?"quote":"string"}}function r(e,n){return(n.tokens[0]||t)(e,n)}var i={};e("atom","true false"),e("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function"),e("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");var o=function(e,t){t.tokens.length>1&&e.eat("$");var i=e.next(),o=/\w/;return"{"===i&&(o=/[^}]/),"("===i?(t.tokens[0]=n(")"),r(e,t)):(/\d/.test(i)||(e.eatWhile(o),e.eat("}")),t.tokens.shift(),"def")};return{startState:function(){return{tokens:[]}},token:function(e,t){return r(e,t)}}}),e.defineMIME("text/x-sh","shell")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/selection/active-line",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",o),e.removeLineClass(e.state.activeLines[t],"background",a)}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function r(e,r){for(var i=[],s=0;s<r.length;s++){var l=r[s];if(l.empty()){var c=e.getLineHandleVisualStart(l.head.line);i[i.length-1]!=c&&i.push(c)}}n(e.state.activeLines,i)||e.operation(function(){t(e);for(var n=0;n<i.length;n++)e.addLineClass(i[n],"wrap",o),e.addLineClass(i[n],"background",a);e.state.activeLines=i})}function i(e,t){r(e,t.ranges)}var o="CodeMirror-activeline",a="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(n,o,a){var s=a&&a!=e.Init;o&&!s?(n.state.activeLines=[],r(n,n.listSelections()),n.on("beforeSelectionChange",i)):!o&&s&&(n.off("beforeSelectionChange",i),t(n),delete n.state.activeLines)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/edit/matchbrackets",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,r,i){var o=e.getLineHandle(t.line),l=t.ch-1,c=l>=0&&s[o.text.charAt(l)]||s[o.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(r&&u>0!=(l==t.ch))return null;var d=e.getTokenTypeAt(a(t.line,l+1)),h=n(e,a(t.line,l+(u>0?1:0)),u,d||null,i);return null==h?null:{from:a(t.line,l),to:h&&h.pos,match:h&&h.ch==c.charAt(0),forward:u>0}}function n(e,t,n,r,i){for(var o=i&&i.maxScanLineLength||1e4,l=i&&i.maxScanLines||1e3,c=[],u=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,d=n>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),h=t.line;h!=d;h+=n){var f=e.getLine(h);if(f){var p=n>0?0:f.length-1,g=n>0?f.length:-1;if(!(f.length>o))for(h==t.line&&(p=t.ch-(0>n?1:0));p!=g;p+=n){var m=f.charAt(p);if(u.test(m)&&(void 0===r||e.getTokenTypeAt(a(h,p+1))==r)){var v=s[m];if(">"==v.charAt(1)==n>0)c.push(m);else{if(!c.length)return{pos:a(h,p),ch:m};c.pop()}}}}}return h-n==(n>0?e.lastLine():e.firstLine())?!1:null}function r(e,n,r){for(var i=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&t(e,l[c].head,!1,r);if(u&&e.getLine(u.from.line).length<=i){var d=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(u.from,a(u.from.line,u.from.ch+1),{className:d})),u.to&&e.getLine(u.to.line).length<=i&&s.push(e.markText(u.to,a(u.to.line,u.to.ch+1),{className:d}))}}if(s.length){o&&e.state.focused&&e.display.input.focus();var h=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!n)return h;setTimeout(h,800)}}function i(e){e.operation(function(){l&&(l(),l=null),l=r(e,!1,e.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),a=e.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&t.off("cursorActivity",i),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",i))}),e.defineExtension("matchBrackets",function(){r(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,r){return t(this,e,n,r)}),e.defineExtension("scanForBracket",function(e,t,r,i){return n(this,e,t,r,i)})}),define("NoteWidget",["main","codemirror","autoSave","codemirror/mode/python/python","codemirror/mode/ruby/ruby","codemirror/mode/php/php","codemirror/mode/css/css","codemirror/mode/clike/clike","codemirror/mode/htmlmixed/htmlmixed","codemirror/mode/go/go","codemirror/mode/markdown/markdown","codemirror/mode/shell/shell","codemirror/mode/javascript/javascript","codemirror/addon/selection/active-line","codemirror/addon/edit/matchbrackets"],function(e,t,n){var r,i;return r=function(){var e,r,i,o;r='<div id="noteWidget" class="noteWidget hidden hidden-xs">\n    <div class="noteWidget-header clearfix">\n        <h2 class="h4 pull-left">记笔记</h2>\n        <ul class="list-inline pull-right mb0">\n            <li id="noteWidgetMinimize"><span class="icon-minimize"></span></li><li id="noteWidgetZoom"><span class="icon-zoom"></span></li><li id="noteWidgetClose"><span class="icon-close"></span></li>\n        </ul>\n    </div>\n    <form method="POST" action="/api/notes/add" role="form">\n        <div class="form-group">\n            <label for="title" class="sr-only">标题</label>\n            <input type="hidden" value="" id="draftId">\n            <input type="text" name="title" data-error="" autocomplete="off" class="form-control" placeholder="笔记描述" value="">\n        </div>\n        <div class="editor-config clearfix">\n            <select name="lang" class="form-control pull-left input-sm">\n                <optgroup label="文本语法">\n                    <option value="text" data-mode="text">纯文本</option>\n                    <option value="markdown" data-mode="markdown">Markdown</option>\n                    <option value="javascript" data-mode="javascript">Javascript</option>\n                    <option value="css" data-mode="css">CSS</option>\n                    <option value="html5" data-mode="htmlmixed">HTML</option>\n                    <option value="php" data-mode="php">PHP</option>\n                    <option value="python" data-mode="python">Python</option>\n                    <option value="ruby" data-mode="ruby">Ruby</option>\n                    <option value="go" data-mode="go">Go</option>\n                    <option value="c" data-mode="clike">C/C++</option>\n                    <option value="java" data-mode="java">Java</option>\n                    <option value="bash" data-mode="shell">Shell/Bash</option>\n                </optgroup>\n            </select>\n            <div class="pull-right hidden-xs">\n                <select name="indentWithTabs" class="form-control inline-block input-sm">\n                    <optgroup label="缩进模式">\n                        <option value="false">空格缩进</option>\n                        <option value="true">Tabs 缩进</option>\n                    </optgroup>\n                </select>\n                <select name="tabSize" class="form-control inline-block input-sm">\n                    <optgroup label="缩进大小">\n                        <option value="2">2</option>\n                        <option value="4" selected="">4</option>\n                    </optgroup>\n                </select>\n                <select name="lineWrap" class="form-control inline-block input-sm">\n                    <optgroup label="换行方式">\n                        <option value="true">自动换行</option>\n                        <option value="false">不换行</option>\n                    </optgroup>\n                </select>\n            </div>\n        </div>\n        <textarea id="codeMirror" class="form-control" style="display: none;"></textarea>\n        <div class="mt20 clearfix">\n            <div class="pull-right">\n                <span class="text-muted hidden" id="editorStatus">已保存</span>\n                <a id="dropIt" href="javascript:void(0);" class="mr10 hidden">[舍弃]</a>\n                <button data-type="note" id="publishIt2" class="btn btn-default ml10" data-id="" data-do="add" data-url="" data-text="保存私密笔记" data-name="">保存私密笔记</button>\n                <button data-type="note" id="publishIt" class="btn btn-primary ml10" data-id="" data-do="add" data-url="" data-text="保存公开笔记" data-name="">保存公开笔记</button>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>',this.content=$(r),$("body").append(this.content),this.option=i={mode:$("#noteWidget [name=lang] option:selected").data("mode"),indentUnit:$("#noteWidget [name=tabSize]").val(),tabSize:$("#noteWidget [name=tabSize]").val(),lineWrapping:"true"===$("#noteWidget [name=lineWrap]").val(),indentWithTabs:"true"===$("#noteWidget [name=indentWithTabs]").val()},e=t.fromTextArea($("#codeMirror")[0],{lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,mode:i.mode,indentUnit:i.indentUnit,tabSize:i.tabSize,lineWrapping:i.lineWrapping,indentWithTabs:i.indentWithTabs}),t.on($("#noteWidget [name=lang]")[0],"change",function(){var t;return t=$(this).find("option:selected").data("mode"),e.setOption("mode",t)}),$("#noteWidget [name=tabSize]").change(function(){var t;return t=$(this).val(),e.setOption("indentUnit",t),e.setOption("tabSize",t)}),$("#noteWidget [name=lineWrap]").change(function(){var t;return t="true"===$(this).val(),e.setOption("lineWrapping",t)}),$("#noteWidget [name=indentWithTabs]").change(function(){var t;return t="true"===$(this).val(),e.setOption("indentWithTabs",t)}),n.bind(e,function(){return this["do"]="saveNote",this.type="note",this.title=$("#noteWidget [name=title]").val(),this.text=e.getValue(),this.id=$("#draftId").val(),this.noteId=$("#publishIt").data("id"),this.language=$("#noteWidget [name=lang]").val(),this.language=$("#noteWidget [name=lang]").val()}),o=function(t,n){var r,i,o;return r=t,r.text("加载中").attr("disabled","disabled"),o={title:r.parents("form").find("input[name=title]").val(),text:e.getValue(),isPrivate:$("#isEditPrivate").val()||n,language:r.parents("form").find("[name=lang]").val()},i="/api/notes/add",$.post(i,o,function(e){0===e.status?location.href=e.data.url:r.text(r.data("text")).removeAttr("disabled")},"json")},$(".noteWidget form").submit(function(e){return e.preventDefault(),o($("#publishIt"),0),!1}),$("#publishIt2").click(function(e){return e.preventDefault(),o($(this),1)}),$("#noteWidgetMinimize").click(function(){return $("#noteWidget").toggleClass("minimize")}),$("#noteWidgetZoom").click(function(){var t;return $("#noteWidget").toggleClass("zoom"),$("#noteWidget").removeClass("minimize"),$("#noteWidget").hasClass("zoom")?(t=$(window).height()-215,e.setSize("100%",t)):e.setSize("100%",240),e.refresh()}),$("#noteWidgetClose").click(function(){return $("#noteWidget").removeClass("zoom minimize"),$("#noteWidget").addClass("hidden")}),this.codemirror=e},r.prototype.init=function(e,t){var n,r,i,o;$("#noteWidget").removeClass("hidden"),i=[],$("#noteWidget [name=lang] option").each(function(){return i.push($(this).attr("value"))}),r={javascript:/^(js|coffeescript)$/i,markdown:/^md$/i,c:/^(|cs|cpp|oc|objective-c)$/i,php:/^php[1-6]$/i,html5:/^(xml|html|html5|xhtml)$/i};for(n in r)t.match(r[n])&&(t=n);return-1!==i.indexOf(t)?o=$("#noteWidget [name=lang] option[value="+t+"]").data("mode"):(t="text",o="text"),$("#noteWidget [name=lang]").val(t),this.codemirror.setOption("mode",o),this.codemirror.setValue(e)},i=new r,$("body").on("click",".saveToNote",function(){var e,t,n,r,o;return $("#saveToNote").remove(),n=window.getSelection().toString()?window.getSelection().toString():$(this).prev().attr("data-clipboard-text"),n?i.init(n,"text"):(t=$(this).parents("pre"),e=t.find("code"),r=e.text(),o=e.attr("class")?e.attr("class"):t.attr("class").replace("hljs ",""),i.init(r,o))}),e.hasOwnProperty("notePortal")&&"on"===e.notePortal&&$(".fmt").mouseup(function(e){var t,n;return $("#saveToNote").length&&$("#saveToNote").remove(),n=window.getSelection(),n.toString()&&$(n.focusNode).parents(".fmt").length?(t=$('<button id="saveToNote" class="hidden-xs btn btn-xs widget-saveToNote saveToNote" style="color: #FFF; left: '+(e.pageX-65)+"px; top:"+(e.pageY-40)+'px">放进笔记</button>'),$("body").append(t)):void 0}),r}),define("emojiList",[],function(){return["+1","-1","100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alien","ambulance","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","atm","b","baby","baby_bottle","baby_chick","baby_symbol","back","baggage_claim","balloon","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","bath","bathtub","battery","bear","bee","beer","beers","beetle","beginner","bell","bento","bicyclist","bike","bikini","bird","birthday","black_circle","black_joker","black_medium_small_square","black_medium_square","black_nib","black_small_square","black_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bowling","bowtie","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","bulb","bullettrain_front","bullettrain_side","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calling","camel","camera","cancer","candy","capital_abcd","capricorn","car","card_index","carousel_horse","cat","cat2","cd","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cherries","cherry_blossom","chestnut","chicken","children_crossing","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cl","clap","clapper","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","clubs","cn","cocktail","coffee","cold_sweat","collision","computer","confetti_ball","confounded","confused","congratulations","construction","construction_worker","convenience_store","cookie","cool","cop","copyright","corn","couple","couple_with_heart","couplekiss","cow","cow2","credit_card","crescent_moon","crocodile","crossed_flags","crown","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dancer","dancers","dango","dart","dash","date","de","deciduous_tree","department_store","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","donut","door","doughnut","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","email","end","envelope","es","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eyeglasses","eyes","facepunch","factory","fallen_leaf","family","fast_forward","fax","fearful","feelsgood","feet","ferris_wheel","file_folder","finnadie","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flags","flashlight","floppy_disk","flower_playing_cards","flushed","foggy","football","fork_and_knife","fountain","four","four_leaf_clover","fr","free","fried_shrimp","fries","frog","frowning","fu","fuelpump","full_moon","full_moon_with_face","game_die","gb","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","goberserk","godmode","golf","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hamster","hand","handbag","hankey","hash","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_exclamation_mark","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","honey_pot","honeybee","horse","horse_racing","hospital","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","hurtrealbad","hushed","ice_cream","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","it","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","jp","key","keycap_ten","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_face","kissing_heart","kissing_smiling_eyes","koala","koko","kr","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","libra","light_rail","link","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","maple_leaf","mask","massage","meat_on_bone","mega","melon","memo","mens","metal","metro","microphone","microscope","milky_way","minibus","minidisc","mobile_phone_off","money_with_wings","moneybag","monkey","monkey_face","monorail","mortar_board","mount_fuji","mountain_bicyclist","mountain_cableway","mountain_railway","mouse","mouse2","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","neckbeard","necktie","negative_squared_cross_mark","neutral_face","new","new_moon","new_moon_with_face","newspaper","ng","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o","o2","ocean","octocat","octopus","oden","office","ok","ok_hand","ok_woman","older_man","older_woman","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","outbox_tray","ox","package","page_facing_up","page_with_curl","pager","palm_tree","panda_face","paperclip","parking","part_alternation_mark","partly_sunny","passport_control","paw_prints","peach","pear","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","phone","pig","pig2","pig_nose","pill","pineapple","pisces","pizza","plus1","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","princess","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","radio","radio_button","rage","rage1","rage2","rage3","rage4","railway_car","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","recycle","red_car","red_circle","registered","relaxed","relieved","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","rocket","roller_coaster","rooster","rose","rotating_light","round_pushpin","rowboat","ru","rugby_football","runner","running","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satisfied","saxophone","school","school_satchel","scissors","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shaved_ice","sheep","shell","ship","shipit","shirt","shit","shoe","shower","signal_strength","six","six_pointed_star","ski","skull","sleeping","sleepy","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkle","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speech_balloon","speedboat","squirrel","star","star2","stars","station","statue_of_liberty","steam_locomotive","stew","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspect","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","syringe","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","tennis","tent","thought_balloon","three","thumbsdown","thumbsup","ticket","tiger","tiger2","tired_face","tm","toilet","tokyo_tower","tomato","tongue","top","tophat","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trollface","trophy","tropical_drink","tropical_fish","truck","trumpet","tshirt","tulip","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","uk","umbrella","unamused","underage","unlock","up","us","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","vs","walking","waning_crescent_moon","waning_gibbous_moon","warning","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_medium_small_square","white_medium_square","white_small_square","white_square_button","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","x","yellow_heart","yen","yum","zap","zero","zzz"]}),define("highLight",["main","highlightjs","math","flowChart","sequenceChart","Clipboard","NoteWidget","emojiList","jquery_hoverIntent"],function(e,t,n,r,i,o,a,s){"use strict";return function(a){var l,c,u,d,h,f;h=function(t){var n;return n=t.attr("class").trim().replace(/emoji[ \-]/g,""),-1!==s.indexOf(n)?(t.after('<img src="'+e.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'" />'),t.remove()):void 0},u=/((?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF2|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFD|\uDDFF)|\uDDE7\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFC|\uDDFE|\uDDFF)|\uDDE8\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDE9\uD83C(?:\uDDEA|\uDDEC|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDFF)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDED|\uDDF7|\uDDF8|\uDDF9|\uDDFA)|\uDDEB\uD83C(?:\uDDEE|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDF7)|\uDDEC\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF1|\uDDF2|\uDDF3|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFE)|\uDDED\uD83C(?:\uDDF0|\uDDF2|\uDDF3|\uDDF7|\uDDF9|\uDDFA)|\uDDEE\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9)|\uDDEF\uD83C(?:\uDDEA|\uDDF2|\uDDF4|\uDDF5)|\uDDF0\uD83C(?:\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDF2|\uDDF3|\uDDF5|\uDDF7|\uDDFC|\uDDFE|\uDDFF)|\uDDF1\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDEE|\uDDF0|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFE)|\uDDF2\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDF3\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFF)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDE6|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF7|\uDDF8|\uDDF9|\uDDFC|\uDDFE)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDF8|\uDDFA|\uDDFC)|\uDDF8\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDE9|\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFD|\uDDFE|\uDDFF)|\uDDF9\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF9|\uDDFB|\uDDFC|\uDDFF)|\uDDFA\uD83C(?:\uDDE6|\uDDEC|\uDDF2|\uDDF8|\uDDFE|\uDDFF)|\uDDFB\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDEE|\uDDF3|\uDDFA)|\uDDFC\uD83C(?:\uDDEB|\uDDF8)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDEA|\uDDF9)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC)))|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0])/g,a?(a.find("h1, h2, h3, strong").each(function(){return $(this).html($(this).html().replace(u,'<span style="font-weight:normal;">$1</span>'))}),a.find("span.emoji").each(function(){return h($(this))})):($("h1, h2, h3, strong").each(function(){return $(this).html($(this).html().replace(u,'<span style="font-weight:normal;">$1</span>'))}),$("span.emoji").each(function(){return h($(this))})),f=function(e){var t,n,r,i;return t=document,i=e.get(0),t.body.createTextRange?(n=t.body.createTextRange(),n.moveToElementText(i),n.select()):window.getSelection?(r=window.getSelection(),n=t.createRange(),n.selectNodeContents(i),r.removeAllRanges(),r.addRange(n)):void 0},c=function(e){var t,n,r,i;i='\n      <div class="widget-codetool" style="display:none;">\n      <div class="widget-codetool--inner">\n      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="全选"></span>\n      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top"  data-clipboard-text="" title="复制"></span>\n      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="放进笔记"></span>\n      </div>\n      </div>\n      ',r=$(i),e.before(r),$('[data-toggle="tooltip"]').tooltip({container:"body"}),n=r.find(".copyCode"),t=e.children("code"),e.hoverIntent({interval:50,over:function(){r.show()},out:function(){r.is(":hover")||r.hide()}}),r.hoverIntent({interval:50,over:function(){},out:function(){e.is(":hover")||r.hide()}}),r.find(".selectCode").click(function(){return f(t)}),n.attr("data-clipboard-text",t.text());var a=new o(".copyCode");a.on("success",function(e){$(".copyCode").attr("data-original-title","复制"),$(e.trigger).attr("data-original-title","已复制").tooltip("show"),e.clearSelection()}),a.on("error",function(e){$(e.trigger).prev().trigger("click"),$(".copyCode").attr("data-original-title","复制"),$(e.trigger).attr("data-original-title","按 ⌘+c 复制").tooltip("show")})},d=function(e){var n,o,s,l,u,d,h,f,p,g,m,v;m=e,d={actionscript:/^as[1-3]$/i,cmake:/^(make|makefile)$/i,cs:/^csharp$/i,css:/^css[1-3]$/i,javascript:/^js$/i,markdown:/^md$/i,objectivec:/^(oc|objective-c)$/i,php:/^php[1-6]$/i,sql:/^mysql$/i,xml:/^(html|html5|xhtml)$/i,flow:/^flow$/i,sequence:/^sequence$/i},l=void 0,u=t.listLanguages(),s=void 0,n=void 0,p=!1,2===m.children("code").length?(n=m.children("code").first().text(),m.children("code").first().remove(),s=m.children("code").addClass(n)):(s=m.children("code"),1===s.text().split("\n").length&&s.css({"word-break":"break-word","white-space":"initial"}),n=s.attr("class")),n&&(o=n.split(/\s+/),-1!==o.indexOf("nohighlight")&&(p=!0),o.forEach(function(e){var t,n;if(n=e.toLowerCase(),-1!==u.indexOf(n))l=n;else for(t in d)n.match(d[t])&&(l=t)})),l?"flow"===l?(f=$(".flowChart").length,s.parent().after('<div id="flowDiagram'+f+'" class="flowChart"></div>'),r(s.text(),"flowDiagram"+f),s.parent().remove()):"sequence"===l?(a=s.parent(),v=s.text(),f=$(".sequenceChart").length,a.replaceWith('<div id="sequenceDiagram'+f+'" class="sequenceChart">'+v+"</div>"),i($("#sequenceDiagram"+f))):(g=t.highlight(l,s.text(),!0),s.html(g.value)):p||(h=m.html(),h.length<1e4&&t.highlightBlock(m[0])),c(m)},"undefined"!=typeof t&&(a?(l=a.text().indexOf("$$"),-1!==l&&n(a),a.find("pre").each(function(){d($(this))})):(l=!1,$(".fmt").each(function(){-1!==$(this).text().indexOf("$$")&&(l=!0)}),l&&n(),$(".fmt pre").each(function(){d($(this))})))}}),define("getRelated",["jquery","template","sfModal"],function(e,t,n){"use strict";return function(r,i,o,a,s){var l,c,u;r&&(c=r+"",i=i||'<li class="widget-links__item">                <a href="javascript:void(0);" class="ranks" data-toggle="tooltip" data-placement="top" title="{{ answers }}个回答">{{ answers }}</a>                <a href="{{ url }}">{{ title }}</a>            </li>',
u={},l="",16===c.length&&0===c.indexOf("101")?(l="GET",u={"do":"related",id:c}):(l="GET",u={q:c}),e.ajax({url:"/api/question/search",data:u,type:l,dataType:"json"}).done(function(r){var l;if(0!==r.status)n("○|￣|_ 服务器跪了！");else{if(0===r.data.length)return void(a&&(e("#titleSuggest").hide(),e(o).html(a)));s&&(r.data=r.data.slice(0,s)),l="",r.data.forEach(function(e){e.isAccepted?(e.acceptedWord=" | 解决",e.isSolved=" | 已解决"):(e.acceptedWord="",e.isSolved=""),l+=t(i,e)}),e("#titleSuggest").removeClass("hidden").show(),e(o).html(l),e(o).find(".ranks").tooltip()}}))}}),define("hyperdown",[],function(){var e,t=[].slice;return e=function(){function e(){this.commonWhiteList="kbd|b|i|strong|em|sup|sub|br|code|del|a|hr|small",this.specialWhiteList={table:"table|tbody|thead|tfoot|tr|td|th"},this.hooks={}}var n,r,i,o,a,s,l;return l=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},o=function(e){return e.replace(/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},a=function(e,t,n){var r,i,s,l,c,u;if(e instanceof Array)if(t instanceof Array)for(r=i=0,l=e.length;l>i;r=++i)u=e[r],n=a(u,t[r],n);else for(s=0,c=e.length;c>s;s++)u=e[s],n=a(u,t,n);else e=o(e),n=n.replace(new RegExp(e,"g"),t);return n},i=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},s=function(e,t){var n,r,i,a,s;if(null==t&&(t=null),null!=t){for(s="",r=i=0,a=t.length-1;a>=0?a>=i:i>=a;r=a>=0?++i:--i)n=t[r],n=o(n),s+=n;return s="["+s+"]*",e.replace(new RegExp("^"+s),"").replace(new RegExp(s+"$"),"")}return e.replace(/^\s*/,"").replace(/\s*$/,"")},n=function(e){var t,n,r,i,o;if(o=[],e instanceof Array)for(r=n=0,i=e.length;i>n;r=++n)t=e[r],o.push(r);else for(r in e)o.push(r);return o},r=function(e){var t,n,r,i,o;if(i=[],e instanceof Array)for(n=0,r=e.length;r>n;n++)o=e[n],i.push(o);else for(t in e)o=e[t],i.push(o);return i},e.prototype.makeHtml=function(e){var t;return this.footnotes=[],this.definitions={},this.holders={},this.uniqid=Math.ceil(1e7*Math.random())+Math.ceil(1e7*Math.random()),this.id=0,e=this.initText(e),t=this.parse(e),t=this.makeFootnotes(t),this.call("makeHtml",t)},e.prototype.hook=function(e,t){return null==this.hooks[e]&&(this.hooks[e]=[]),this.hooks[e].push(t)},e.prototype.makeHolder=function(e){var t;return t="|\r"+this.uniqid+this.id+"\r|",this.id+=1,this.holders[t]=e,t},e.prototype.initText=function(e){return e.replace(/\t/g,"    ").replace(/\r/g,"")},e.prototype.makeFootnotes=function(e){var t,n;if(this.footnotes.length>0){for(e+='<div class="footnotes"><hr><ol>',t=1;n=this.footnotes.shift();)"string"==typeof n?n+=' <a href="#fnref-'+t+'" class="footnote-backref">&#8617;</a>':(n[n.length-1]+=' <a href="#fnref-'+t+'" class="footnote-backref">&#8617;</a>',n=n.length>1?this.parse(n.join("\n")):this.parseInline(n[0])),e+='<li id="fn-'+t+'">'+n+"</li>",t+=1;e+="</ol></div>"}return e},e.prototype.parse=function(e){var t,n,r,i,o,a,s,c,u,d,h,f,p;for(c=[],n=this.parseBlock(e,c),o="",a=0,s=n.length;s>a;a++)t=n[a],f=t[0],h=t[1],r=t[2],p=t[3],i=c.slice(h,r+1),u="parse"+l(f),i=this.call("before"+l(u),i,p),d=this[u](i,p),d=this.call("after"+l(u),d,p),o+=d;return o},e.prototype.call=function(){var e,n,r,i,o,a,s;if(a=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],s=e[0],null==this.hooks[a])return s;for(o=this.hooks[a],r=0,i=o.length;i>r;r++)n=o[r],s=n.apply(this,e),e[0]=s;return s},e.prototype.releaseHolder=function(e,t){var i;for(null==t&&(t=!0),i=0;e.indexOf("\r")>=0&&10>i;)e=a(n(this.holders),r(this.holders),e),i+=1;return t&&(this.holders={}),e},e.prototype.parseInline=function(e,n,r,o){return null==n&&(n=""),null==r&&(r=!0),null==o&&(o=!0),e=this.call("beforeParseInline",e),e=e.replace(/(^|[^\\])(`+)(.+?)\2/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+e.makeHolder("<code>"+i(n[3])+"</code>")}}(this)),e=e.replace(/\\(.)/g,function(e){return function(){var n,r;return r=1<=arguments.length?t.call(arguments,0):[],n=i(r[1]),n=n.replace(/\$/g,"&dollar;"),e.makeHolder(n)}}(this)),e=e.replace(/<(https?:\/\/.+)>/gi,function(e){return function(){var n,r,i;return r=1<=arguments.length?t.call(arguments,0):[],i=e.cleanUrl(r[1]),n=e.call("parseLink",r[1]),e.makeHolder('<a href="'+i+'">'+n+"</a>")}}(this)),e=e.replace(/<(\/?)([a-z0-9-]+)(\s+[^>]*)?>/gi,function(e){return function(){var r;return r=1<=arguments.length?t.call(arguments,0):[],("|"+e.commonWhiteList+"|"+n+"|").indexOf("|"+r[2].toLowerCase()+"|")>=0?e.makeHolder(r[0]):i(r[0])}}(this)),e=a(["<",">"],["&lt;","&gt;"],e),e=e.replace(/\[\^((?:[^\]]|\\\]|\\\[)+?)\]/g,function(e){return function(){var n,r;return r=1<=arguments.length?t.call(arguments,0):[],n=e.footnotes.indexOf(r[1]),0>n&&(n=e.footnotes.length+1,e.footnotes.push(e.parseInline(r[1],"",!1))),e.makeHolder('<sup id="fnref-'+n+'"><a href="#fn-'+n+'" class="footnote-ref">'+n+"</a></sup>")}}(this)),e=e.replace(/!\[((?:[^\]]|\\\]|\\\[)*?)\]\(((?:[^\)]|\\\)|\\\()+?)\)/g,function(e){return function(){var n,r,o;return r=1<=arguments.length?t.call(arguments,0):[],n=i(e.escapeBracket(r[1])),o=e.escapeBracket(r[2]),o=e.cleanUrl(o),e.makeHolder('<img src="'+o+'" alt="'+n+'" title="'+n+'">')}}(this)),e=e.replace(/!\[((?:[^\]]|\\\]|\\\[)*?)\]\[((?:[^\]]|\\\]|\\\[)+?)\]/g,function(e){return function(){var n,r,o;return r=1<=arguments.length?t.call(arguments,0):[],n=i(e.escapeBracket(r[1])),o=null!=e.definitions[r[2]]?'<img src="'+e.definitions[r[2]]+'" alt="'+n+'" title="'+n+'">':n,e.makeHolder(o)}}(this)),e=e.replace(/\[((?:[^\]]|\\\]|\\\[)+?)\]\(((?:[^\)]|\\\)|\\\()+?)\)/g,function(e){return function(){var n,r,i;return r=1<=arguments.length?t.call(arguments,0):[],n=e.parseInline(e.escapeBracket(r[1]),"",!1,!1),i=e.escapeBracket(r[2]),i=e.cleanUrl(i),e.makeHolder('<a href="'+i+'">'+n+"</a>")}}(this)),e=e.replace(/\[((?:[^\]]|\\\]|\\\[)+?)\]\[((?:[^\]]|\\\]|\\\[)+?)\]/g,function(e){return function(){var n,r,i;return r=1<=arguments.length?t.call(arguments,0):[],n=e.parseInline(e.escapeBracket(r[1]),"",!1,!1),i=null!=e.definitions[r[2]]?'<a href="'+e.definitions[r[2]]+'">'+n+"</a>":n,e.makeHolder(i)}}(this)),e=this.parseInlineCallback(e),e=e.replace(/<([_a-z0-9-\.\+]+@[^@]+\.[a-z]{2,})>/gi,'<a href="mailto:$1">$1</a>'),o&&(e=e.replace(/(^|[^"])((https?):[x80-xff_a-z0-9-\.\/%#!@\?\+=~\|\,&\(\)]+)($|[^"])/gi,function(e){return function(){var n,r;return r=1<=arguments.length?t.call(arguments,0):[],n=e.call("parseLink",r[2]),r[1]+'<a href="'+r[2]+'">'+n+"</a>"+r[4]}}(this))),e=this.call("afterParseInlineBeforeRelease",e),e=this.releaseHolder(e,r),e=this.call("afterParseInline",e)},e.prototype.parseInlineCallback=function(e){return e=e.replace(/(\*{3})((?:.|\r)+?)\1/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],"<strong><em>"+e.parseInlineCallback(n[2])+"</em></strong>"}}(this)),e=e.replace(/(\*{2})((?:.|\r)+?)\1/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],"<strong>"+e.parseInlineCallback(n[2])+"</strong>"}}(this)),e=e.replace(/(\*)((?:.|\r)+?)\1/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],"<em>"+e.parseInlineCallback(n[2])+"</em>"}}(this)),e=e.replace(/(\s+|^)(_{3})((?:.|\r)+?)\2(\s+|$)/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+"<strong><em>"+e.parseInlineCallback(n[3])+"</em></strong>"+n[4]}}(this)),e=e.replace(/(\s+|^)(_{2})((?:.|\r)+?)\2(\s+|$)/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+"<strong>"+e.parseInlineCallback(n[3])+"</strong>"+n[4]}}(this)),e=e.replace(/(\s+|^)(_)((?:.|\r)+?)\2(\s+|$)/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+"<em>"+e.parseInlineCallback(n[3])+"</em>"+n[4]}}(this)),e=e.replace(/(~{2})((?:.|\r)+?)\1/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],"<del>"+e.parseInlineCallback(n[2])+"</del>"}}(this))},e.prototype.parseBlock=function(e,t){var r,i,o,a,s,l,c,u,d,h,f,p,g,m,v,b,y,x,_,w,k,C;for(y=e.split("\n"),c=0,h=y.length;h>c;c++)g=y[c],t.push(g);for(this.blocks=[],this.current="normal",this.pos=-1,k=n(this.specialWhiteList).join("|"),a=0,u=d=0,f=t.length;f>d;u=++d)if(g=t[u],o=this.getBlock(),null!=o&&(o=o.slice(0)),v=g.match(/^(\s*)(~|`){3,}([^`~]*)$/i))this.isBlock("code")?(l=o[3][2],l?this.combineBlock().setBlock(u):this.setBlock(u).endBlock()):(l=!1,this.isBlock("list")&&(w=o[3],l=w>0&&v[1].length>=w||v[1].length>w),this.startBlock("code",u,[v[1],v[3],l]));else if(this.isBlock("code"))this.setBlock(u);else if(v=g.match(new RegExp("^\\s*<("+k+")(\\s+[^>]*)?>","i")))C=v[1].toLowerCase(),this.isBlock("html",C)||this.isBlock("pre")||this.startBlock("html",u,C);else if(v=g.match(new RegExp("</("+k+")>\\s*$","i")))C=v[1].toLowerCase(),this.isBlock("html",C)&&this.setBlock(u).endBlock();else if(this.isBlock("html"))this.setBlock(u);else switch(!0){case!!g.match(/^ {4}/):a=0,this.isBlock("pre")||this.isBlock("list")?this.setBlock(u):this.startBlock("pre",u);break;case!!(v=g.match(/^(\s*)((?:[0-9a-z]+\.)|\-|\+|\*)\s+/)):w=v[1].length,a=0,this.isBlock("list")?this.setBlock(u,w):this.startBlock("list",u,w);break;case!!(v=g.match(/^\[\^((?:[^\]]|\]|\[)+?)\]:/)):w=v[0].length-1,this.startBlock("footnote",u,[w,v[1]]);break;case!!(v=g.match(/^\s*\[((?:[^\]]|\]|\[)+?)\]:\s*(.+)$/)):this.definitions[v[1]]=this.cleanUrl(v[2]),this.startBlock("definition",u).endBlock();break;case!!g.match(/^\s*>/):this.isBlock("quote")?this.setBlock(u):this.startBlock("quote",u);break;case!!(v=g.match(/^((?:(?:(?:[ :]*\-[ :]*)+(?:\||\+))|(?:(?:\||\+)(?:[ :]*\-[ :]*)+)|(?:(?:[ :]*\-[ :]*)+(?:\||\+)(?:[ :]*\-[ :]*)+))+)$/)):if(this.isBlock("table"))o[3][0].push(o[3][2]),o[3][2]+=1,this.setBlock(u,o[3]);else{for(s=0,null==o||"normal"!==o[0]||t[o[2]].match(/^\s*$/)?this.startBlock("table",u):(s=1,this.backBlock(1,"table")),"|"===v[1][0]&&(v[1]=v[1].substring(1),"|"===v[1][v[1].length-1]&&(v[1]=v[1].substring(0,v[1].length-1))),_=v[1].split(/\+|\|/),i=[],m=0,p=_.length;p>m;m++)x=_[m],r="none",(v=x.match(/^\s*(:?)\-+(:?)\s*$/))&&(v[1]&&v[2]?r="center":v[1]?r="left":v[2]&&(r="right")),i.push(r);this.setBlock(u,[[s],i,s+1])}break;case!!(v=g.match(/^(#+)(.*)$/)):b=Math.min(v[1].length,6),this.startBlock("sh",u,b).endBlock();break;case!!(v=g.match(/^\s*((=|-){2,})\s*$/))&&null!=o&&"normal"===o[0]&&!t[o[2]].match(/^\s*$/):this.isBlock("normal")?this.backBlock(1,"mh","="===v[1][0]?1:2).setBlock(u).endBlock():this.startBlock("normal",u);break;case!!g.match(/^[-\*]{3,}\s*$/):this.startBlock("hr",u).endBlock();break;default:this.isBlock("list")?g.match(/^(\s*)/)?(a>0?this.startBlock("normal",u):this.setBlock(u),a+=1):0===a?this.setBlock(u):this.startBlock("normal",u):this.isBlock("footnote")?(v=g.match(/^(\s*)/),v[1].length>=o[3][0]?this.setBlock(u):this.startBlock("normal",u)):this.isBlock("table")?0<=g.indexOf("|")?(o[3][2]+=1,this.setBlock(u,o[3])):this.startBlock("normal",u):this.isBlock("pre")?g.match(/^\s*$/)?(a>0?this.startBlock("normal",u):this.setBlock(u),a+=1):this.startBlock("normal",u):this.isBlock("quote")?g.match(/^(\s*)/)?(a>0?this.startBlock("normal",u):this.setBlock(u),a+=1):0===a?this.setBlock(u):this.startBlock("normal",u):null==o||"normal"!==o[0]?this.startBlock("normal",u):this.setBlock(u)}return this.optimizeBlocks(this.blocks,t)},e.prototype.optimizeBlocks=function(e,t){var n,r,i,o,a,s,l,c,u,d,h,f;for(r=e.slice(0),s=t.slice(0),r=this.call("beforeOptimizeBlocks",r,s),a=0;null!=r[a];)l=!1,n=r[a],u=null!=r[a-1]?r[a-1]:null,c=null!=r[a+1]?r[a+1]:null,h=n[0],i=n[1],d=n[2],"pre"===h&&(o=s.reduce(function(e,t){return t.match(/^\s*$/)&&e},!0),o&&(n[0]=h="normal")),"normal"===h&&(f=["list","quote"],i===d&&s[i].match(/^\s*$/)&&null!=u&&null!=c&&u[0]===c[0]&&f.indexOf(u[0])>=0&&(r[a-1]=[u[0],u[1],c[2],null],r.splice(a,2),l=!0)),l||(a+=1);return this.call("afterOptimizeBlocks",r,s)},e.prototype.parseCode=function(e,t){var n,r,o,a,l;return n=t[0],o=t[1],o=s(o),r=n.length,o.match(/^[_a-z0-9-\+\#\:\.]+$/i)?(t=o.split(":"),t.length>1&&(o=t[0],a=t[1],o=s(o),a=s(a))):o=null,e=e.slice(1,-1).map(function(e){return e.replace(new RegExp("/^[ ]{"+r+"}/"),"")}),l=e.join("\n"),l.match(/^\s*$/)?"":"<pre><code"+(o?' class="'+o+'"':"")+(a?' rel="'+a+'"':"")+">"+i(l)+"</code></pre>"},e.prototype.parsePre=function(e){var t;return e=e.map(function(e){return i(e.substring(4))}),t=e.join("\n"),t.match(/^\s*$/)?"":"<pre><code>"+t+"</code></pre>"},e.prototype.parseSh=function(e,t){var n;return n=this.parseInline(s(e[0],"# ")),n.match(/^\s*$/)?"":"<h"+t+">"+n+"</h"+t+">"},e.prototype.parseMh=function(e,t){return this.parseSh(e,t)},e.prototype.parseQuote=function(e){var t;return e=e.map(function(e){return e.replace(/^\s*> ?/,"")}),t=e.join("\n"),t.match(/^\s*$/)?"":"<blockquote>"+this.parse(t)+"</blockquote>"},e.prototype.parseList=function(e){var t,n,r,i,o,a,s,l,c,u,d,h,f,p,g,m,v,b,y,x;for(n="",p=99999,m=[],i=r=0,l=e.length;l>r;i=++r)d=e[i],(f=d.match(/^(\s*)((?:[0-9a-z]+\.?)|\-|\+|\*)(\s+)(.*)$/))?(b=f[1].length,x=0<="+-*".indexOf(f[2])?"ul":"ol",p=Math.min(b,p),m.push([b,x,d,f[4]])):m.push(d);for(t=!1,v=99999,o=0,c=m.length;c>o;o++)g=m[o],g instanceof Array&&g[0]!==p&&(v=Math.min(v,g[0]),t=!0);for(v=t?v:p,a="",s=[],h=0,u=m.length;u>h;h++)g=m[h],g instanceof Array?(b=g[0],x=g[1],d=g[2],y=g[3],b!==p?s.push(d.replace(new RegExp("^\\s{"+v+"}"),"")):(s.length>0&&(n+="<li>"+this.parse(s.join("\n"))+"</li>"),a!==x&&(a&&(n+="</"+a+">"),n+="<"+x+">"),s=[y],a=x)):s.push(g.replace(new RegExp("^\\s{"+v+"}"),""));return s.length>0&&(n+="<li>"+this.parse(s.join("\n"))+("</li></"+a+">")),n},e.prototype.parseTable=function(e,t){var n,r,i,o,a,l,c,u,d,h,f,p,g,m,v,b,y,x,_,w;for(c=t[0],n=t[1],a=c.length>0&&c.reduce(function(e,t){return t+e})>0,l="<table>",r=a?null:!0,b=!1,d=u=0,p=e.length;p>u;d=++u)if(m=e[d],0<=c.indexOf(d))a&&b&&(a=!1,r=!0);else{for(m=s(m),b=!0,"|"===m[0]&&(m=m.substring(1),"|"===m[m.length-1]&&(m=m.substring(0,m.length-1))),x=m.split("|").map(function(e){return e.match(/^\s+$/)?"":s(e)}),o={},f=-1,h=0,g=x.length;g>h;h++)y=x[h],y.length>0?(f+=1,o[f]=[null!=o[f]?o[f][0]+1:1,y]):null!=o[f]?o[f][0]+=1:o[0]=[1,y];a?l+="<thead>":r&&(l+="<tbody>"),l+="<tr>";for(d in o)i=o[d],v=i[0],w=i[1],_=a?"th":"td",l+="<"+_,v>1&&(l+=' colspan="'+v+'"'),null!=n[d]&&"none"!==n[d]&&(l+=' align="'+n[d]+'"'),l+=">"+this.parseInline(w)+("</"+_+">");l+="</tr>",a?l+="</thead>":r&&(r=!1)}return null!==r&&(l+="</tbody>"),l+="</table>"},e.prototype.parseHr=function(){return"<hr>"},e.prototype.parseNormal=function(e){var t;return e=e.map(function(e){return function(t){return e.parseInline(t)}}(this)),t=s(e.join("\n")),t=t.replace(/(\n\s*){2,}/g,"</p><p>"),t=t.replace(/\n/g,"<br>"),t.match(/^\s*$/)?"":"<p>"+t+"</p>"},e.prototype.parseFootnote=function(e,t){var n,r,i;return i=t[0],r=t[1],n=this.footnotes.indexOf(r),n>=0&&(e=e.slice(0),e[0]=e[0].replace(/^\[\^((?:[^\]]|\]|\[)+?)\]:/,""),this.footnotes[n]=e),""},e.prototype.parseDefinition=function(){return""},e.prototype.parseHtml=function(e,t){return e=e.map(function(e){return function(n){return e.parseInline(n,null!=e.specialWhiteList[t]?e.specialWhiteList[t]:"")}}(this)),e.join("\n")},e.prototype.cleanUrl=function(e){var t;return(t=e.match(/^\s*((http|https|ftp|mailto):[x80-xff_a-z0-9-\.\/%#!@\?\+=~\|\,&\(\)]+)/i))&&t[1],(t=e.match(/^\s*([x80-xff_a-z0-9-\.\/%#!@\?\+=~\|\,&]+)/i))?t[1]:"#"},e.prototype.escapeBracket=function(e){return a(["\\[","\\]","\\(","\\)"],["[","]","(",")"],e)},e.prototype.startBlock=function(e,t,n){return null==n&&(n=null),this.pos+=1,this.current=e,this.blocks.push([e,t,t,n]),this},e.prototype.endBlock=function(){return this.current="normal",this},e.prototype.isBlock=function(e,t){return null==t&&(t=null),this.current===e&&(null===t?!0:this.blocks[this.pos][3]===t)},e.prototype.getBlock=function(){return null!=this.blocks[this.pos]?this.blocks[this.pos]:null},e.prototype.setBlock=function(e,t){return null==e&&(e=null),null==t&&(t=null),null!==e&&(this.blocks[this.pos][2]=e),null!==t&&(this.blocks[this.pos][3]=t),this},e.prototype.backBlock=function(e,t,n){var r,i;return null==n&&(n=null),this.pos<0?this.startBlock(t,0,n):(i=this.blocks[this.pos][2],this.blocks[this.pos][2]=i-e,r=[t,i-e+1,i,n],this.blocks[this.pos][1]<=this.blocks[this.pos][2]?(this.pos+=1,this.blocks.push(r)):this.blocks[this.pos]=r,this.current=t,this)},e.prototype.combineBlock=function(){var e,t;return this.pos<1?this:(t=this.blocks[this.pos-1].slice(0),e=this.blocks[this.pos].slice(0),t[2]=e[2],this.blocks[this.pos-1]=t,this.current=t[0],this.blocks=this.blocks.slice(0,-1),this.pos-=1,this)},e}()}),define("pagedown_converter",["hyperdown","emojiList"],function(e,t){"use strict";function n(e){return e}function r(e){return!1}function i(){}function o(){}var a={};i.prototype={chain:function(e,t){var r=this[e];if(!r)throw new Error("unknown hook "+e);r===n?this[e]=t:this[e]=function(e){var n=Array.prototype.slice.call(arguments,0);return n[0]=r.apply(null,n),t.apply(null,n)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(e){this[e]=n},addFalse:function(e){this[e]=r}},a.HookCollection=i,o.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}},a.Converter=new e;var s=a.Converter.hooks=new i;return s.addNoop("plainLinkText"),s.addNoop("preConversion"),s.addNoop("postNormalization"),s.addNoop("preBlockGamut"),s.addNoop("postBlockGamut"),s.addNoop("preSpanGamut"),s.addNoop("postSpanGamut"),s.addNoop("postConversion"),a.Converter.hook("beforeParseInline",function(e){return e=e.replace(/\$\$(.+?)\$\$/g,function(e){return a.Converter.makeHolder("$$"+e+"$$")})}),a.Converter.hook("afterParseInlineBeforeRelease",function(e){return e=e.replace(/:([_a-z0-9]+):/g,function(e,n){if(-1!==t.indexOf(n)){var r='<img src="'+SF.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'">';return a.Converter.makeHolder(r)}return e})}),a}),define("pagedown_sanitizer",["pagedown_converter"],function(e){"use strict";function t(e){return e.replace(/<[^>]*>?/gi,n)}function n(e){return e.match(a)||e.match(s)||e.match(l)?e:""}function r(e){if(""==e)return"";var t=/<\/?\w+[^>]*(\s|$|>)/g,n=e.toLowerCase().match(t),r=(n||[]).length;if(0==r)return e;for(var i,o,a,s="<p><img><br><li><hr><th>",l=[],c=[],u=!1,d=0;r>d;d++)if(i=n[d].replace(/<\/?(\w+).*/,"$1"),!(l[d]||s.search("<"+i+">")>-1)){if(o=n[d],a=-1,!/^<\//.test(o))for(var h=d+1;r>h;h++)if(!l[h]&&n[h]=="</"+i+">"){a=h;break}-1==a?u=c[d]=!0:l[a]=!0}if(!u)return e;var d=0;return e=e.replace(t,function(e){var t=c[d]?"":e;return d++,t})}var i,o;"object"==typeof exports&&"function"==typeof require?(i=exports,o=require("../hyperdown/hyperdown.js")):(i=e,o=i.Converter),i.getSanitizingConverter=function(){var e=o;return e.hooks.chain("postConversion",t),e.hooks.chain("postConversion",r),e};var a=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|h4|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul|table|td|tbody|th|thead|tr)>|<(br|hr)\s?\/?>)$/i,s=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,l=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;return i}),define("pagedown_extra",["pagedown_converter"],function(e){function t(e){return e.replace(/^\s+|\s+$/g,"")}function n(e){return e.replace(/\s+$/g,"")}function r(e){return e.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function i(e,t){return-1!=e.indexOf(t)}function o(e,t){return e.replace(/<[^>]*>?/gi,function(e){return e.match(t)?e:""})}function a(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=e[r];for(r=0;r<t.length;r++)n[t[r]]=t[r];var i=[];for(var o in n)n.hasOwnProperty(o)&&i.push(n[o]);return i}function s(e){return""!=e.charAt(0)&&(e=""+e),""!=e.charAt(e.length-1)&&(e+=""),e}function l(e){return""==e.charAt(0)&&(e=e.substr(1)),""==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}function c(e,t){return o(u(e,t),m)}function u(e,t){var n=t.blockGamutHookCallback(e);return n=f(n),n=n.replace(/~D/g,"$$").replace(/~T/g,"~"),n=t.previousPostConversion(n)}function d(e){return e.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function h(e){return e.replace(/~I/g,"|").replace(/~i/g,":")}function f(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)})}function p(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function g(e,t){var n=t;return n=n.replace(/&\#8220;/g,'"'),n=n.replace(/&\#8221;/g,'"'),n=n.replace(/&\#8216;/g,"'"),n=n.replace(/&\#8217;/g,"'"),n=n.replace(/&\#8212;/g,"---"),n=n.replace(/&\#8211;/g,"--"),n=n.replace(/&\#8230;/g,"...")}var m=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),e.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4},e.Extra.init=function(t,n){var r=new e.Extra,o=[],a=[],s=[],l=["unHashExtraBlocks"];return n=n||{},n.extensions=n.extensions||["all"],i(n.extensions,"all")&&(n.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"]),a.push("wrapHeaders"),i(n.extensions,"attr_list")&&(o.push("hashFcbAttributeBlocks"),a.push("hashHeaderAttributeBlocks"),l.push("applyAttributeBlocks"),r.attributeBlocks=!0),i(n.extensions,"fenced_code_gfm")&&(a.push("fencedCodeBlocks"),o.push("fencedCodeBlocks")),i(n.extensions,"tables")&&a.push("tables"),i(n.extensions,"def_list")&&a.push("definitionLists"),i(n.extensions,"footnotes")&&(o.push("stripFootnoteDefinitions"),a.push("doFootnotes"),l.push("printFootnotes")),i(n.extensions,"smartypants")&&l.push("runSmartyPants"),i(n.extensions,"strikethrough")&&s.push("strikethrough"),i(n.extensions,"newlines")&&s.push("newlines"),t.hooks.chain("postNormalization",function(e){return r.doTransform(o,e)+"\n"}),t.hooks.chain("preBlockGamut",function(e,t){return r.blockGamutHookCallback=t,e=d(e),e=r.doTransform(a,e)+"\n",e=h(e)}),t.hooks.chain("postSpanGamut",function(e){return r.doTransform(s,e)}),r.previousPostConversion=t.hooks.postConversion,t.hooks.chain("postConversion",function(e){return e=r.doTransform(l,e),r.hashBlocks=[],r.footnotes={},r.usedFootnotes=[],e}),"highlighter"in n&&(r.googleCodePrettify="prettify"===n.highlighter,r.highlightJs="highlight"===n.highlighter),"table_class"in n&&(r.tableClass=n.table_class),r.converter=t,r},e.Extra.prototype.doTransform=function(e,t){for(var n=0;n<e.length;n++)t=this[e[n]](t);return t},e.Extra.prototype.hashExtraBlock=function(e){return"\n<p>~X"+(this.hashBlocks.push(e)-1)+"X</p>\n"},e.Extra.prototype.hashExtraInline=function(e){return"~X"+(this.hashBlocks.push(e)-1)+"X"},e.Extra.prototype.unHashExtraBlocks=function(e){function t(){var r=!1;e=e.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(e,t){r=!0;var i=parseInt(t,10);return n.hashBlocks[i]}),r===!0&&t()}var n=this;return t(),e},e.Extra.prototype.wrapHeaders=function(e){function t(e){return"\n"+e+"\n"}return e=e.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,t),e=e.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,t),e=e.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,t)};var v="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",b=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+v+"[ \\t]*(?:\\n|0x03)","gm"),y=new RegExp("^(.*)[ \\t]+"+v+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),x=new RegExp("^(```[ \\t]*[^{\\s]*)[ \\t]+"+v+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");e.Extra.prototype.hashHeaderAttributeBlocks=function(e){function t(e,t,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+t+"\n"}var n=this;return e=e.replace(b,t),e=e.replace(y,t)},e.Extra.prototype.hashFcbAttributeBlocks=function(e){function t(e,t,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+t+"\n"}var n=this;return e.replace(x,t)},e.Extra.prototype.applyAttributeBlocks=function(e){var t=this,n=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return e=e.replace(n,function(e,n,r,i,o){if(!r)return"";for(var s=parseInt(n,10),l=t.hashBlocks[s],c=l.match(/#[^\s#.]+/g)||[],u=c[0]?' id="'+c[0].substr(1,c[0].length-1)+'"':"",d=l.match(/\.[^\s#.]+/g)||[],h=0;h<d.length;h++)d[h]=d[h].substr(1,d[h].length-1);var f="";return i&&(d=a(d,[i])),d.length>0&&(f=' class="'+d.join(" ")+'"'),"<"+r+u+f+o})},e.Extra.prototype.tables=function(e){function n(e,n,i,o,a,s){n=n.replace(/^ *[|]/m,""),i=i.replace(/^ *[|]/m,""),o=o.replace(/^ *[|]/gm,""),n=n.replace(/[|] *$/m,""),i=i.replace(/[|] *$/m,""),o=o.replace(/[|] *$/gm,""),alignspecs=i.split(/ *[|] */),align=[];for(var l=0;l<alignspecs.length;l++){var u=alignspecs[l];u.match(/^ *-+: *$/m)?align[l]=' style="text-align:right;"':u.match(/^ *:-+: *$/m)?align[l]=' style="text-align:center;"':u.match(/^ *:-+ *$/m)?align[l]=' style="text-align:left;"':align[l]=""}var d=n.split(/ *[|] */),h=d.length,f=r.tableClass?' class="'+r.tableClass+'"':"",p=["<table",f,">\n","<thead>\n","<tr>\n"].join("");for(l=0;h>l;l++){var g=c(t(d[l]),r);p+=["  <th",align[l],">",g,"</th>\n"].join("")}p+="</tr>\n</thead>\n";var m=o.split("\n");for(l=0;l<m.length;l++)if(!m[l].match(/^\s*$/)){for(var v=m[l].split(/ *[|] */),b=h-v.length,y=0;b>y;y++)v.push("");for(p+="<tr>\n",y=0;h>y;y++){var x=c(t(v[y]),r);p+=["  <td",align[y],">",x,"</td>\n"].join("")}p+="</tr>\n"}return p+="</table>\n",r.hashExtraBlock(p)}var r=this,i=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),o=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return e=e.replace(i,n),e=e.replace(o,n)},e.Extra.prototype.stripFootnoteDefinitions=function(e){var t=this;return e=e.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(e,n,r){return n=p(n),r+="\n",r=r.replace(/^[ ]{0,3}/g,""),t.footnotes[n]=r,"\n"})},e.Extra.prototype.doFootnotes=function(e){var t=this;if(t.isConvertingFootnote===!0)return e;var n=0;return e=e.replace(/\[\^(.+?)\]/g,function(e,r){var i=p(r),o=t.footnotes[i];if(void 0===o)return e;n++,t.usedFootnotes.push(i);var a='<a href="#fn:'+i+'" id="fnref:'+i+'" title="See footnote" class="footnote">'+n+"</a>";return t.hashExtraInline(a)})},e.Extra.prototype.printFootnotes=function(e){var t=this;if(0===t.usedFootnotes.length)return e;e+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var n=0;n<t.usedFootnotes.length;n++){var r=t.usedFootnotes[n],i=t.footnotes[r];t.isConvertingFootnote=!0;var o=c(i,t);delete t.isConvertingFootnote,e+='<li id="fn:'+r+'">'+o+' <a href="#fnref:'+r+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return e+="</ol>\n</div>"},e.Extra.prototype.fencedCodeBlocks=function(e){function t(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~")}var n=this;return e=e.replace(/(?:^|\n)```[ \t]*(\S*)[ \t]*\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(e,r,i){var o=r,a=i,s=n.googleCodePrettify?' class="prettyprint"':"",l="";o&&(l=n.googleCodePrettify||n.highlightJs?' class="language-'+o+'"':' class="'+o+'"');var c=["<pre",s,"><code",l,">",t(a),"</code></pre>"].join("");return n.hashExtraBlock(c)})},e.Extra.prototype.educatePants=function(e){var t=this,n="",r=0;e.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(i,o,a,s,l,c,u){var d=e.substring(r,u);return n+=t.applyPants(d),t.smartyPantsLastChar=n.substring(n.length-1),r=u+i.length,o?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(a)?t.smartyPantsLastChar=l.substring(l.length-1):l=t.educatePants(l),void(n+=o+a+s+l+c)):void(n+=i)});var i=e.substring(r);return n+=t.applyPants(i),t.smartyPantsLastChar=n.substring(n.length-1),n},e.Extra.prototype.applyPants=function(e){return e=e.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),e=e.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),e=e.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(e=e.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),e=e.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),e=e.replace(/"'(?=\w)/g,"&#8220;&#8216;"),e=e.replace(/'"(?=\w)/g,"&#8216;&#8220;"),e=e.replace(/'(?=\d{2}s)/g,"&#8217;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),e=e.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),e=e.replace(/'(?=\s|s\b)/g,"&#8217;"),e=e.replace(/'/g,"&#8216;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),e=e.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),e=e.replace(/"(?=\s)/g,"&#8221;"),e=e.replace(/"/gi,"&#8220;"))},e.Extra.prototype.runSmartyPants=function(e){return this.smartyPantsLastChar="",e=this.educatePants(e),e=e.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,g)},e.Extra.prototype.definitionLists=function(e){var n=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),r=this;return e=s(e),e=e.replace(n,function(e,n,i){var o=t(r.processDefListItems(i));return o="<dl>\n"+o+"\n</dl>",n+r.hashExtraBlock(o)+"\n\n"}),l(e)},e.Extra.prototype.processDefListItems=function(e){var i=this,o=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),a=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return e=s(e),e=e.replace(/\n{2,}(?=\\x03)/,"\n"),e=e.replace(o,function(e,n,r){for(var o=t(r).split("\n"),a="",s=0;s<o.length;s++){var l=o[s];l=c(t(l),i),a+="\n<dt>"+l+"</dt>"}return a+"\n"}),e=e.replace(a,function(e,t,o,a){return t||a.match(/\n{2,}/)?(a=Array(o.length+1).join(" ")+a,a=r(a)+"\n\n",a="\n"+u(a,i)+"\n"):(a=n(a),a=c(r(a),i)),"\n<dd>"+a+"</dd>\n"}),l(e)},e.Extra.prototype.strikethrough=function(e){return e.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},e.Extra.prototype.newlines=function(e){return e.replace(/(<(?:br|\/li)>)?\n/g,function(e,t){return t?e:" <br>\n"})}}),function(){var e=window.log||$.noop,t={fileError:function(e,t,n){window.alert(n)}},n=window.FileReader||window.File&&window.File.prototype.getAsBinary,r=!!window.FormData,i=window.FileReader||window.File&&window.File.prototype.getAsDataURL,o=!!document.createElement("canvas").toDataURL,a=o&&window.atob,s=!!document.createElement("canvas").mozGetAsFile,l=window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary||window.Blob&&window.Uint8Array&&window.ProgressEvent||window.ArrayBuffer&&window.BlobBuilder,c=!!window.FormData,u=!!document.createElement("canvas").toDataURL,d=n&&l||r&&c,h=i&&(a&&l||s&&c),f=i,p=i&&o,g=function(e){return e.substring(e.indexOf(",")+1,e.length)},m=function(t,n){var i={type:n.type||"",size:n.size||n.fileSize,name:n.name||n.fileName};if(t.resizeImage&&!h&&t.allowUploadOriginalImage&&(e("WARN: Fall back to upload original un-resized image."),t.resizeImage=!1),!t.resizeImage){if(t.fileType&&t.fileType.test&&!t.fileType.test(i.name.substr(i.name.lastIndexOf(".")+1)))return e("ERROR: Invalid Filetype."),
void t.fileError.call(this,i,"INVALID_FILETYPE","Invalid filetype.");if(t.fileMaxSize&&n.size>t.fileMaxSize)return e("ERROR: File exceeds size limit."),void t.fileError.call(this,i,"FILE_EXCEEDS_SIZE_LIMIT","File exceeds size limit.")}if(!t.resizeImage&&r)e("INFO: Bypass file reading, insert file object into FormData object directly."),b(t,"file",n,i);else if(window.FileReader){e("INFO: Using FileReader to do asynchronously file reading.");var o=new FileReader;o.onerror=function(n){if(n.target.error)switch(n.target.error){case 8:e("ERROR: File not found."),t.fileError.call(this,i,"FILE_NOT_FOUND","File not found.");break;case 24:e("ERROR: File not readable."),t.fileError.call(this,i,"IO_ERROR","File not readable.");break;case 18:e("ERROR: File cannot be access due to security constrant."),t.fileError.call(this,i,"SECURITY_ERROR","File cannot be access due to security constrant.");break;case 20:}},t.resizeImage?(o.onloadend=function(e){var r=e.target.result;v(t,r,i,n)},o.readAsDataURL(n)):l?(o.onloadend=function(e){var n=e.target.result;b(t,"bin",n,i)},o.readAsBinaryString(n)):t.allowDataInBase64?(o.onloadend=function(e){b(t,"base64",g(e.target.result),i)},o.readAsDataURL(n)):(e("ERROR: No available method to extract file; allowDataInBase64 not set."),t.fileError.call(this,i,"NO_BIN_SUPPORT_AND_BASE64_NOT_SET","No available method to extract file; allowDataInBase64 not set."))}else if(window.File&&window.File.prototype.getAsBinary)if(e("WARN: FileReader does not exist, UI will be blocked when reading big file."),t.resizeImage){try{var a=n.getAsDataURL()}catch(s){return e("ERROR: File not readable."),void t.fileError.call(this,i,"IO_ERROR","File not readable.")}v(t,dataurl,i,n)}else{try{var a=n.getAsBinary()}catch(s){return e("ERROR: File not readable."),void t.fileError.call(this,i,"IO_ERROR","File not readable.")}b(t,"bin",a,i)}else t.fallback?t.fallback():t.fileError.call(this,i,"NOT_SUPPORT","ERROR: No available method to extract file; this browser is not supported.")},v=function(t,n,r,i){var d=new Image;d.onerror=function(){e("ERROR: <img> failed to load, file is not a supported image format."),t.fileError.call(this,r,"FILE_NOT_IMAGE","File is not a supported image format.")},d.onload=function(){var n=document.createElement("canvas"),h=function(n){t.imageType&&"auto"!==t.imageType||("image/jpeg"===r.type?t.imageType="jpeg":t.imageType="png");var d={type:"image/"+t.imageType,name:r.name.substr(0,r.name.indexOf("."))+".resized."+t.imageType};if(s&&c){var h=n.mozGetAsFile(d.name,"image/"+t.imageType);d.size=i.size||i.fileSize,b(t,"file",h,d)}else if(a&&l){var f=window.atob(g(n.toDataURL("image/"+t.imageType)));d.size=f.length,b(t,"bin",f,d)}else t.allowDataInBase64&&o&&u?b(t,"base64",g(n.toDataURL("image/"+t.imageType)),d):(e("ERROR: No available method to extract image; allowDataInBase64 not set."),t.fileError.call(this,r,"NO_BIN_SUPPORT_AND_BASE64_NOT_SET","No available method to extract file; allowDataInBase64 not set."))};t.resizeImage(d,n,h)},d.src=n},b=function(t,n,r,i){if(c&&"file"===n){e("INFO: Using FormData to construct form.");var o=new FormData;o.append(t.name,r),t.processData=!1,t.contentType=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){return t.data=o,t.__beforeSend?t.__beforeSend.call(this,e,t):void 0}}else if(l&&"bin"===n){e("INFO: Concat our own multipart/form-data data string."),i.type||(i.type="application/octet-stream"),/[^\x20-\x7E]/.test(i.name)&&(e("INFO: Filename contains non-ASCII code, do UTF8-binary string conversion."),i.name_bin=unescape(encodeURIComponent(i.name)));var a="xhrupload-"+parseInt(Math.random()*(2<<16));t.contentType="multipart/form-data; boundary="+a;var o="--"+a+'\ncontent-disposition: form-data; name="'+t.name+'"; filename="'+(i.name_bin||i.name)+'"\nContent-Type: '+i.type+"\n\n"+r+"\n\n--"+a+"--";if(window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary)e("INFO: Pass binary string to xhr."),t.data=o;else if(window.Blob&&window.Uint8Array&&window.ProgressEvent){e("INFO: Make XH2 blob string");for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);var d=s.buffer;t.processData=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){return t.data=d,t.__beforeSend?t.__beforeSend.call(this,e,t):void 0}}else{e("INFO: Convert binary string into Blob.");var h=new ArrayBuffer(o.length),s=new Uint8Array(h);$.each(o,function(e,t){s[e]=t.charCodeAt(0)});var f=new BlobBuilder;f.append(h);var d=f.getBlob();t.processData=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){return t.data=d,t.__beforeSend?t.__beforeSend.call(this,e,t):void 0}}}else{if(!t.allowDataInBase64||"base64"!==n)return e("ERROR: Data is not given in processable form."),void t.fileError.call(this,i,"INTERNAL_ERROR","Data is not given in processable form.");e("INFO: Concat our own multipart/form-data data string; send the file in base64 because binary xhr is not supported."),i.type||(i.type="application/octet-stream"),t.url+="?enc=base64";var a="xhrupload-"+parseInt(Math.random()*(2<<16));t.contentType="multipart/form-data; boundary="+a,t.data="--"+a+'\ncontent-disposition: form-data; name="'+t.name+'"; filename="'+encodeURIComponent(i.name)+'.base64"\nContent-Transfer-Encoding: base64\nContent-Type: '+i.type+"\n\n"+r+"\n\n--"+a+"--"}y(t)},y=function(t){e("INFO: Sending file."),"string"==typeof t.data&&l&&(e("INFO: Using xhr.sendAsBinary."),t.___beforeSend=t.beforeSend,t.beforeSend=function(e,t){return window.XMLHttpRequest.prototype.sendAsBinary&&(e.send=e.sendAsBinary),t.___beforeSend?t.___beforeSend.call(this,e,t):void 0}),$.ajax(t)};$.fn.fileUpload=function(n){return this.each(function(r,i){$(i).is("input[type=file]")&&(e("INFO: binding onchange event to a input[type=file]."),$(i).bind("change",function(){if(!this.files)return void(n.fallback&&n.fallback());if(!this.files.length)return void e("ERROR: no file selected.");this.files.length>1&&e("WARN: Multiple file upload not implemented yet, only first file will be uploaded."),n.name=$(this).attr("name");var r=this.files[0];if(n.callback){var o=function(e){n.url=n.url||e,m($.extend({},t,n),r)};n.callback(o)}else if($(i).parents("#localPic").length){var a=$(i).val();-1!==a.indexOf("\\fakepath")&&(a=a.split("\\fakepath\\")[1]),$("#fileName").val(a),$(".done-btn").click(function(){m($.extend({},t,n),r)})}else m($.extend({},t,n),this.files[0]);this.form?this.form.reset():e("WARN: Unable to reset file selection, upload won't be triggered again if user selects the same file.")})),$(i).is("form")?e("ERROR: <form> not implemented yet."):(e("INFO: binding ondrop event."),$(i).bind("dragover",function(e){return!1}).bind("drop",function(r){return r.originalEvent.dataTransfer.files?r.originalEvent.dataTransfer.files.length?(!r.originalEvent.dataTransfer.files.length>1&&e("WARN: Multiple file upload not implemented yet, only first file will be uploaded."),m($.extend({},t,n),r.originalEvent.dataTransfer.files[0]),!1):(e('ERROR: User had dropped a virual file (e.g. "My Computer")'),!1):(e("ERROR: No FileList object present; user might had dropped text."),!1)}))}),this},$.fileUploadSupported=d,$.imageUploadSupported=h,$.fileUploadAsBase64Supported=f,$.imageUploadAsBase64Supported=p}(),define("fileUpload",["jquery"],function(e){return function(){var t;return t||e.$.fn.fileUpload}}(this)),define("pagedown_editor",["jquery","pagedown_sanitizer","sfModal","pagedown_extra","fileUpload"],function(e,t,n){"use strict";function r(){}function i(e,t){t=t||"wmd-input",this.buttonBar=p.getElementById("wmd-button-bar"+e),this.preview=p.getElementById("wmd-preview"+e),this.input=p.getElementById(t+e)}function o(e,t){var n,r,i,o=this,s=[],l=0,c="none",u=function(e,t){c!=e&&(c=e,t||f()),b.isIE&&"moving"==c?i=null:r=setTimeout(h,1)},h=function(e){i=new a(t,e),r=void 0};this.setCommandMode=function(){c="command",f(),r=setTimeout(h,0)},this.canUndo=function(){return l>1},this.canRedo=function(){return s[l+1]?!0:!1},this.undo=function(){o.canUndo()&&(n?(n.restore(),n=null):(s[l]=new a(t),s[--l].restore(),e&&e())),c="none",t.input.focus(),h()},this.redo=function(){o.canRedo()&&(s[++l].restore(),e&&e()),c="none",t.input.focus(),h()};var f=function(){var r=i||new a(t);return r?"moving"==c?void(n||(n=r)):(n&&(s[l-1].text!=n.text&&(s[l++]=n),n=null),s[l++]=r,s[l+1]=null,void(e&&e())):!1},p=function(e){var t=!1;if((e.ctrlKey||e.metaKey)&&!e.altKey){var n=e.charCode||e.keyCode,r=String.fromCharCode(n);switch(r.toLowerCase()){case"y":o.redo(),t=!0;break;case"z":e.shiftKey?o.redo():o.undo(),t=!0}}return t?(e.preventDefault&&e.preventDefault(),void(window.event&&(window.event.returnValue=!1))):void 0},g=function(e){if(!e.ctrlKey&&!e.metaKey){var t=e.keyCode;t>=33&&40>=t||t>=63232&&63235>=t?u("moving"):8==t||46==t||127==t?u("deleting"):13==t?u("newlines"):27==t?u("escape"):(16>t||t>20||9===t)&&91!=t&&u("typing")}},m=function(){d.addEvent(t.input,"keypress",function(e){!e.ctrlKey&&!e.metaKey||e.altKey||89!=e.keyCode&&90!=e.keyCode||e.preventDefault()});var e=function(){(b.isIE||i&&i.text!=t.input.value)&&void 0==r&&(c="paste",f(),h())};d.addEvent(t.input,"keydown",p),d.addEvent(t.input,"keydown",g),d.addEvent(t.input,"mousedown",function(){u("moving")}),t.input.onpaste=e,t.input.ondrop=e},v=function(){m(),h(!0),f()};v()}function a(e,t){var n=this,i=e.input;this.init=function(){d.isVisible(i)&&(t||!p.activeElement||p.activeElement===i)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=i.scrollTop,(!this.text&&i.selectionStart||0===i.selectionStart)&&(this.text=i.value))},this.setInputAreaSelection=function(){if(d.isVisible(i))if(void 0===i.selectionStart||b.isOpera){if(p.selection){if(p.activeElement&&p.activeElement!==i)return;i.focus();var e=i.createTextRange();e.moveStart("character",-i.value.length),e.moveEnd("character",-i.value.length),e.moveEnd("character",n.end),e.moveStart("character",n.start),e.select()}}else i.focus(),i.selectionStart=n.start,i.selectionEnd=n.end,i.scrollTop=n.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(e.ieCachedRange||!i.selectionStart&&0!==i.selectionStart){if(p.selection){n.text=d.fixEolChars(i.value);var t=e.ieCachedRange||p.selection.createRange(),r=d.fixEolChars(t.text),o="",a=o+r+o;t.text=a;var s=d.fixEolChars(i.value);t.moveStart("character",-a.length),t.text=r,n.start=s.indexOf(o),n.end=s.lastIndexOf(o)-o.length;var l=n.text.length-d.fixEolChars(i.value).length;if(l){for(t.moveStart("character",-r.length);l--;)r+="\n",n.end+=1;t.text=r}e.ieCachedRange&&(n.scrollTop=e.ieCachedScrollTop),e.ieCachedRange=null,this.setInputAreaSelection()}}else n.start=i.selectionStart,n.end=i.selectionEnd},this.restore=function(){void 0!=n.text&&n.text!=i.value&&(i.value=n.text),this.setInputAreaSelection(),i.scrollTop=n.scrollTop},this.getChunks=function(){var e=new r;return e.before=d.fixEolChars(n.text.substring(0,n.start)),e.startTag="",e.selection=d.fixEolChars(n.text.substring(n.start,n.end)),e.endTag="",e.after=d.fixEolChars(n.text.substring(n.end)),e.scrollTop=n.scrollTop,e},this.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after,this.scrollTop=e.scrollTop},this.init()}function s(e,t,n){var r,i,o,a=3e3,s="delayed",l=function(e,t){d.addEvent(e,"input",t),e.onpaste=t,e.ondrop=t,d.addEvent(e,"keypress",t),d.addEvent(e,"keydown",t)},c=function(){var e=0;return window.innerHeight?e=window.pageYOffset:p.documentElement&&p.documentElement.scrollTop?e=p.documentElement.scrollTop:p.body&&(e=p.body.scrollTop),e},u=function(){if(t.preview){var n=t.input.value;if(!n||n!=o){o=n;var r=(new Date).getTime();n=e.makeHtml(n);var a=(new Date).getTime();i=a-r,k(n)}}},f=function(){if(r&&(clearTimeout(r),r=void 0),"manual"!==s){var e=0;"delayed"===s&&(e=i),e>a&&(e=a),r=setTimeout(u,e)}},g=function(e){return e.scrollHeight<=e.clientHeight?1:e.scrollTop/(e.scrollHeight-e.clientHeight)},m=function(){t.preview&&(t.preview.scrollTop=(t.preview.scrollHeight-t.preview.clientHeight)*g(t.preview))};this.refresh=function(e){e?(o="",u()):f()},this.processingTime=function(){return i};var v,y=!0,x=function(e){var n=t.preview,r=n.parentNode,i=n.nextSibling;r.removeChild(n),n.innerHTML=e,i?r.insertBefore(n,i):r.appendChild(n)},_=function(e){t.preview.innerHTML=e},w=function(e){if(v)return v(e);try{_(e),v=_}catch(t){v=x,v(e)}},k=function(e){var r=h.getTop(t.input)-c();if(t.preview&&(w(e),n()),m(),y)return void(y=!1);var i=h.getTop(t.input)-c();b.isIE?setTimeout(function(){window.scrollBy(0,i-r)},0):window.scrollBy(0,i-r)},C=function(){l(t.input,f),u(),t.preview&&(t.preview.scrollTop=0)};C()}function l(e,t,n,r,i,o,s){function l(e){if(g.focus(),e.textOp){n&&n.setCommandMode();var i=new a(t);if(!i)return;var o=i.getChunks(),s=function(){g.focus(),o&&i.setChunks(o),i.restore(),r.refresh()},l=e.textOp(o,s);l||s()}e.execute&&e.execute(n)}function c(e,n){var r="0px",i="-20px",o="-40px",a=e.getElementsByTagName("a")[0];n?(a.style.backgroundPosition=e.XShift+" "+r,e.onmouseover=function(){a.style.backgroundPosition=this.XShift+" "+o},e.onmouseout=function(){a.style.backgroundPosition=this.XShift+" "+r},b.isIE&&(e.onmousedown=function(){p.activeElement&&p.activeElement!==t.input||(t.ieCachedRange=document.selection.createRange(),t.ieCachedScrollTop=t.input.scrollTop)}),e.isHelp||(e.onclick=function(){return this.onmouseout&&this.onmouseout(),l(this),!1})):(a.style.backgroundPosition=e.XShift+" "+i,e.onmouseover=e.onmouseout=e.onclick=function(){})}function u(e){return"string"==typeof e&&(e=i[e]),function(){e.apply(i,arguments)}}function h(){var n=t.buttonBar,r=document.createElement("ul");r.id="wmd-button-row"+e,r.className="editor__menu clearfix",r=n.appendChild(r);var i=0,a=function(t,n,o,a){var s=document.createElement("li");s.className="wmd-button",s.style.left=i+"px",i+=25;var l=document.createElement("a");return l.className="editor__menu--bold",s.id=t+e,s.appendChild(l),s.title=n,s.XShift=o,a&&(s.textOp=a),c(s,!0),r.appendChild(s),s},l=function(t){var n=document.createElement("li");n.className="editor__menu--divider wmd-spacer"+t,n.id="wmd-spacer"+t+e,r.appendChild(n),i+=25};v.bold=a("wmd-bold-button",s("bold"),"0px",u("doBold")),v.italic=a("wmd-italic-button",s("italic"),"-20px",u("doItalic")),l(1),v.link=a("wmd-link-button",s("link"),"-40px",u(function(e,t){return this.doLinkOrImage(e,t,!1)})),v.quote=a("wmd-quote-button",s("quote"),"-60px",u("doBlockquote")),v.code=a("wmd-code-button",s("code"),"-80px",u("doCode")),v.image=a("wmd-image-button",s("image"),"-100px",u(function(e,t){return this.doLinkOrImage(e,t,!0)})),l(2),v.olist=a("wmd-olist-button",s("olist"),"-120px",u(function(e,t){this.doList(e,t,!0)})),v.ulist=a("wmd-ulist-button",s("ulist"),"-140px",u(function(e,t){this.doList(e,t,!1)})),v.heading=a("wmd-heading-button",s("heading"),"-160px",u("doHeading")),v.hr=a("wmd-hr-button",s("hr"),"-180px",u("doHorizontalRule")),l(3),v.undo=a("wmd-undo-button",s("undo"),"-200px",null),v.undo.execute=function(e){e&&e.undo()};var d=s(/win/.test(m.platform.toLowerCase())?"redo":"redomac");if(v.redo=a("wmd-redo-button",d,"-220px",null),v.redo.execute=function(e){e&&e.redo()},o){var h=document.createElement("li"),p=document.createElement("span");h.appendChild(p),h.className="wmd-button wmd-help-button",h.id="wmd-help-button"+e,h.XShift="-240px",h.isHelp=!0,h.style.right="0px",h.title=s("help"),h.onclick=o.handler,c(h,!0),r.appendChild(h),v.help=h}f(),l(4),v.help=a("wmd-help-button",s("help"),"-300px")}function f(){n&&(c(v.undo,n.canUndo()),c(v.redo,n.canRedo()))}var g=t.input,v={};h();var y="keydown";b.isOpera&&(y="keypress"),d.addEvent(g,y,function(e){if((e.ctrlKey||e.metaKey)&&!e.altKey&&!e.shiftKey){var t=e.charCode||e.keyCode,n=String.fromCharCode(t).toLowerCase();switch(n){case"b":e.preventDefault(),l(v.bold);break;case"i":e.preventDefault(),l(v.italic);break;case"l":e.preventDefault(),l(v.link);break;case"q":e.preventDefault(),l(v.quote);break;case"k":e.preventDefault(),l(v.code);break;case"g":e.preventDefault(),l(v.image);break;case"o":e.preventDefault(),l(v.olist);break;case"u":e.preventDefault(),l(v.ulist);break;case"h":e.preventDefault(),l(v.heading);break;case"r":e.preventDefault(),l(v.hr);break;case"y":e.preventDefault(),l(v.redo);break;case"z":e.shiftKey?(e.preventDefault(),l(v.redo)):(e.preventDefault(),l(v.undo));break;default:return}}}),d.addEvent(g,"keyup",function(e){if(e.shiftKey&&!e.ctrlKey&&!e.metaKey){var t=e.charCode||e.keyCode;if(13===t){var n={};n.textOp=u("doAutoindent"),l(n)}}}),b.isIE&&d.addEvent(g,"keydown",function(e){var t=e.keyCode;return 27===t?!1:void 0}),this.setUndoRedoButtonStates=f}function c(e,t){this.hooks=e,this.getString=t}function u(e){return e.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(e,t,n){return t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g," ")}),t=decodeURIComponent(t),t=encodeURI(t).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g,"%2b")}),n&&(n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,""),n=n.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),n?t+' "'+n+'"':t})}var d={},h={},f={},p=window.document,g=window.RegExp,m=window.navigator,v={lineLength:72},b={isIE:/msie/.test(m.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(m.userAgent.toLowerCase())||/msie 5/.test(m.userAgent.toLowerCase()),isOpera:/opera/.test(m.userAgent.toLowerCase())},y={bold:"加粗 <strong> Ctrl+B",boldexample:"加粗文字",italic:"斜体 <em> Ctrl+I",italicexample:"斜体文字",link:"链接 <a> Ctrl+L",linkdescription:"链接描述",linkdialog:'<input type="text" id="editorLinkText" class="form-control text-28" placeholder="请输入链接地址">',quote:"引用 <blockquote> Ctrl+Q",quoteexample:"引用文字",code:"代码 <pre><code> Ctrl+K",codeexample:"请输入代码",image:"图片 <img> Ctrl+G",imagedescription:"图片描述",imagedialog:'<ul class="nav nav-tabs" role="tablist"><li class="active"><a href="#localPic" role="tab" data-toggle="tab">本地上传</a></li>    <li><a href="#remotePic" role="tab" data-toggle="tab">远程地址获取</a></li></ul><div class="tab-content">    <div class="tab-pane fade active in pt20 form-horizontal" id="localPic">        <span class="text-muted">图片体积不得大于 4 MB</span>        <br>        <div class="widget-upload form-group">        <input type="file" id="editorUpload" name="image" class="widget-upload__file">        <div class="col-sm-8">        <input type="text" id="fileName" class="form-control col-sm-10 widget-upload__text" placeholder="拖动图片到这里" readonly="">        </div>        <a href="javascript:void(0);" class="btn col-sm-2 btn-default">选择图片</a>        </div>    </div>    <div class="tab-pane fade pt20" id="remotePic">    <input type="url" name="img" id="remotePicUrl" class="form-control text-28" placeholder="请输入图片所在网址">    </div></div>',olist:"数字列表 <ol> Ctrl+O",ulist:"普通列表 <ul> Ctrl+U",litem:"列表项目",heading:"标题 <h1>/<h2> Ctrl+H",headingexample:"标题文字",hr:"分割线 <hr> Ctrl+R",undo:"撤销 - Ctrl+Z",redo:"重做 - Ctrl+Y",redomac:"重做 - Ctrl+Shift+Z",zen:"全屏",help:"Markdown 语法"};t.Editor=function(e,n,r){r=r||{},"function"==typeof r.handler&&(r={helpButton:r}),r.strings=r.strings||{},r.helpButton&&(r.strings.help=r.strings.help||r.helpButton.title);var a=function(e){return r.strings[e]||y[e]};n=n||"";var u=this.hooks=new t.HookCollection;u.addNoop("onPreviewRefresh"),u.addNoop("postBlockquoteCreation"),u.addFalse("insertImageDialog"),this.getConverter=function(){return e};var d,h=this;this.run=function(t){if(!d){d=new i(n,t);var f,g,m=new c(u,a),v=new s(e,d,function(){u.onPreviewRefresh()});/\?noundo/.test(p.location.href)||(f=new o(function(){v.refresh(),g&&g.setUndoRedoButtonStates()},d),this.textOperation=function(e){f.setCommandMode(),e(),h.refreshPreview()}),g=new l(n,d,f,v,m,r.helpButton,a),g.setUndoRedoButtonStates();var b=h.refreshPreview=function(){v.refresh(!0)};b()}}},r.prototype.findTags=function(e,t){var n,r=this;e&&(n=d.extendRegExp(e,"","$"),this.before=this.before.replace(n,function(e){return r.startTag=r.startTag+e,""}),n=d.extendRegExp(e,"^",""),this.selection=this.selection.replace(n,function(e){return r.startTag=r.startTag+e,""})),t&&(n=d.extendRegExp(t,"","$"),this.selection=this.selection.replace(n,function(e){return r.endTag=e+r.endTag,""}),n=d.extendRegExp(t,"^",""),this.after=this.after.replace(n,function(e){return r.endTag=e+r.endTag,""}))},r.prototype.trimWhitespace=function(e){var t,n,r=this;e?t=n="":(t=function(e){return r.before+=e,""},n=function(e){return r.after=e+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,n)},r.prototype.skipLines=function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=1),e++,t++;var r,i;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+g.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+g.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+g.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+g.$1,this.before){for(r=i="";e--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.before=this.before.replace(new g(r+"$",""),i)}if(this.after){for(r=i="";t--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.after=this.after.replace(new g(r,""),i)}},d.isVisible=function(e){return window.getComputedStyle?"none"!==window.getComputedStyle(e,null).getPropertyValue("display"):e.currentStyle?"none"!==e.currentStyle.display:void 0},d.addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},d.removeEvent=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},d.fixEolChars=function(e){return e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n")},d.extendRegExp=function(e,t,n){(null===t||void 0===t)&&(t=""),(null===n||void 0===n)&&(n="");var r,i=e.toString();return i=i.replace(/\/([gim]*)$/,function(e,t){return r=t,""}),i=i.replace(/(^\/|\/$)/g,""),i=t+i+n,new g(i,r)},h.getTop=function(e,t){var n=e.offsetTop;if(!t)for(;e=e.offsetParent;)n+=e.offsetTop;return n},h.getHeight=function(e){return e.offsetHeight||e.scrollHeight},h.getWidth=function(e){return e.offsetWidth||e.scrollWidth},h.getPageSize=function(){var e,t,n,r;self.innerHeight&&self.scrollMaxY?(e=p.body.scrollWidth,t=self.innerHeight+self.scrollMaxY):p.body.scrollHeight>p.body.offsetHeight?(e=p.body.scrollWidth,t=p.body.scrollHeight):(e=p.body.offsetWidth,t=p.body.offsetHeight),self.innerHeight?(n=self.innerWidth,r=self.innerHeight):p.documentElement&&p.documentElement.clientHeight?(n=p.documentElement.clientWidth,r=p.documentElement.clientHeight):p.body&&(n=p.body.clientWidth,r=p.body.clientHeight);var i=Math.max(e,n),o=Math.max(t,r);return[i,o,n,r]},f.createBackground=function(){var e=p.createElement("div"),t=e.style;e.className="modal-backdrop wmd-prompt-background",t.position="absolute",t.top="0",t.zIndex="1000",b.isIE?t.filter="alpha(opacity=50)":t.opacity="0.5";var n=h.getPageSize();return t.height=n[1]+"px",b.isIE?(t.left=p.documentElement.scrollLeft,t.width=p.documentElement.clientWidth):(t.left="0",t.width="100%"),p.body.appendChild(e),e},f.prompt=function(e,t,n,r){var i,o;void 0===n&&(n="");var a=function(e){var t=e.charCode||e.keyCode;27===t&&s(!0)},s=function(e){d.removeEvent(p.body,"keydown",a);var t=o.value;return e?t=null:(t=t.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(t)||(t="http://"+t)),i.parentNode.removeChild(i),r(t),!1},l=function(){i=p.createElement("div"),i.className="modal-content wmd-prompt-dialog",i.style.padding="10px;",i.style.position="fixed",i.style.width="600px",i.style.zIndex="1001";var r=p.createElement("div");r.className="modal-header",r.innerHTML='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button><h4 class="ml20">'+e+"</h4>",i.appendChild(r);var l=p.createElement("div");l.innerHTML=t,l.style.padding="5px",l.style.margin="20px",i.appendChild(l);var c=p.createElement("form"),u=c.style;c.onsubmit=function(){return s(!1)},u.padding="0",u.margin="0 0 20px",u.cssFloat="left",u.width="100%",u.textAlign="center",u.position="relative",i.appendChild(c),o=p.createElement("input"),o.className="form-control text-28",o.type="text",o.value=n,u=o.style,u.display="block",u.width="80%",u.marginLeft=u.marginRight="auto",c.appendChild(o);var f=p.createElement("input");f.className="btn btn-primary",f.type="button",f.onclick=function(){return s(!1)},f.value="确定",u=f.style,u.margin="10px",u.display="inline",u.width="7em";var g=p.createElement("input");g.className="btn btn-default",g.type="button",g.onclick=function(){return s(!0)},g.value="取消",u=g.style,u.margin="10px",u.display="inline",u.width="7em",c.appendChild(f),c.appendChild(g),d.addEvent(p.body,"keydown",a),i.style.top="50%",i.style.left="50%",i.style.display="block",b.isIE_5or6&&(i.style.position="absolute",i.style.top=p.documentElement.scrollTop+200+"px",i.style.left="50%"),p.body.appendChild(i),i.style.marginTop=-(h.getHeight(i)/2)+"px",i.style.marginLeft=-(h.getWidth(i)/2)+"px"};setTimeout(function(){l();var e=n.length;if(void 0!==o.selectionStart)o.selectionStart=0,o.selectionEnd=e;else if(o.createTextRange){var t=o.createTextRange();t.collapse(!1),t.moveStart("character",-e),t.moveEnd("character",e),t.select()}o.focus()},0)};var x=c.prototype;return x.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",x.unwrap=function(e){var t=new g("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(t,"$1 $2")},x.wrap=function(e,t){this.unwrap(e);var n=new g("(.{1,"+t+"})( +|$\\n?)","gm"),r=this;e.selection=e.selection.replace(n,function(e,t){return new g("^"+r.prefixes,"").test(e)?e:t+"\n"}),e.selection=e.selection.replace(/\s+$/,"")},x.doBold=function(e,t){return this.doBorI(e,t,2,this.getString("boldexample"))},x.doItalic=function(e,t){return this.doBorI(e,t,1,this.getString("italicexample"))},x.doBorI=function(e,t,n,r){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var i=/(\**$)/.exec(e.before)[0],o=/(^\**)/.exec(e.after)[0],a=Math.min(i.length,o.length);if(a>=n&&(2!=a||1!=n))e.before=e.before.replace(g("[*]{"+n+"}$",""),""),e.after=e.after.replace(g("^[*]{"+n+"}",""),"");else if(!e.selection&&o){e.after=e.after.replace(/^([*_]*)/,""),e.before=e.before.replace(/(\s?)$/,"");var s=g.$1;e.before=e.before+o+s}else{e.selection||o||(e.selection=r);var l=1>=n?"*":"**";e.before=e.before+l,e.after=l+e.after}},x.stripLinkDefs=function(e,t){return e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(e,n,r,i,o){return t[n]=e.replace(/\s*$/,""),i?(t[n]=e.replace(/["(](.+?)[")]$/,""),i+o):""})},x.addLinkDef=function(e,t){var n=0,r={};e.before=this.stripLinkDefs(e.before,r),e.selection=this.stripLinkDefs(e.selection,r),e.after=this.stripLinkDefs(e.after,r);var i="",o=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,a=function(e){n++,e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+n+"]:"),i+="\n"+e},s=function(e,t,i,l,c,u){return i=i.replace(o,s),r[c]?(a(r[c]),t+i+l+n+u):e};e.before=e.before.replace(o,s),t?a(t):e.selection=e.selection.replace(o,s);var l=n;return e.after=e.after.replace(o,s),e.after&&(e.after=e.after.replace(/\n*$/,"")),e.after||(e.selection=e.selection.replace(/\n*$/,"")),e.after+="\n\n"+i,l},x.doLinkOrImage=function(t,r,i){t.trimWhitespace(),t.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(!(t.endTag.length>1&&t.startTag.length>0)){if(t.selection=t.startTag+t.selection+t.endTag,t.startTag=t.endTag="",/\n\n/.test(t.selection))return void this.addLinkDef(t,null);var o=this,a=function(e,a){if(n("hide"),null!==e){t.selection=(" "+t.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var s=" [999]: "+u(e),l=o.addLinkDef(t,s);t.startTag=i?"![":"[",t.endTag="]["+l+"]",t.selection||(i?t.selection=a||o.getString("imagedescription"):t.selection=o.getString("linkdescription"))}r()};if(i){if(!this.hooks.insertImageDialog(a)){var s,l,c=this.getString("imagedialog");n({title:"插入图片",content:c,closeText:"取消",doneText:"插入",hidden:function(){e(".wmd-input").focus()},show:function(){e("#editorUpload").fileUpload({url:"/img/upload/image",type:"POST",dataType:"json",beforeSend:function(){var t=e("#editorUpload").val();return e("#editorUpload")[0].files[0].size>4194304?(n("图片过大，只能上传小于 4MB 的图片。"),void(e("#editorUpload")[0].files=null)):(-1!==t.indexOf("\\fakepath")&&(t=t.split("\\fakepath\\")[1]),t||t.trick(),e("#fileName").addClass("loading"),void e(".done-btn").attr("disabled","disabled"))},complete:function(){e("#fileName").removeClass("loading"),e(".done-btn").attr("disabled",!1)},success:function(e){var t=e[0],r=e[1];t?n(r):(l=r,a(l,s))}})},doneFn:function(t){t.preventDefault(),e("#remotePic").hasClass("active")&&e("#remotePicUrl").val()&&(e("#remotePicUrl").addClass("loading"),e(".done-btn").attr("disabled","disabled"),s=e("#remotePicUrl").val().match(/\/([^\/]+)$/)[1],e.post("/img/fetch/image",{src:e("#remotePicUrl").val()},function(t){e(".done-btn").attr("disabled",!1),e("#remotePicUrl").removeClass("loading");var r=t.match(/\[(\d),/)[1],i=t.match(/\[\d,"(\S*)"\]/)[1];i=i.replace(/\\/g,""),"0"!==r?n(i):(l=i,a(l,s))},"text"))}})}}else{var c=this.getString("linkdialog");n({title:"插入链接",content:c,closeText:"取消",doneText:"插入",doneFn:function(){a(e("#editorLinkText").val())},show:function(){setTimeout(function(){e("#editorLinkText").focus()},100),e("#editorLinkText").keydown(function(t){13===t.which&&(t.preventDefault(),a(e(this).val()))})},hidden:function(){e(".wmd-input").focus()}})}return!0}t.startTag=t.startTag.replace(/!?\[/,""),t.endTag="",this.addLinkDef(t,null)},x.doAutoindent=function(e,t){var n=this,r=!1;e.before=e.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),e.selection||/^[ \t]*(?:\n|$)/.test(e.after)||(e.after=e.after.replace(/^[^\n]*/,function(t){return e.selection=t,""}),r=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(e.before)&&n.doList&&n.doList(e),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(e.before)&&n.doBlockquote&&n.doBlockquote(e),/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&n.doCode&&n.doCode(e),r&&(e.after=e.selection+e.after,e.selection="")},x.doBlockquote=function(e,t){e.selection=e.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(t,n,r,i){return e.before+=n,e.after=i+e.after,r}),e.before=e.before.replace(/(>[ \t]*)$/,function(t,n){return e.selection=n+e.selection,""}),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||this.getString("quoteexample");var n,r="",i="";if(e.before){for(var o=e.before.replace(/\n$/,"").split("\n"),a=!1,s=0;s<o.length;s++){var l=!1;n=o[s],a=a&&n.length>0,/^>/.test(n)?(l=!0,!a&&n.length>1&&(a=!0)):l=/^[ \t]*$/.test(n)?!0:a,l?r+=n+"\n":(i+=r+n,r="\n")}/(^|\n)>/.test(r)||(i+=r,r="")}e.startTag=r,e.before=i,e.after&&(e.after=e.after.replace(/^\n?/,"\n")),e.after=e.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(t){return e.endTag=t,""});var c=function(t){var n=t?"> ":"";e.startTag&&(e.startTag=e.startTag.replace(/\n((>|\s)*)\n$/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})),e.endTag&&(e.endTag=e.endTag.replace(/^\n((>|\s)*)\n/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}))};/^(?![ ]{0,3}>)/m.test(e.selection)?(this.wrap(e,v.lineLength-2),e.selection=e.selection.replace(/^/gm,"> "),c(!0),e.skipLines()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(e),c(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),e.selection=this.hooks.postBlockquoteCreation(e.selection),/\n/.test(e.selection)||(e.selection=e.selection.replace(/^(> *)/,function(t,n){return e.startTag+=n,""}))},x.doCode=function(e,t){var n=/\S[ ]*$/.test(e.before),r=/^[ ]*\S/.test(e.after);
if(!r&&!n||/\n/.test(e.selection)){e.before=e.before.replace(/[ ]{4}$/,function(t){return e.selection=t+e.selection,""});var i=1,o=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&(i=0),/^\n(\t|[ ]{4,})/.test(e.after)&&(o=0),e.skipLines(i,o),e.selection?/^[ ]{0,3}\S/m.test(e.selection)?/\n/.test(e.selection)?e.selection=e.selection.replace(/^/gm,"    "):e.before+="    ":e.selection=e.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(e.startTag="```\n",e.selection=this.getString("codeexample"),e.endTag="\n```")}else e.trimWhitespace(),e.findTags(/`/,/`/),e.startTag||e.endTag?e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag="":(e.startTag=e.endTag="`",e.selection||(e.selection=this.getString("codeexample")))},x.doList=function(e,t,n){var r=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,i=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,o="-",a=1,s=function(){var e;return n?(e=" "+a+". ",a++):e=" "+o+" ",e},l=function(e){return void 0===n&&(n=/^\s*\d/.test(e)),e=e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(e){return s()})};if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),e.startTag){var c=/\d+[.]/.test(e.startTag);if(e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(e),e.skipLines(),c&&(e.after=e.after.replace(i,l)),n==c)return}var u=1;e.before=e.before.replace(r,function(e){return/^\s*([*+-])/.test(e)&&(o=g.$1),u=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.selection||(e.selection=this.getString("litem"));var d=s(),h=1;e.after=e.after.replace(i,function(e){return h=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.trimWhitespace(!0),e.skipLines(u,h,!0),e.startTag=d;var f=d.replace(/./g," ");this.wrap(e,v.lineLength-f.length),e.selection=e.selection.replace(/\n/g,"\n"+f)},x.doHeading=function(e,t){if(e.selection=e.selection.replace(/\s+/g," "),e.selection=e.selection.replace(/(^\s+|\s+$)/g,""),!e.selection)return e.startTag="## ",e.selection=this.getString("headingexample"),void(e.endTag=" ##");var n=0;e.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(e.startTag)&&(n=g.lastMatch.length),e.startTag=e.endTag="",e.findTags(null,/\s?(-+|=+)/),/=+/.test(e.endTag)&&(n=1),/-+/.test(e.endTag)&&(n=2),e.startTag=e.endTag="",e.skipLines(1,1);var r=0==n?2:n-1;if(r>0){var i=r>=2?"-":"=",o=e.selection.length;for(o>v.lineLength&&(o=v.lineLength),e.endTag="\n";o--;)e.endTag+=i}},x.doHorizontalRule=function(e,t){e.startTag="----------\n",e.selection="",e.skipLines(2,1,!0)},t}),define("tabIndent",[],function(){"use strict";var e={version:"0.1.8",config:{tab:"	"},events:{keydown:function(t){var n=e.config.tab,r=n.length;if(9===t.keyCode){t.preventDefault();var i=this.selectionStart,o=this.selectionEnd;if(t.shiftKey===!1)if(e.isMultiLine(this)){for(var a=e.findStartIndices(this),s=a.length,l=void 0,c=void 0,u=0;s--;){var d=a[s];a[s+1]&&i!=a[s+1]&&(d=a[s+1]),d>=i&&a[s]<o&&(this.value=this.value.slice(0,a[s])+n+this.value.slice(a[s]),l=a[s],c||(c=a[s+1]?a[s+1]-1:"end"),u++)}this.selectionStart=l,this.selectionEnd="end"!==c?c+r*u:this.value.length}else this.value=this.value.slice(0,i)+n+this.value.slice(i),this.selectionStart=i+r,this.selectionEnd=o+r;else if(e.isMultiLine(this)){for(var a=e.findStartIndices(this),s=a.length,l=void 0,c=void 0,u=0;s--;){var d=a[s];a[s+1]&&i!=a[s+1]&&(d=a[s+1]),d>=i&&a[s]<o&&(this.value.substr(a[s],r)==n&&(this.value=this.value.slice(0,a[s])+this.value.slice(a[s]+r),u++),l=a[s],c||(c=a[s+1]?a[s+1]-1:"end"))}this.selectionStart=l,this.selectionEnd="end"!==c?c-u*r:this.value.length}else this.value.substr(i-r,r)==n?(this.value=this.value.substr(0,i-r)+this.value.substr(i),this.selectionStart=i-r,this.selectionEnd=o-r):"\n"==this.value.substr(i-1,1)&&this.value.substr(i,r)==n&&(this.value=this.value.substring(0,i)+this.value.substr(i+r),this.selectionStart=i,this.selectionEnd=o-r)}else if(27===t.keyCode)e.events.disable(t);else if(13===t.keyCode&&t.shiftKey===!1){for(var h=e,f=this.selectionStart,a=h.findStartIndices(this),p=a.length,g=0,m=0,v=new RegExp("^"+n.replace("	","\\t").replace(/ /g,"\\s")+"+","g"),b="",y=null,x=0;p>x;x++){if(a[x+1]&&f>=a[x]&&f<a[x+1]){g=a[x],m=a[x+1]-1;break}g=a[p-1],m=this.value.length}if(b=this.value.slice(g,m),y=b.match(v),null!==y){t.preventDefault();var _=y[0],w=_.length,k=f-g;w>k&&(w=k,_=_.slice(0,k)),this.value=this.value.slice(0,f)+"\n"+_+this.value.slice(f),this.selectionStart=f+w+1,this.selectionEnd=this.selectionStart}}},disable:function(t){e.remove(t.target)},focus:function(){var t=e,n=this,r=setTimeout(function(){var e=(n.getAttribute("class")||"").split(" "),r=e.indexOf("tabIndent");n.addEventListener("keydown",t.events.keydown),n.style.backgroundPosition="top right",n.style.backgroundRepeat="no-repeat",-1!==r&&e.splice(r,1),e.push("tabIndent-rendered"),n.setAttribute("class",e.join(" ")),n.removeEventListener("focus",t.events.keydown)},500);n.addEventListener("blur",function i(){clearTimeout(r),n.removeEventListener("blur",i)})}},render:function(e){var t=this;"TEXTAREA"===e.nodeName&&(e.addEventListener("focus",t.events.focus),e.addEventListener("blur",function(e){t.events.disable(e)}))},renderAll:function(){for(var e=document.getElementsByTagName("textarea"),t=e.length,n=-1,r=[],i=void 0;t--;)r=(e[t].getAttribute("class")||"").split(" "),n=r.indexOf("tabIndent"),-1!==n&&(i=e[t],this.render(i)),n=-1,r=[],i=void 0},remove:function(e){if("TEXTAREA"===e.nodeName){var t=(e.getAttribute("class")||"").split(" "),n=t.indexOf("tabIndent-rendered");-1!==n&&(e.removeEventListener("keydown",this.events.keydown),e.style.backgroundImage="",t.splice(n,1),t.push("tabIndent"),e.setAttribute("class",t.length>1?t.join(" "):t[0]))}},removeAll:function(){for(var e=document.getElementsByTagName("textarea"),t=e.length,n=-1,r=[],i=void 0;t--;)r=(e[t].getAttribute("class")||"").split(" "),n=r.indexOf("tabIndent-rendered"),-1!==n&&(i=e[t],this.remove(i)),n=-1,r=[],i=void 0},isMultiLine:function(e){var t=e.value.slice(e.selectionStart,e.selectionEnd),n=new RegExp(/\n/);return n.test(t)?!0:!1},findStartIndices:function(e){for(var t=e.value,n=[],r=0;t.match(/\n/)&&t.match(/\n/).length>0;){r=n.length>0?n[n.length-1]:0;var i=t.search("\n");n.push(i+r+1),t=t.substring(i+1)}return n.unshift(0),n}};return e}),define("diff_match_patch",[],function(){function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var t=-1,n=1,r=0;return e.Diff,e.prototype.diff_main=function(e,t,n,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[r,e]]:[];"undefined"==typeof n&&(n=!0);var a=n,s=this.diff_commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var u=this.diff_compute_(e,t,a,o);return l&&u.unshift([r,l]),c&&u.push([r,c]),this.diff_cleanupMerge(u),u},e.prototype.diff_compute_=function(e,i,o,a){var s;if(!e)return[[n,i]];if(!i)return[[t,e]];var l=e.length>i.length?e:i,c=e.length>i.length?i:e,u=l.indexOf(c);if(-1!=u)return s=[[n,l.substring(0,u)],[r,c],[n,l.substring(u+c.length)]],e.length>i.length&&(s[0][0]=s[2][0]=t),s;if(1==c.length)return[[t,e],[n,i]];var d=this.diff_halfMatch_(e,i);if(d){var h=d[0],f=d[1],p=d[2],g=d[3],m=d[4],v=this.diff_main(h,p,o,a),b=this.diff_main(f,g,o,a);return v.concat([[r,m]],b)}return o&&e.length>100&&i.length>100?this.diff_lineMode_(e,i,a):this.diff_bisect_(e,i,a)},e.prototype.diff_lineMode_=function(e,i,o){var a=this.diff_linesToChars_(e,i);e=a.chars1,i=a.chars2;var s=a.lineArray,l=this.diff_main(e,i,!1,o);this.diff_charsToLines_(l,s),this.diff_cleanupSemantic(l),l.push([r,""]);for(var c=0,u=0,d=0,h="",f="";c<l.length;){switch(l[c][0]){case n:d++,f+=l[c][1];break;case t:u++,h+=l[c][1];break;case r:if(u>=1&&d>=1){l.splice(c-u-d,u+d),c=c-u-d;for(var a=this.diff_main(h,f,!1,o),p=a.length-1;p>=0;p--)l.splice(c,0,a[p]);c+=a.length}d=0,u=0,h="",f=""}c++}return l.pop(),l},e.prototype.diff_bisect_=function(e,r,i){for(var o=e.length,a=r.length,s=Math.ceil((o+a)/2),l=s,c=2*s,u=new Array(c),d=new Array(c),h=0;c>h;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var f=o-a,p=f%2!=0,g=0,m=0,v=0,b=0,y=0;s>y&&!((new Date).getTime()>i);y++){for(var x=-y+g;y-m>=x;x+=2){var _,w=l+x;_=x==-y||x!=y&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1;for(var k=_-x;o>_&&a>k&&e.charAt(_)==r.charAt(k);)_++,k++;if(u[w]=_,_>o)m+=2;else if(k>a)g+=2;else if(p){var C=l+f-x;if(C>=0&&c>C&&-1!=d[C]){var S=o-d[C];if(_>=S)return this.diff_bisectSplit_(e,r,_,k,i)}}}for(var D=-y+v;y-b>=D;D+=2){var S,C=l+D;S=D==-y||D!=y&&d[C-1]<d[C+1]?d[C+1]:d[C-1]+1;for(var T=S-D;o>S&&a>T&&e.charAt(o-S-1)==r.charAt(a-T-1);)S++,T++;if(d[C]=S,S>o)b+=2;else if(T>a)v+=2;else if(!p){var w=l+f-D;if(w>=0&&c>w&&-1!=u[w]){var _=u[w],k=l+_-w;if(S=o-S,_>=S)return this.diff_bisectSplit_(e,r,_,k,i)}}}}return[[t,e],[n,r]]},e.prototype.diff_bisectSplit_=function(e,t,n,r,i){var o=e.substring(0,n),a=t.substring(0,r),s=e.substring(n),l=t.substring(r),c=this.diff_main(o,a,!1,i),u=this.diff_main(s,l,!1,i);return c.concat(u)},e.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,o=-1,a=r.length;o<e.length-1;){o=e.indexOf("\n",n),-1==o&&(o=e.length-1);var s=e.substring(n,o+1);n=o+1,(i.hasOwnProperty?i.hasOwnProperty(s):void 0!==i[s])?t+=String.fromCharCode(i[s]):(t+=String.fromCharCode(a),i[s]=a,r[a++]=s)}return t}var r=[],i={};r[0]="";var o=n(e),a=n(t);return{chars1:o,chars2:a,lineArray:r}},e.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],o=0;o<r.length;o++)i[o]=t[r.charCodeAt(o)];e[n][1]=i.join("")}},e.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;i>n;)e.substring(o,i)==t.substring(o,i)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;i>n;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):r>n&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var o=0,a=1;;){var s=e.substring(i-a),l=t.indexOf(s);if(-1==l)return o;a+=l,(0==l||e.substring(i-a)==t.substring(0,a))&&(o=a,a++)}},e.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var r,i,o,s,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=a.diff_commonPrefix(e.substring(n),t.substring(c)),h=a.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<h+d&&(u=t.substring(c-h,c)+t.substring(c,c+d),r=e.substring(0,n-h),i=e.substring(n+d),o=t.substring(0,c-h),s=t.substring(c+d))}return 2*u.length>=e.length?[r,i,o,s,u]:null}if(this.Diff_Timeout<=0)return null;var r=e.length>t.length?e:t,i=e.length>t.length?t:e;if(r.length<4||2*i.length<r.length)return null;var o,a=this,s=n(r,i,Math.ceil(r.length/4)),l=n(r,i,Math.ceil(r.length/2));if(!s&&!l)return null;o=l?s&&s[4].length>l[4].length?s:l:s;var c,u,d,h;e.length>t.length?(c=o[0],u=o[1],d=o[2],h=o[3]):(d=o[0],h=o[1],c=o[2],u=o[3]);var f=o[4];return[c,u,d,h,f]},e.prototype.diff_cleanupSemantic=function(e){for(var i=!1,o=[],a=0,s=null,l=0,c=0,u=0,d=0,h=0;l<e.length;)e[l][0]==r?(o[a++]=l,c=d,u=h,d=0,h=0,s=e[l][1]):(e[l][0]==n?d+=e[l][1].length:h+=e[l][1].length,s&&s.length<=Math.max(c,u)&&s.length<=Math.max(d,h)&&(e.splice(o[a-1],0,[t,s]),e[o[a-1]+1][0]=n,a--,a--,l=a>0?o[a-1]:-1,c=0,u=0,d=0,h=0,s=null,i=!0)),l++;for(i&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==t&&e[l][0]==n){var f=e[l-1][1],p=e[l][1],g=this.diff_commonOverlap_(f,p),m=this.diff_commonOverlap_(p,f);g>=m?(g>=f.length/2||g>=p.length/2)&&(e.splice(l,0,[r,p.substring(0,g)]),e[l-1][1]=f.substring(0,f.length-g),e[l+1][1]=p.substring(g),l++):(m>=f.length/2||m>=p.length/2)&&(e.splice(l,0,[r,f.substring(0,m)]),e[l-1][0]=n,e[l-1][1]=p.substring(0,p.length-m),e[l+1][0]=t,e[l+1][1]=f.substring(m),l++),l++}l++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var r=t.charAt(t.length-1),i=n.charAt(0),o=r.match(e.nonAlphaNumericRegex_),a=i.match(e.nonAlphaNumericRegex_),s=o&&r.match(e.whitespaceRegex_),l=a&&i.match(e.whitespaceRegex_),c=s&&r.match(e.linebreakRegex_),u=l&&i.match(e.linebreakRegex_),d=c&&t.match(e.blanklineEndRegex_),h=u&&n.match(e.blanklineStartRegex_);return d||h?5:c||u?4:o&&!s&&l?3:s||l?2:o||a?1:0}for(var i=1;i<t.length-1;){if(t[i-1][0]==r&&t[i+1][0]==r){var o=t[i-1][1],a=t[i][1],s=t[i+1][1],l=this.diff_commonSuffix(o,a);if(l){var c=a.substring(a.length-l);o=o.substring(0,o.length-l),a=c+a.substring(0,a.length-l),s=c+s}for(var u=o,d=a,h=s,f=n(o,a)+n(a,s);a.charAt(0)===s.charAt(0);){o+=a.charAt(0),a=a.substring(1)+s.charAt(0),s=s.substring(1);var p=n(o,a)+n(a,s);p>=f&&(f=p,u=o,d=a,h=s)}t[i-1][1]!=u&&(u?t[i-1][1]=u:(t.splice(i-1,1),i--),t[i][1]=d,h?t[i+1][1]=h:(t.splice(i+1,1),i--))}i++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(e){for(var i=!1,o=[],a=0,s=null,l=0,c=!1,u=!1,d=!1,h=!1;l<e.length;)e[l][0]==r?(e[l][1].length<this.Diff_EditCost&&(d||h)?(o[a++]=l,c=d,u=h,s=e[l][1]):(a=0,s=null),d=h=!1):(e[l][0]==t?h=!0:d=!0,s&&(c&&u&&d&&h||s.length<this.Diff_EditCost/2&&c+u+d+h==3)&&(e.splice(o[a-1],0,[t,s]),e[o[a-1]+1][0]=n,a--,s=null,c&&u?(d=h=!0,a=0):(a--,l=a>0?o[a-1]:-1,d=h=!1),i=!0)),l++;i&&this.diff_cleanupMerge(e)},e.prototype.diff_cleanupMerge=function(e){e.push([r,""]);for(var i,o=0,a=0,s=0,l="",c="";o<e.length;)switch(e[o][0]){case n:s++,c+=e[o][1],o++;break;case t:a++,l+=e[o][1],o++;break;case r:a+s>1?(0!==a&&0!==s&&(i=this.diff_commonPrefix(c,l),0!==i&&(o-a-s>0&&e[o-a-s-1][0]==r?e[o-a-s-1][1]+=c.substring(0,i):(e.splice(0,0,[r,c.substring(0,i)]),o++),c=c.substring(i),l=l.substring(i)),i=this.diff_commonSuffix(c,l),0!==i&&(e[o][1]=c.substring(c.length-i)+e[o][1],c=c.substring(0,c.length-i),l=l.substring(0,l.length-i))),0===a?e.splice(o-s,a+s,[n,c]):0===s?e.splice(o-a,a+s,[t,l]):e.splice(o-a-s,a+s,[t,l],[n,c]),o=o-a-s+(a?1:0)+(s?1:0)+1):0!==o&&e[o-1][0]==r?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,s=0,a=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(o=1;o<e.length-1;)e[o-1][0]==r&&e[o+1][0]==r&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),u=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),u=!0)),o++;u&&this.diff_cleanupMerge(e)},e.prototype.diff_xIndex=function(e,r){var i,o=0,a=0,s=0,l=0;for(i=0;i<e.length&&(e[i][0]!==n&&(o+=e[i][1].length),e[i][0]!==t&&(a+=e[i][1].length),!(o>r));i++)s=o,l=a;return e.length!=i&&e[i][0]===t?l:l+(r-s)},e.prototype.diff_prettyHtml=function(e){for(var i=[],o=/&/g,a=/</g,s=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],h=d.replace(o,"&amp;").replace(a,"&lt;").replace(s,"&gt;").replace(l,"&para;<br>");switch(u){case n:i[c]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case t:i[c]='<del style="background:#ffe6e6;">'+h+"</del>";break;case r:i[c]="<span>"+h+"</span>"}}return i.join("")},e.prototype.diff_text1=function(e){for(var t=[],r=0;r<e.length;r++)e[r][0]!==n&&(t[r]=e[r][1]);return t.join("")},e.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==t&&(n[r]=e[r][1]);return n.join("")},e.prototype.diff_levenshtein=function(e){for(var i=0,o=0,a=0,s=0;s<e.length;s++){var l=e[s][0],c=e[s][1];switch(l){case n:o+=c.length;break;case t:a+=c.length;break;case r:i+=Math.max(o,a),o=0,a=0}}return i+=Math.max(o,a)},e.prototype.diff_toDelta=function(e){for(var i=[],o=0;o<e.length;o++)switch(e[o][0]){case n:i[o]="+"+encodeURI(e[o][1]);break;case t:i[o]="-"+e[o][1].length;break;case r:i[o]="="+e[o][1].length}return i.join("	").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(e,i){for(var o=[],a=0,s=0,l=i.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{o[a++]=[n,decodeURI(u)]}catch(d){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var h=parseInt(u,10);if(isNaN(h)||0>h)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(s,s+=h);"="==l[c].charAt(0)?o[a++]=[r,f]:o[a++]=[t,f];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(s!=e.length)throw new Error("Delta length ("+s+") does not equal source text length ("+e.length+").");return o},e.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},e.prototype.match_bitap_=function(e,t,n){function r(e,r){var i=e/t.length,a=Math.abs(n-r);return o.Match_Distance?i+a/o.Match_Distance:a?1:i}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),o=this,a=this.Match_Threshold,s=e.indexOf(t,n);-1!=s&&(a=Math.min(r(0,s),a),s=e.lastIndexOf(t,n+t.length),-1!=s&&(a=Math.min(r(0,s),a)));var l=1<<t.length-1;s=-1;for(var c,u,d,h=t.length+e.length,f=0;f<t.length;f++){for(c=0,u=h;u>c;)r(f,n+u)<=a?c=u:h=u,u=Math.floor((h-c)/2+c);h=u;var p=Math.max(1,n-u+1),g=Math.min(n+u,e.length)+t.length,m=Array(g+2);m[g+1]=(1<<f)-1;for(var v=g;v>=p;v--){var b=i[e.charAt(v-1)];if(0===f?m[v]=(m[v+1]<<1|1)&b:m[v]=(m[v+1]<<1|1)&b|((d[v+1]|d[v])<<1|1)|d[v+1],m[v]&l){var y=r(f,v-1);if(a>=y){if(a=y,s=v-1,!(s>n))break;p=Math.max(1,2*n-s)}}}if(r(f+1,n)>a)break;d=m}return s},e.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},e.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var o=t.substring(e.start2-i,e.start2);o&&e.diffs.unshift([r,o]);var a=t.substring(e.start2+e.length1,e.start2+e.length1+i);a&&e.diffs.push([r,a]),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},e.prototype.patch_make=function(i,o,a){var s,l;if("string"==typeof i&&"string"==typeof o&&"undefined"==typeof a)s=i,l=this.diff_main(s,o,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(i&&"object"==typeof i&&"undefined"==typeof o&&"undefined"==typeof a)l=i,s=this.diff_text1(l);else if("string"==typeof i&&o&&"object"==typeof o&&"undefined"==typeof a)s=i,l=o;else{if("string"!=typeof i||"string"!=typeof o||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");s=i,l=a}if(0===l.length)return[];for(var c=[],u=new e.patch_obj,d=0,h=0,f=0,p=s,g=s,m=0;m<l.length;m++){var v=l[m][0],b=l[m][1];switch(d||v===r||(u.start1=h,u.start2=f),v){case n:u.diffs[d++]=l[m],u.length2+=b.length,g=g.substring(0,f)+b+g.substring(f);break;case t:u.length1+=b.length,u.diffs[d++]=l[m],g=g.substring(0,f)+g.substring(f+b.length);break;case r:b.length<=2*this.Patch_Margin&&d&&l.length!=m+1?(u.diffs[d++]=l[m],u.length1+=b.length,u.length2+=b.length):b.length>=2*this.Patch_Margin&&d&&(this.patch_addContext_(u,p),c.push(u),u=new e.patch_obj,d=0,p=g,h=f)}v!==n&&(h+=b.length),v!==t&&(f+=b.length)}return d&&(this.patch_addContext_(u,p),c.push(u)),c},e.prototype.patch_deepCopy=function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=new e.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=i.diffs[a].slice();o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,n[r]=o}return n},e.prototype.patch_apply=function(e,i){if(0==e.length)return[i,[]];e=this.patch_deepCopy(e);var o=this.patch_addPadding(e);i=o+i+o,this.patch_splitMax(e);for(var a=0,s=[],l=0;l<e.length;l++){var c,u=e[l].start2+a,d=this.diff_text1(e[l].diffs),h=-1;if(d.length>this.Match_MaxBits?(c=this.match_main(i,d.substring(0,this.Match_MaxBits),u),-1!=c&&(h=this.match_main(i,d.substring(d.length-this.Match_MaxBits),u+d.length-this.Match_MaxBits),(-1==h||c>=h)&&(c=-1))):c=this.match_main(i,d,u),-1==c)s[l]=!1,a-=e[l].length2-e[l].length1;else{s[l]=!0,a=c-u;var f;if(f=-1==h?i.substring(c,c+d.length):i.substring(c,h+this.Match_MaxBits),d==f)i=i.substring(0,c)+this.diff_text2(e[l].diffs)+i.substring(c+d.length);else{var p=this.diff_main(d,f,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(p)/d.length>this.Patch_DeleteThreshold)s[l]=!1;else{this.diff_cleanupSemanticLossless(p);for(var g,m=0,v=0;v<e[l].diffs.length;v++){var b=e[l].diffs[v];b[0]!==r&&(g=this.diff_xIndex(p,m)),b[0]===n?i=i.substring(0,c+g)+b[1]+i.substring(c+g):b[0]===t&&(i=i.substring(0,c+g)+i.substring(c+this.diff_xIndex(p,m+b[1].length))),b[0]!==t&&(m+=b[1].length)}}}}}return i=i.substring(o.length,i.length-o.length),[i,s]},e.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;t>=i;i++)n+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var o=e[0],a=o.diffs;if(0==a.length||a[0][0]!=r)a.unshift([r,n]),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>a[0][1].length){var s=t-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(o=e[e.length-1],a=o.diffs,0==a.length||a[a.length-1][0]!=r)a.push([r,n]),o.length1+=t,o.length2+=t;else if(t>a[a.length-1][1].length){var s=t-a[a.length-1][1].length;a[a.length-1][1]+=n.substring(0,s),o.length1+=s,o.length2+=s}return n},e.prototype.patch_splitMax=function(i){for(var o=this.Match_MaxBits,a=0;a<i.length;a++)if(!(i[a].length1<=o)){var s=i[a];i.splice(a--,1);for(var l=s.start1,c=s.start2,u="";0!==s.diffs.length;){var d=new e.patch_obj,h=!0;for(d.start1=l-u.length,d.start2=c-u.length,""!==u&&(d.length1=d.length2=u.length,d.diffs.push([r,u]));0!==s.diffs.length&&d.length1<o-this.Patch_Margin;){var f=s.diffs[0][0],p=s.diffs[0][1];f===n?(d.length2+=p.length,c+=p.length,d.diffs.push(s.diffs.shift()),h=!1):f===t&&1==d.diffs.length&&d.diffs[0][0]==r&&p.length>2*o?(d.length1+=p.length,l+=p.length,h=!1,d.diffs.push([f,p]),s.diffs.shift()):(p=p.substring(0,o-d.length1-this.Patch_Margin),d.length1+=p.length,l+=p.length,f===r?(d.length2+=p.length,c+=p.length):h=!1,d.diffs.push([f,p]),p==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(p.length))}u=this.diff_text2(d.diffs),u=u.substring(u.length-this.Patch_Margin);var g=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==g&&(d.length1+=g.length,d.length2+=g.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===r?d.diffs[d.diffs.length-1][1]+=g:d.diffs.push([r,g])),h||i.splice(++a,0,d)}}},e.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},e.prototype.patch_fromText=function(i){var o=[];if(!i)return o;for(var a=i.split("\n"),s=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<a.length;){var c=a[s].match(l);if(!c)throw new Error("Invalid patch string: "+a[s]);var u=new e.patch_obj;for(o.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),s++;s<a.length;){var d=a[s].charAt(0);try{var h=decodeURI(a[s].substring(1))}catch(f){throw new Error("Illegal escape in patch_fromText: "+h)}if("-"==d)u.diffs.push([t,h]);else if("+"==d)u.diffs.push([n,h]);else if(" "==d)u.diffs.push([r,h]);else{if("@"==d)break;if(""!==d)throw new Error('Invalid patch mode "'+d+'" in: '+h)}s++}}return o},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){var e,i;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,i=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var o,a=["@@ -"+e+" +"+i+" @@\n"],s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case n:o="+";break;case t:o="-";break;case r:o=" "}a[s+1]=o+encodeURI(this.diffs[s][1])+"\n"}return a.join("").replace(/%20/g," ")},this.diff_match_patch=e,this.DIFF_DELETE=t,this.DIFF_INSERT=n,this.DIFF_EQUAL=r,e}),function(e){"use strict";e("jquery_scrollTo",["jquery"],function(e){function t(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var n=e.scrollTo=function(t,n,r){return e(window).scrollTo(t,n,r)};return n.defaults={axis:"xy",duration:0,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"===r.compatMode?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,o){return"object"==typeof i&&(o=i,i=0),"function"==typeof o&&(o={onAfter:o}),"max"===r&&(r=9e9),o=e.extend({},n.defaults,o),i=i||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(i/=2),o.offset=t(o.offset),o.over=t(o.over),this._scrollable().each(function(){function a(e){c.animate(d,i,o.easing,e&&function(){e.call(this,u,o)})}if(null!==r){var s,l=this,c=e(l),u=r,d={},h=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=h?e(u):e(u,this),!u.length)return;case"object":(u.is||u.style)&&(s=(u=e(u)).offset())}var f=e.isFunction(o.offset)&&o.offset(l,u)||o.offset;e.each(o.axis.split(""),function(e,t){var r="x"===t?"Left":"Top",i=r.toLowerCase(),p="scroll"+r,g=l[p],m=n.max(l,t);if(s)d[p]=s[i]+(h?0:g-c.offset()[i]),o.margin&&(d[p]-=parseInt(u.css("margin"+r),10)||0,d[p]-=parseInt(u.css("border"+r+"Width"),10)||0),d[p]+=f[i]||0,o.over[i]&&(d[p]+=u["x"===t?"width":"height"]()*o.over[i]);else{var v=u[i];d[p]=v.slice&&"%"===v.slice(-1)?parseFloat(v)/100*m:v}o.limit&&/^\d+$/.test(d[p])&&(d[p]=d[p]<=0?0:Math.min(d[p],m)),!e&&o.queue&&(g!==d[p]&&a(o.onAfterFirst),delete d[p])}),a(o.onAfter)}}).end()},n.max=function(t,n){var r="x"===n?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var o="client"+r,a=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(a[i],s[i])-Math.min(a[o],s[o])},n})}("function"==typeof define&&define.amd?define:function(e,t){"use strict";"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}),function(e){var t;return e.event.fix=function(e){return function(t){return t=e.apply(this,arguments),(0===t.type.indexOf("copy")||0===t.type.indexOf("paste"))&&(t.clipboardData=t.originalEvent.clipboardData),t}}(e.event.fix),t={callback:e.noop,matchType:/image.*/},e.fn.pasteImageReader=function(n){return"function"==typeof n&&(n={callback:n}),n=e.extend({},t,n),this.each(function(){var t,r;return r=this,t=e(this),t.bind("paste",function(e){var t,i;return i=!1,t=e.clipboardData,Array.prototype.forEach.call(t.types,function(e,o){var a,s;if(!i)return e.match(n.matchType)||t.items[o].type.match(n.matchType)?(a=t.items[o].getAsFile(),s=new FileReader,s.onload=function(e){return n.callback.call(r,{dataURL:e.target.result,event:e,file:a,name:a.name})},s.readAsDataURL(a),i=!0):void 0})})})}}(jQuery),define("jquery_pasteImage",["jquery"],function(e){return function(){var t;return t||e.$.fn.pasteImageReader}}(this)),function(){!function(e){return"function"==typeof define&&define.amd?define("atwho",["jquery"],e):e(window.jQuery)}(function(e){var t,n,r,i,o,a,s,l,c=[].slice;r=function(){function t(t){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=e(t),this.iframe=null,this.setIframe(),this.listen()}return t.prototype.setIframe=function(e){return e?(this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e):(this.document=document,this.window=window,this.iframe=null)},t.prototype.controller=function(e){var t,n,r,i;if(this.alias_maps[e])n=this.controllers[this.alias_maps[e]];else{i=this.controllers;for(r in i)if(t=i[r],r===e){n=t;break}}return n?n:this.controllers[this.current_flag]},t.prototype.set_context_for=function(e){return this.current_flag=e,this},t.prototype.reg=function(e,t){var n,r;return n=(r=this.controllers)[e]||(r[e]=new i(this,e)),t.alias&&(this.alias_maps[t.alias]=e),n.init(t),this},t.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(e){return function(t){return e.on_keyup(t)}}(this)).on("keydown.atwhoInner",function(e){return function(t){return e.on_keydown(t)}}(this)).on("scroll.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this)).on("blur.atwhoInner",function(e){return function(t){var n;return(n=e.controller())?n.view.hide(t,n.get_opt("display_timeout")):void 0}}(this)).on("click.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this))},t.prototype.shutdown=function(){var e,t,n;n=this.controllers;for(t in n)e=n[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner")},t.prototype.dispatch=function(){return e.map(this.controllers,function(e){return function(t){var n;return(n=t.get_opt("delay"))?(clearTimeout(e.delayedCallback),e.delayedCallback=setTimeout(function(){return t.look_up()?e.set_context_for(t.at):void 0},n)):t.look_up()?e.set_context_for(t.at):void 0}}(this))},t.prototype.on_keyup=function(t){var n;switch(t.keyCode){case a.ESC:t.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:e.noop();break;case a.P:case a.N:t.ctrlKey||this.dispatch();break;default:this.dispatch()}},t.prototype.on_keydown=function(t){var n,r;if(n=null!=(r=this.controller())?r.view:void 0,n&&n.visible())switch(t.keyCode){case a.ESC:t.preventDefault(),n.hide(t);break;case a.UP:t.preventDefault(),n.prev();break;case a.DOWN:t.preventDefault(),n.next();break;case a.P:if(!t.ctrlKey)return;t.preventDefault(),n.prev();break;case a.N:if(!t.ctrlKey)return;t.preventDefault(),n.next();break;case a.TAB:case a.ENTER:if(!n.visible())return;t.preventDefault(),n.choose(t);break;default:e.noop()}},t}(),i=function(){function n(n,r){this.app=n,this.at=r,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,t.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new s(this),this.view=new l(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho["default"],t),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.call_default=function(){var t,n,r;r=arguments[0],t=2<=arguments.length?c.call(arguments,1):[];try{return o[r].apply(this,t)}catch(i){return n=i,e.error(""+n+" Or maybe At.js doesn't have function "+r)}},n.prototype.trigger=function(e,t){var n,r;return null==t&&(t=[]),t.push(this),n=this.get_opt("alias"),r=n?""+e+"-"+n+".atwho":""+e+".atwho",
this.$inputor.trigger(r,t)},n.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||o[e]},n.prototype.get_opt=function(e,t){var n;try{return this.setting[e]}catch(r){return n=r,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var e,t,n,r,i,o;return t=this.content(),e=this.$inputor.caret("pos",{iframe:this.app.iframe}),o=t.slice(0,e),r=this.callbacks("matcher").call(this,this.at,o,this.get_opt("start_with_space")),"string"==typeof r&&r.length<=this.get_opt("max_len",20)?(i=e-r.length,n=i+r.length,this.pos=i,r={text:r,head_pos:i,end_pos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},n.prototype.rect=function(){var e,t;if(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return"true"===this.$inputor.attr("contentEditable")&&(e=this.cur_rect||(this.cur_rect=e)||e),t=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+t}},n.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},n.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection)?this.ie8_range=this.app.document.selection.createRange():void 0},n.prototype.insert_content_for=function(t){var n,r,i;return r=t.data("value"),i=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!i?r:(n=e.extend({},t.data("item-data"),{"atwho-data-value":r,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,i,n))},n.prototype.insert=function(t,n){var r,i,o,a,s,l,c,u,d;return r=this.$inputor,d=this.callbacks("inserting_wrapper").call(this,r,t,this.get_opt("suffix")),r.is("textarea, input")?(l=r.val(),c=l.slice(0,Math.max(this.query.head_pos-this.at.length,0)),u=""+c+d+l.slice(this.query.end_pos||0),r.val(u),r.caret("pos",c.length+d.length,{iframe:this.app.iframe})):(a=this.range)?(o=a.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,a.setStart(a.endContainer,Math.max(o,0)),a.setEnd(a.endContainer,a.endOffset),a.deleteContents(),i=e(d,this.app.document)[0],a.insertNode(i),a.setEndAfter(i),a.collapse(!1),s=this.app.window.getSelection(),s.removeAllRanges(),s.addRange(a)):(a=this.ie8_range)&&(a.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),a.pasteHTML(d),a.collapse(!1),a.select()),r.is(":focus")||r.focus(),r.change()},n.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var t,n;if(t=this.catch_query())return n=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(t.text,e.proxy(n,this)),t},n}(),s=function(){function t(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(e,t){var n,r,i;return n=this.fetch(),r=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,e,n,r)||[],i=this.context.callbacks("remote_filter"),n.length>0||!i&&0===n.length?t(n):i.call(this.context,e,t)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,e||[]))},t.prototype.load=function(e){return!this.saved()&&e?this._load(e):void 0},t.prototype.reload=function(e){return this._load(e)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done(function(e){return function(t){return e.save(t)}}(this)):this.save(t)},t}(),l=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return t.prototype.init=function(){var e;return e=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bind_event=function(){var t;return t=this.$el.find("ul"),t.on("mouseenter.atwho-view","li",function(n){return t.find(".cur").removeClass("cur"),e(n.currentTarget).addClass("cur")}).on("click",function(e){return function(t){return e.choose(t),t.preventDefault()}}(this))},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.choose=function(e){var t,n;return(t=this.$el.find(".cur")).length&&(n=this.context.insert_content_for(t),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,t),t),this.context.trigger("inserted",[t,e]),this.hide(e)),this.context.get_opt("hide_without_suffix")?this.stop_showing=!0:void 0},t.prototype.reposition=function(t){var n,r;return t.bottom+this.$el.height()-e(window).scrollTop()>e(window).height()&&(t.bottom=t.top-this.$el.height()),n={left:t.left,top:t.bottom},null!=(r=this.context.callbacks("before_reposition"))&&r.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},t.prototype.next=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.next(),t.length||(t=this.$el.find("li:first")),t.addClass("cur")},t.prototype.prev=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.$el.find("li:last")),t.addClass("cur")},t.prototype.show=function(){var e;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(e=this.context.rect())?this.reposition(e):void 0)},t.prototype.hide=function(e,t){var n;if(this.visible())return isNaN(t)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[e])):(n=function(e){return function(){return e.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,t))},t.prototype.render=function(t){var n,r,i,o,a,s,l;if(!(e.isArray(t)&&t.length>0))return void this.hide();for(this.$el.find("ul").empty(),r=this.$el.find("ul"),a=this.context.get_opt("tpl"),s=0,l=t.length;l>s;s++)i=t[s],i=e.extend({},i,{"atwho-at":this.context.at}),o=this.context.callbacks("tpl_eval").call(this.context,a,i),n=e(this.context.callbacks("highlighter").call(this.context,o,this.context.query.text)),n.data("item-data",i),r.append(n);return this.show(),this.context.get_opt("highlight_first")?r.find("li:first").addClass("cur"):void 0},t}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},o={before_save:function(t){var n,r,i,o;if(!e.isArray(t))return t;for(o=[],r=0,i=t.length;i>r;r++)n=t[r],e.isPlainObject(n)?o.push(n):o.push({name:n});return o},matcher:function(e,t,n){var r,i;return e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e),i=new RegExp(e+"([A-Za-z0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),r=i.exec(t),r?r[2]||r[1]:null},filter:function(e,t,n){var r,i,o,a;for(a=[],i=0,o=t.length;o>i;i++)r=t[i],~r[n].toLowerCase().indexOf(e.toLowerCase())&&a.push(r);return a},remote_filter:null,sorter:function(e,t,n){var r,i,o,a;if(!e)return t;for(a=[],i=0,o=t.length;o>i;i++)r=t[i],r.atwho_order=r[n].toLowerCase().indexOf(e.toLowerCase()),r.atwho_order>-1&&a.push(r);return a.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){var n;try{return e.replace(/\$\{([^\}]*)\}/g,function(e,n,r){return t[n]})}catch(r){return n=r,""}},highlighter:function(e,t){var n;return t?(n=new RegExp(">\\s*(\\w*?)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(n,function(e,t,n,r){return"> "+t+"<strong>"+n+"</strong>"+r+" <"})):e},before_insert:function(e,t){return e},inserting_wrapper:function(e,t,n){var r,i;return r=""===n?n:n||" ",e.is("textarea, input")?""+t+r:"true"===e.attr("contentEditable")?(r=""===n?n:n||"&nbsp;",/firefox/i.test(navigator.userAgent)?i="<span>"+t+r+"</span>":(n="<span contenteditable='false'>"+r+"<span>",i="<span contenteditable='false'>"+t+n+"</span>"),this.app.document.selection&&(i="<span contenteditable='true'>"+t+"</span>"),i):void 0}},n={load:function(e,t){var n;return(n=this.controller(e))?n.model.load(t):void 0},setIframe:function(e){return this.setIframe(e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t=e("<div id='atwho-container'></div>"),e.fn.atwho=function(i){var o,a;return a=arguments,e("body").append(t),o=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var t,s;return(s=(t=e(this)).data("atwho"))||t.data("atwho",s=new r(this)),"object"!=typeof i&&i?n[i]&&s?o=n[i].apply(s,Array.prototype.slice.call(a,1)):e.error("Method "+i+" does not exist on jQuery.caret"):s.reg(i.at,i)}),o||this},e.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:o,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(){!function(e){return"function"==typeof define&&define.amd?define("caret",["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t,n,r,i,o,a,s,l,c,u,d;return u="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(){return this.domInputor},t.prototype.getIEPosition=function(){return e.noop()},t.prototype.getPosition=function(){return e.noop()},t.prototype.getOldIEPos=function(){var e,t;return t=s.selection.createRange(),e=s.body.createTextRange(),e.moveToElementText(this.domInputor),e.setEndPoint("EndToEnd",t),e.text.length},t.prototype.getPos=function(){var e,t,n;return(n=this.range())?(e=n.cloneRange(),e.selectNodeContents(this.domInputor),e.setEnd(n.endContainer,n.endOffset),t=e.toString().length,e.detach(),t):s.selection?this.getOldIEPos():void 0},t.prototype.getOldIEOffset=function(){var e,t;return e=s.selection.createRange().duplicate(),e.moveStart("character",-1),t=e.getBoundingClientRect(),{height:t.bottom-t.top,left:t.left,top:t.top}},t.prototype.getOffset=function(){var t,n,r,i;if(c.getSelection&&(r=this.range())){if(r.endOffset-1<0)return null;t=r.cloneRange(),t.setStart(r.endContainer,r.endOffset-1),t.setEnd(r.endContainer,r.endOffset),i=t.getBoundingClientRect(),n={height:i.height,left:i.left+i.width,top:i.top},t.detach()}else s.selection&&(n=this.getOldIEOffset());return n&&!l&&(n.top+=e(c).scrollTop(),n.left+=e(c).scrollLeft()),n},t.prototype.range=function(){var e;return c.getSelection?(e=c.getSelection(),e.rangeCount>0?e.getRangeAt(0):null):void 0},t}(),n=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var e,t,n,r,i,o,a;return t=this.domInputor,o=s.selection.createRange(),i=0,o&&o.parentElement()===t&&(r=t.value.replace(/\r\n/g,"\n"),n=r.length,a=t.createTextRange(),a.moveToBookmark(o.getBookmark()),e=t.createTextRange(),e.collapse(!1),i=a.compareEndPoints("StartToEnd",e)>-1?n:-a.moveStart("character",-n)),i},t.prototype.getPos=function(){return s.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,s.selection?(n=t.createTextRange(),n.move("character",e),n.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},t.prototype.getIEOffset=function(e){var t,n,r,i;return n=this.domInputor.createTextRange(),e||(e=this.getPos()),n.move("character",e),r=n.boundingLeft,i=n.boundingTop,t=n.boundingHeight,{left:r,top:i,height:t}},t.prototype.getOffset=function(t){var n,r,i;return n=this.$inputor,s.selection?(r=this.getIEOffset(t),r.top+=e(c).scrollTop()+n.scrollTop(),r.left+=e(c).scrollLeft()+n.scrollLeft(),r):(r=n.offset(),i=this.getPosition(t),r={left:r.left+i.left-n.scrollLeft(),top:r.top+i.top-n.scrollTop(),height:i.height})},t.prototype.getPosition=function(e){var t,n,i,o,a,s,l;return t=this.$inputor,o=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===e&&(e=this.getPos()),l=t.val().slice(0,e),i=t.val().slice(e),a="<span style='position: relative; display: inline;'>"+o(l)+"</span>",a+="<span id='caret' style='position: relative; display: inline;'>|</span>",a+="<span style='position: relative; display: inline;'>"+o(i)+"</span>",s=new r(t),n=s.create(a).rect()},t.prototype.getIEPosition=function(e){var t,n,r,i,o;return r=this.getIEOffset(e),n=this.$inputor.offset(),i=r.left-n.left,o=r.top-n.top,t=r.height,{left:i,top:o,height:t}},t}(),r=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),e.each(this.css_attr,function(e,r){return t[r]=n.$inputor.css(r)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return e=this.$mirror.find("#caret"),t=e.position(),n={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),i={contentEditable:function(e){return!(!e[0].contentEditable||"true"!==e[0].contentEditable)}},a={pos:function(e){return e||0===e?this.setPos(e):this.getPos()},position:function(e){return s.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(t){var n,r;return r=this.getOffset(t),l&&(n=e(l).offset(),r.top+=n.top,r.left+=n.left),r}},s=null,c=null,l=null,d=function(e){var t;return(t=null!=e?e.iframe:void 0)?(l=t,c=t.contentWindow,s=t.contentDocument||c.document):(l=void 0,c=window,s=document)},o=function(e){var t;s=e[0].ownerDocument,c=s.defaultView||s.parentWindow;try{return l=c.frameElement}catch(n){t=n}},e.fn.caret=function(r,o,s){var l;return a[r]?(e.isPlainObject(o)?(d(o),o=void 0):d(s),l=i.contentEditable(this)?new t(this):new n(this),a[r].apply(l,[o])):e.error("Method "+r+" does not exist on jQuery.caret")},e.fn.caret.EditableCaret=t,e.fn.caret.InputCaret=n,e.fn.caret.Utils=i,e.fn.caret.apis=a})}.call(this),define("Editor",["main","sfModal","template","highLight","highlightjs","pagedown_editor","tabIndent","diff_match_patch","jquery_scrollTo","jquery_pasteImage","atwho","caret","fileUpload"],function(e,t,n,r,i,o,a,s){var l=function p(e){e=$.extend({toolbar:p.toolbar,statusbar:!0,status:p.statusbar},e),this.options=e,this.converter=null,this.isBig=!1,this.isLive=!1,this.originHeight=420},c=function(e){var t,n;return t=null!=(n=$.cookie("editor-code-detect-disabled"))?n:0,t>0?$(".code-detect").addClass("hide"):(e.find("p").each(function(e){var t,n;return t=$(this),n=i.highlightAuto(t.text()),n.r>2&&n.language?($(".code-detect").removeClass("hide"),t.addClass("bg-danger")):$(".code-detect").addClass("hide")}),e.find(".bg-danger").length>0?$(".code-detect").removeClass("hide"):void 0)},u=function(e){var t,n;n=function(){$(".editor__menu--zen").addClass("editor__menu--unzen").removeClass("editor__menu--zen"),$(".editor").addClass("editor_fullscreen"),$("body").addClass("noscroll"),$(".editor__resize").hide(),$(".wmd-input").css("height","100%"),e.isBig=!0},t=function(){$(".editor__resize").show(),$(".editor__menu--unzen").addClass("editor__menu--zen").removeClass("editor__menu--unzen"),$(".editor").removeClass("editor_fullscreen"),$("body").removeClass("noscroll"),e.isBig=!1},$(".editor__menu--zen").length?n():t&&t()},d=function(e){e.mode="preview",$(".editor").removeClass("liveMode editMode").addClass("previewMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--preview").addClass("muted"),r($("#wmd-preview"))},h=function(e){e.mode="edit",$(".editor").removeClass("liveMode previewMode").addClass("editMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--edit").addClass("muted")},f=function(e){e.mode="live",$(".editor").removeClass("editMode previewMode").addClass("liveMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--live").addClass("muted"),r($("#wmd-preview"))};return l.prototype.getVal=function(){return $(".wmd-input").val()},l.prototype.setVal=function(e){var t;return t=$(".wmd-input").val(e),this.pagedownEditor.refreshPreview(),t},l.prototype.change=function(e){e&&$(".wmd-input").on("input",function(){$(".editor").hasClass("error")&&($(".editor").removeClass("error").removeAttr("data-error"),$(".editor").next(".error--msg").remove()),e()})},l.prototype.render=function(n,i,l){var u,d,h,f,p,g,m,v,b,y,x,_,w,k,C,S,D,T,E,M,L,B,A,N,I,F,z,O;if(A=this,!this._rendered||this._rendered!==n){if(document.cookie.indexOf("typemode")>-1)return void $(n).addClass("wmd-input");i=i||"live",$(n).removeClass("hidden hide").addClass("mono form-control wmd-input"),$(n).before('<div class="editor-toolbar" id="wmd-button-bar"><ul class="editor-mode"></ul></div>'),$(n).wrap('<div class="wmd"></div>'),$(".wmd").after("<div class=\"editor-line\"></div><div class=\"editor-preview\"><div class='fmt' id='wmd-preview'></div></div>"),$(".wmd").append('<div style=\'position: absolute;z-index: 100;top: 31px;right: 0;\' class="alert alert-info code-detect hide" role="alert"><span class="showVideo" style="cursor: pointer;">使用代码格式化改进排版</span><span class=\'disable\' style=\'margin-left: 10px; cursor: pointer;\'>✕</span> </div>'),$(".code-detect .showVideo").click(function(){return t({title:"使用代码格式化改进排版",modalSize:"modal-lg",content:'<video style="width: 100%;" autoplay loop src="'+e.staticUrl+'/global/video/editor-code-func.mp4" autoplay poster="posterimage.jpg"></video>',closeText:"不再提示",doneText:"我已了解",closeClass:"close-btn btn-default",closeFn:function(){return $.cookie("editor-code-detect-disabled",1,{expires:365}),A.pagedownEditor.refreshPreview(),$(".code-detect").addClass("hide")}})}),$(".code-detect .disable").click(function(e){return e.stopPropagation(),$.cookie("editor-code-detect-disabled",1,{expires:365}),A.pagedownEditor.refreshPreview(),$(".code-detect").addClass("hide")}),a.config.tab="    ",a.render($(n)[0]),$(".wmd-input").pasteImageReader(function(e){x(e.name,e.dataURL)}),x=function(e,r){var i,o,a,s,l;return s=$(".wmd-input").val(),o=$(".wmd-input")[0].selectionStart,$(".wmd-input").val(s.slice(0,o)+"\n![图片上传中...]\n"+s.slice(o)),l="image/png",a={type:"POST"},a.url="/img/upload/image?enc=base64",a.name="image",i="xhrupload-"+parseInt(Math.random()*(2<<16)),a.contentType="multipart/form-data; boundary="+i,a.data="--"+i+'\ncontent-disposition: form-data; enc="base64"; name="'+a.name+'"; filename="'+encodeURIComponent(e)+'.base64"\nContent-Transfer-Encoding: base64\nContent-Type: '+l+"\n\n"+r.slice(22)+"\n\n--"+i+"--",$.ajax(a).success(function(e){var r,i,a,l;l=e[0],r=e[1],i="clipboard.png",l?(t(r),$(n).val(s.slice(0,o)+s.slice(o+13))):(a="\n!["+i+"]("+r+")\n",s=$(n).val(),$(n).val(s.slice(0,o)+a+s.slice(o+13)),A.pagedownEditor.refreshPreview(),$(".wmd-input")[0].setSelectionRange(o+1,o+1))}).error(function(e){return 413===e.status?$(n).val(s.slice(0,o)+s.slice(o+13)):void 0})},T=function(e){return $(".editor").addClass("dragging")},S=function(e){return $(".editor").removeClass("dragging")},D=function(e){return e.originalEvent.dataTransfer.dropEffect="copy"},C=function(e){var t,n,r,i,o,a;for($(".editor").removeClass("dragging"),o=e.originalEvent.dataTransfer.files,a=[],r=0,i=o.length;i>r;r++)t=o[r],window.FileReader?(e.preventDefault(),e.stopPropagation(),n=new FileReader,n.onload=function(e){return x(t.name,e.currentTarget.result)},a.push(n.readAsDataURL(t))):a.push(void 0);return a},$(".wmd-input").on({"dragenter.dragevent":T,"dragleave.dragevent":S,"dragover.dragevent":D,"drop.dragevent":C}),$(n).atwho({at:"@",callbacks:{remote_filter:function(e,t){var n,r;if(r={q:e},!e&&$("#answerIt").length)n=$("#answerIt").data("id"),r={objectId:n};else if(!e)return;$.getJSON("/api/users/search",r,function(e){e.status||t(e.data)})},tpl_eval:function(e,t){return'<li data-value="@'+t.name+"["+t.slug+']">'+(t.avatarUrl?'<img class="avatar-24 mr10" src="'+t.avatarUrl+'" />':"")+t.name+" &nbsp; <small>@"+t.slug+"</small></li>"}}}),this.element=$(n)[0],E=this.options,p=new o.getSanitizingConverter,o.Extra.init(p),m=new o.Editor(p),m.run(n.slice(1)),this.converter=p,this.pagedownEditor=m,g=new s,w="@mark"+Math.ceil(1e8*Math.random())+"@",L=$("#wmd-preview"),_="",N='<span class="diff" />',O=void 0,f=null,$("#wmd-preview a").attr("target","_blank"),m.hooks.chain("onPreviewRefresh",function(){!function(){var e,t,n,r,i,o,a,s,l,c,u,d,h,f,p=$("#wmd-preview").html();if(t=g.diff_main(_,p),_=p,t.length>0){for(h=[],a=w,r=0;r<t.length;)e=t[r],l=e[0],f=e[1],d=f.lastIndexOf("<"),n=f.lastIndexOf(">"),0!==l?(d>=0&&d>n?l>0?h.push(f.substring(0,d)+a+f.substring(d)):(o=h[h.length-1],i=o.lastIndexOf("<"),h[h.length-1]=o.substring(0,i)+a+o.substring(i)):l>0?h.push(f+a):h.push(a),a=""):h.push(f),r++;p=h.join(""),a||(c=p.indexOf(w),u=p.substring(0,c),s=p.substr(c+w.length),d=u.lastIndexOf("<"),n=u.lastIndexOf(">"),p=d>=0&&d>n?u.substring(0,d)+N+u.substring(d)+s:s.match(/\$\$/g)?u+s:u+N+s)}return $("#wmd-preview").html(p),p}(),$("#wmd-preview a").attr("target","_blank");var e,t,n,i,o;($("#wmd-preview pre").length||-1!==$("#wmd-preview").text().indexOf("$$"))&&r(L),t=$(".diff",L),o=!1,O&&clearTimeout(O),e=$(".diff",L).parent(),e.is(L)||(e.css("background-color","#D9EDF7"),O=setTimeout(function(){e.css("background-color","transparent")},4500)),t.length>0&&(i=t.position(),n=t.parent().css("line-height"),n=n?parseInt(n):0,(i.top<0||i.top>$(".editor-preview").height()-n)&&($(".editor-preview").scrollTo(t),o=!0)),f&&clearTimeout(f),f=setTimeout(function(){return c(L)},200)}),E.toolbar!==!1&&this.createToolbar(),B='<a class="editor__resize" href="javascript:void(0);">调整高度</a>',$(".editor").after(B),F=void 0,b=0,y=32,z=void 0,I=function(e){return z=$(".wmd-input"),b=k(e).y,F=z.height()-b,z.css("opacity",.3),$(document).mousemove(M).mouseup(v),!1},M=function(e){var t,n;return n=k(e).y,t=F+n,b>=n&&(t-=5),b=n,t=Math.max(y,t),z.height(t+"px"),y>t&&v(e),!1},v=function(){$(document).unbind("mousemove",M).unbind("mouseup",v),z.css({opacity:1}),z.focus(),z=null,F=null,b=0},k=function(e){return{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},$(".editor__resize").on("mousedown",I),$(window).scroll(function(){var e,t,n,r;A.isBig||(r=$(".editor").width(),n=$(".editor").offset().top,t=$(this).scrollTop(),e=62+$(".editor-help .tab-content").height(),t>=n?($(".editor-help-content.active").removeClass("active"),$(".editor__menu").css({position:"fixed",top:0,"z-index":1e3,width:r,"border-bottom":"1px solid #CCC"}),$(".editor-help").css({position:"fixed",top:"31px","z-index":1e3,width:r})):$(".editor__menu, .editor-help").css({position:"static",width:"auto","border-bottom":"none"}))}),this._rendered=n,"live"===i?$(".editor__menu--live").trigger("click"):"edit"===i?$(".editor__menu--edit").trigger("click"):"preview"===i&&$(".editor__menu--preview").trigger("click"),window.localStorage&&(u="autoSaveContent_"+location.pathname+location.search,h="autoSaveTitle_"+location.pathname+location.search,d="autoSaveTags_"+location.pathname+location.search,localStorage[u]&&$(n).val(localStorage[u]),localStorage[h]&&$("#myTitle").val(localStorage[h])),l&&l(A)}},l.prototype.createToolbar=function(e){var t,n,r,i,o,a;r=this,o='<li class="pull-right"><a class="editor__menu--preview" title="预览模式"></a></li><li class="pull-right"><a class="editor__menu--live" title="实况模式"></a></li><li class="pull-right"><a class="editor__menu--edit" title="编辑模式"></a></li><li class="pull-right editor__menu--divider"></li><li id="wmd-zen-button" class="pull-right" title="全屏"><a class="editor__menu--zen"></a></li>',i=$(o),$(".editor-mode").append(i),$(".editor").delegate(".editor__menu--edit","click",function(){$(this).hasClass("muted")||h(r)}),$(".editor").delegate(".editor__menu--preview","click",function(){$(this).hasClass("muted")||d(r)}),$(".editor").delegate(".editor__menu--live","click",function(){$(this).hasClass("muted")||f(r)}),$("#wmd-zen-button").find("a").removeClass("editor__menu--bold").addClass("editor__menu--zen"),$("#wmd-zen-button").click(function(){u(r)}),t='<title>Markdown 语法指南</title><link rel="stylesheet" href="'+$('head link[rel="stylesheet"]').attr("href")+'"><script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script><script src="https://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>',n=t+'<body style="background-color:#FAF2CC"><div class="editor-help"><ul class="editor-help-tabs nav nav-tabs" id="editorHelpTab" role="tablist">    <li rel="heading"><a href="#editorHelpHeading" role="tab" data-toggle="tab">标题 / 粗斜体</a></li>    <li rel="code"><a href="#editorHelpCode" role="tab" data-toggle="tag">代码</a></li>    <li rel="link"><a href="#editorHelpLink" role="tab" data-toggle="tag">链接</a></li>    <li rel="image"><a href="#editorHelpImage" role="tab" data-toggle="tag">图片</a></li>    <li rel="split"><a href="#editorHelpSplit" role="tab" data-toggle="tag">换行 / 分隔符</a></li>    <li rel="list"><a href="#editorHelpList" role="tab" data-toggle="tag">列表 / 引用</li></a>    <li class="pull-right"><a href="http://segmentfault.com/markdown" target="_blank">高级技巧</a></li>    </ul><div class="tab-content"><!-- 粗斜体、标题 --><div class="editor-help-content tab-pane fade" id="editorHelpHeading" rel="heading"><p>文章内容较多时，可以用标题分段：</p><pre>## 大标题 ##\n### 小标题 ###</pre><p>粗体 / 斜体</p><pre>*斜体文本*    _斜体文本_\n**粗体文本**    __粗体文本__\n***粗斜体文本***    ___粗斜体文本___</pre></div><!-- end 粗斜体、标题 --><!-- 代码 --><div class="editor-help-content tab-pane fade" id="editorHelpCode" rel="code"><p>如果你只想高亮语句中的某个函数名或关键字，可以使用 <code>`function_name()`</code> 实现</p><p>通常我们会根据您的代码片段适配合适的高亮方法，但你也可以用 <code>```</code> 包裹一段代码，并指定一种语言</p><pre>```<strong>javascript</strong>\n$(document).ready(function () {\n    alert(\'hello world\');\n});\n```</pre><p>支持的语言：<code>actionscript, apache, bash, clojure, cmake, coffeescript, cpp, cs, css, d, delphi, django, erlang, go, haskell, html, http, ini, java, javascript, json, lisp, lua, markdown, matlab, nginx, objectivec, perl, php, python, r, ruby, scala, smalltalk, sql, tex, vbscript, xml</code></p><p>您也可以使用 4 空格缩进，再贴上代码，实现相同的的效果</p><pre><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>def g(x):\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>yield from range(x, 0, -1)\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>yield from range(x)</pre></div><!-- end 代码 --><!-- 链接 --><div class="editor-help-content tab-pane fade" rel="link" id="editorHelpLink"><p>常用链接方法</p><pre>文字链接 [链接名称](http://链接网址)\n网址链接 &lt;http://链接网址&gt;</pre><p>高级链接技巧</p><pre>这个链接用 1 作为网址变量 [Google][1].\n这个链接用 yahoo 作为网址变量 [Yahoo!][yahoo].\n然后在文档的结尾为变量赋值（网址）\n\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[1]: http://www.google.com/\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[yahoo]: http://www.yahoo.com/</pre></div><!-- end 链接 --><!-- 图片 --><div class="editor-help-content tab-pane fade" id="editorHelpImage" rel="image"><p>跟链接的方法区别在于前面加了个感叹号 <code>!</code>，这样是不是觉得好记多了呢？</p><pre>![图片名称](http://图片网址)</pre><p>当然，你也可以像网址那样对图片网址使用变量</p><pre>这个链接用 1 作为网址变量 [Google][1].\n然后在文档的结尾位变量赋值（网址）\n\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[1]: http://www.google.com/logo.png</pre></div><!-- end 图片 --><!-- 换行、分隔符 --><div class="editor-help-content tab-pane fade" id="editorHelpSplit" rel="split"><p>如果另起一行，只需在当前行结尾加 2 个空格</p><pre>在当前行的结尾加 2 个空格<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>\n这行就会新起一行</pre><p>如果是要起一个新段落，只需要空出一行即可。</p><p>如果你有写分割线的习惯，可以新起一行输入三个减号 <code>-</code>：</p><pre>---\n</pre></div><!-- end 换行、分隔符 --><!-- 列表、引用 --><div class="editor-help-content tab-pane fade" id="editorHelpList" rel="list"><p>普通列表</p><pre>-<i class="nbsp">&nbsp;</i>列表文本前使用 [减号+空格]\n+<i class="nbsp">&nbsp;</i>列表文本前使用 [加号+空格]\n*<i class="nbsp">&nbsp;</i>列表文本前使用 [星号+空格]</pre><p>带数字的列表</p><pre>1.<i class="nbsp">&nbsp;</i>列表前使用 [数字+空格]\n2.<i class="nbsp">&nbsp;</i>我们会自动帮你添加数字\n7.<i class="nbsp">&nbsp;</i>不用担心数字不对，显示的时候我们会自动把这行的 7 纠正为 3</pre><p>引用</p><pre>&gt;<i class="nbsp">&nbsp;</i>引用文本前使用 [大于号+空格]\n&gt;<i class="nbsp">&nbsp;</i>折行可以不加，新起一行都要加上哦</pre></div><!-- end 列表、引用 --></div></div><script>$("#editorHelpTab a").eq(0).tab("show");$("#editorHelpTab a").click(function (e) {    var _$wrap = $(this).parent();    if(! _$wrap.hasClass("pull-right")) {        e.preventDefault();        $(this).tab("show");    }});</script></body>',a=null,$("#wmd-help-button").click(function(){a&&a.window?a.focus():(a=window.open("","Markdown Help","channelmode=yes, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, width=505, height=400, top=100, left=100"),a.document.write(n))})},l}),define("statusToggle",[],function(){"use strict";return function(e){e.data("toggle","false"),e.data("toggle")&&(e.on("active",function(t,n){e.data("toggle","true"),n.call(this)}),e.on("unactive",function(t,n){e.data("toggle","true"),n.call(this)}))}}),define("follow",["statusToggle","sfModal"],function(e,t){"use strict";return function(n){var r,i;r=$.extend({element:null,event:"click",url:null,toggleClass:"active",loadText:"加载中",unActiveText:"加关注",activeText:"已关注","do":"follow",successFn:function(e){return e.data.isEachFollowed?$(this).text("相互关注"):void 0},failFn:function(e){var n;return"form"===e.data[0]?(n=Object.keys(e.data[1])[0],t(e.data[1][n])):t(e.data[1])}},n),i=n.element,e(i),i.on(r.event,function(){i.hasClass(r.toggleClass)?i.trigger("unactive",function(){i.text(r.unActiveText).removeClass(r.toggleClass).attr("disabled","disabled"),$.post(r.url+"/"+r.element.data("id")+"/"+r["do"]+"/cancel",function(e){0===e.status?r.successFn.call(this,e):(i.text(r.activeText),r.failFn.call(this,e)),i.removeAttr("disabled")})}):i.trigger("active",function(){i.text(r.activeText).addClass(r.toggleClass).attr("disabled","disabled"),$.post(r.url+"/"+r.element.data("id")+"/"+r["do"],function(e){0===e.status?r.successFn.call(this,e):(i.text(r.unActiveText),r.failFn.call(this,e)),i.removeAttr("disabled")})})})}}),define("tagPopup",["jquery","sfModal","follow","jquery_tmpl"],function(e,t,n){"use strict";e.fn.tagPopup=function(t){var r,i,o,a;o=function(){e.getJSON("/api/tag/"+r.data("id"),function(t){var i,o;0!==t.data.length&&(t.data.excerpt?a.content="<p>"+t.data.excerpt+"</p>":a.content='<p class="text-muted">目前还没有关于这个标签的解释</p>',t.data.isFollowed?(t.data.isFollowedClass="active",t.data.isFollowedBtn="已关注"):(t.data.isFollowedClass="",t.data.isFollowedBtn="加关注"),a.template=e.tmpl(a.template,t.data)[0],r.popover(a),r.popover("show"),o=e(".tag-popup-"+r.data("id")),i=o.find("button"),n({element:i,url:"/api/tag",successFn:function(t){e(".tag-popup-"+i.data("id")+" .followers").text(t.data+" 人")}}))})},r=e(this),i=e(".tag-popup-"+r.data("id")),a={placement:r.data("placement")||"top",trigger:"manual",container:"body",content:"",html:!0,template:'<div class="popover tag-popup tag-popup-${id}">                <div class="arrow"></div>                <h3 class="popover-title"></h3>                <div class="popover-content"></div>                <div class="popover-footer">                    <a href="${url}">查看</a>                    <span class="text-muted">&middot;</span>                    <a href="${editUrl}">编辑</a>                    <span class="text-muted">&middot;</span>                    <a href="/feeds/tag/${name}">订阅</a>                    <div class="pull-right">                        <span class="text-muted followers">${followers} 人</span><button class="btn btn-default btn-xs tagfollow ${isFollowedClass}" data-id="${id}">${isFollowedBtn}</button></div></div></div>'
},"show"===t?0===i.length?o():i.show():"hide"===t&&i.remove()}}),requirejs(["main","highLight","getRelated","Editor","jquery_cookie","tagPopup"],function(e,t,n,r){var i,o,a,s,l,c,u,d,h,f,p,g,m,v,b,y;if("/faq"===location.pathname&&($('.panel-title a[data-target="'+location.hash+'"]').click(),y=$("#what-shouldnot-ask").offset().top-40,$(window).scrollTop(y)),$("#jobLeft").length>0&&(l=[{title:"UI设计师",cities:["杭州"],require:[{name:"岗位职责",data:["为网站、APP 进行视觉推导并完成设计方案","为新产品与新功能提供创意策划及用户界面的设计方案","为日常的运营活动及功能维护提供设计支持","参与前瞻性产品的创意设计和 DEMO 的实现"]},{name:"岗位要求",data:["2 年及以上相关行业经验","热爱设计，有宽广的行业视野与时尚的审美标准","熟练使用常用设计工具，拥有扎实的设计理论与技巧","强大的执行力，开放的心态，对品质有坚持，不盲目，不固执","富有激情、有创造力、积极主动、关注细节、学习能力强","良好的逻辑能力，条理清晰，对用户行为敏感"]},{name:"加分项",data:["有编码经验（HTML/CSS/JS）","有 Behance/Dribbble 账号并上传作品"]},{name:"薪水待遇",data:["月薪 10-18K","有机会获得融资前的全员期权","项目奖金"]}],tips:"注：简历请附带作品！"},{title:"视觉/品牌设计师",cities:["杭州"],require:[{name:"岗位职责",data:["负责公司和项目设计宣传形象、宣传物料（如漫画、宣传册、易拉宝玩偶、手办、T恤等）","负责平台运营设计需求（广告及活动）","对公司官网进行设计维护及其他推广类美术工作"]},{name:"岗位要求",data:["2年以上互联网公司品牌视觉设计和产品UI设计工作经验","正规院校视觉传达、艺术设计相关专业毕业，有扎实的美术功底","精通PS、AI、CD等设计软件工具，学习能力强","关注互联网产品，熟悉企业品牌设计和VI系统"]},{name:"加分项",data:["有手绘基础者优先","有互联网从业经验者更佳！"]},{name:"薪水待遇",data:["月薪 10-18K","有机会获得融资前的全员期权","项目奖金"]}]},{title:"PHP中高级工程师",cities:["杭州"],require:[{name:"岗位职责",data:["负责日常业务项目开发","负责框架的开发及维护","负责一部分运维工作","参与社区运营的讨论与执行"]},{name:"岗位要求",data:["2 年及以上开发经验","熟悉各种 PHP 框架并且在项目中使用过","熟悉 Redis","至少另外会 Java、Python、Ruby、Scala 中的一种","掌握基本的前端知识，知道以及会使用 HTML5 标准"]},{name:"特殊要求项（至少满足其中之一）",data:["有开源项目以及 GitHub 地址","有 SegmentFault 账号并有得分","有个人博客"]},{name:"薪水待遇",data:["月薪 10-25K","有机会获得融资前的全员期权","项目奖金"]}]},{title:"中高级iOS工程师",cities:["杭州"],require:[{name:"岗位职责",data:["负责公司手机客户端的开发与维护","负责其它手机产品的研发","负责一部分运维工作","参与社区运营的讨论与执行"]},{name:"岗位要求",data:["2年及以上经验","至少会 iOS 和 Android 一种，两种均掌握者优先","能够独立完成移动端程序设计","熟悉基于 RESTful API 的开发模式","良好的团队协作能力，并有 持续的推动力"]},{name:"特殊要求项（至少满足其中之一）",data:["开发过上榜热门应用","有 SegmentFault，GitHub 账号，及个人博客","有开源项目及地址"]},{name:"薪水待遇",data:["月薪 10-25K","有机会获得融资前的全员期权","项目奖金"]}]},{title:"前端开发工程师",cities:["杭州"],require:[{name:"岗位职责",data:["SegmentFault 主站和其他产品的研发维护"]},{name:"岗位要求",data:["2 年及以上开发经验","手快","偏重 JavaScript 方向","熟悉 jQuery、Bootstrap，独自开发过 jQuery 插件为佳","熟练掌握 HTML5 及 CSS3 标准","知道并会使用 AngularJS","知道 XSS 原理及防范"]},{name:"加分项",data:["有开源项目以及 GitHub 地址","有 SegmentFault 账号并有得分","有个人博客","是妹子"]},{name:"薪水待遇",data:["月薪 15-25K","有机会获得融资前的全员期权","项目奖金"]}]},{title:"技术编辑/运营",cities:["杭州"],require:[{name:"岗位职责",data:["负责日常技术内容的编撰，包括独立撰写和翻译","负责社区技术内容的日常运营工作","关注技术领域新鲜事物并报道","技术运营相关的内容和事件策划"]},{name:"岗位要求",data:["计算机及相关专业者，英语和文笔兼优","对社区有热情，容易接受新事物","会翻墙，有网站编辑经验，有一年以上的 IT 技术相关工作经验，软件开发者优先","强大的执行力，良好的逻辑能力，对用户行为敏感"]},{name:"加分项",data:["有内容、事件策划能力","有 GitHub 地址和 SegmentFault 帐号，或者个人博客","该职位提供实习，实习期至少三个月。"]},{name:"薪水待遇",data:["月薪 6-12K","有机会获得融资前的全员期权","项目奖金"]}]},{title:"社区运营/策划",cities:["杭州"],require:[{name:"岗位职责",data:["社区用户运营相关工作","社区内容运营和策划相关工作","运营相关的线上线下活动策划，以及部分市场策划","运营部相关工作的协助完成"]},{name:"岗位要求",data:["优秀的策划能力，能够制造话题和社区热点，引导用户","良好的沟通能力和执行能力，且能够独立完成任务","有新奇酷的想法，不拘泥于常规，善于在传统中加入新鲜元素"]},{name:"加分项",data:["有一定的技术相关知识","有一定的用户运营相关经验"]},{name:"薪水待遇",data:["月薪 6-12K","有机会获得融资前的全员期权","项目奖金"]}],tips:"注：该职位提供实习，实习期至少三个月。"},{title:"社区主编",cities:["杭州"],require:[{name:"岗位职责",data:["根据公司运营理念，负责内容建设的整体规划，提高网站的流量和影响力","负责网站内容质量的控制与评估，持续优化栏目内容","独立完成网站和栏目内容架构、频道栏目策划、网站专题活动策划","组织策划实施内容更新和对关键内容进行审核，确定优秀资源，保证内容安全","负责制定内容制作标准和规范，组织内容团队进行高质量的素材采集和策划等工作"]},{name:"岗位要求",data:["5年以上相关工作经验，有事件、内容、专题、活动等经验","具有良好的IT技术背景，熟悉IT技术的发展趋势和动态，具有出色的热点把握能力和新闻敏感性","工作细致耐心，责任心强，具有良好的团队合作精神和优秀的沟通、调动资源的能力","具备一定的创意能力，同时善于激发他人的创意想法"]},{name:"薪水待遇",data:["月薪 8-15k","有机会获得融资前的全员期权"]}]},{title:"品牌文案策划",cities:["杭州"],require:[{name:"岗位职责",data:["负责公司公关稿、发言稿等外宣材料的提纲撰写及采访跟进，并进行后续媒体跟踪、材料整理等","负责配合品牌活动进行方案的制定，策划适合于互联网传播的文案","负责协助品牌经理完成公司品牌宣传工作，包括合作方跟进、活动执行配合等"]},{name:"岗位要求",data:["2年以上工作经验，有品牌策划文案工作经验优先，新闻、中文系毕业优先考虑","有良好的文案写作能力及文字组织能力，具备良好品牌策划及事件策划能力","热爱新媒体，有创新精神","熟知互联网传播规律，有相关策划经验","有较强的沟通能力，能吃苦耐劳，具备良好的团队合作精神"]},{name:"薪水待遇",data:["月薪 5-10k","有机会获得融资前的全员期权"]}]},{title:"市场运营经理",cities:["杭州","北京"],require:[{name:"岗位职责",data:["独立完成产品市场推广方案策划、对外合作方案并组织实现","不断制造热点和创新营销推广方式，并组织资源形成独特有效的推广传播，实现品牌推广以及市场宣传，扩大产品在程序员群体中的知名度和影响力","维护已有合作伙伴日常合作关系，并积极拓展新的合作伙伴","收集并反馈用户对产品的建议，推动产品的持续改进"]},{name:"岗位要求",data:["2年及以上相关行业经验，有一定活动策划与执行的实际操作经验","对市场信息敏感，熟悉互联网推广模式","良好的沟通能力和执行能力，心理素质佳","思维敏捷，善于学习，团队合作和抗压能力强"]},{name:"薪水待遇",data:["月薪 10-15K","有机会获得融资前的全员期权","项目奖金"]}]},{title:"市场专员",cities:["杭州"],require:[{name:"岗位职责",data:["协助市场部同事线下活动前期准备工作：主要为前期物料的购买、嘉宾确认邮件以及相关合作伙伴有关已经确认的合作方式跟进","活动期间协助现场签到，引领，秩序维护，现场拍照，管理志愿者等","活动结束后，整理现场，协助报道。除了活动外，还会负责一些市场合作的简单处理，如交换友情链接等"]},{name:"岗位要求",data:["你是一个好玩的人 ","有技术背景，不一定是计算机专业，但是必须有开发相关的知识 ","很强的执行力，积极的心态，不抱怨的态度 ","有新奇酷的想法，不拘泥于常规，善于在传统中加入新鲜元素 ","独立能力很强，能够独立完成任务"]},{name:"加分项",data:["有 SegmentFault，GitHub 账号，及个人博客","有市场经验相关者"]},{name:"薪水待遇",data:["月薪 5-10K","有机会获得融资前的全员期权","项目奖金"]}],tips:"注：该职位提供实习，实习期至少三个月。"},{title:"高级产品经理",cities:["杭州"],require:[{name:"岗位职责",data:["根据公司战略，协助公司管理团队不断优化公司产品设计和研发流程","策划并执行用户调研，收集分析用户需求，持续优化改进产品用户体验","分析竞争对手的业务逻辑、市场动态、产品形态和竞争态势","与研发、设计、测试团队保持高效沟通，有效推动产品开发进度，确保产品按计划上线发布","负责产品生命周期管理，在产品不同发展阶段，适时进行产品改进和产品策略调整","基于公司核心战略，不断探索新的商业模式和产品形态，推动公司整体持续进步"]},{name:"岗位要求",data:["5年以上互联网产品设计和管理工作经验，熟悉PC/iOS/Android/微信等各平台产品设计","至少具有2年以上独立主导互联网产品设计研发的工作经历，具有极强的沟通能力和项目管理能力","热爱互联网，熟悉互联网行业发展态势、产品形态和常见的商业模式","有良好的逻辑性和结构性思维、优秀的创新能力和业务规划能力"]},{name:"加分项",data:["具有良好的研发技术背景优先","熟悉内容门户、社区网站产品者优先"]},{name:"薪水待遇",data:["月薪 10-20k","有机会获得融资前的全员期权","项目奖金"]}]}],c=document.getElementById("jobLeft"),p=document.getElementById("jobRight"),u=Math.ceil(l.length/2),g=l.splice(u),d=l,h=_.reduce(d,function(e,t){return e+_.template($("#hiringTpl").html())(t)},""),m=_.reduce(g,function(e,t){return e+_.template($("#hiringTpl").html())(t)},""),$("#jobLeft").html(h),$("#jobRight").html(m)),a=function(){var e,t,n,r,i;e=$(".page-fmt"),t=e.find("h1, h2, h3"),r='<div class="panel panel-default widget-outline"><div class="panel-heading" id="hideOutline">目录结构<span class="text-muted pull-right caret"></span></div><div class="panel-body"><ul id="articleIndex"></ul></div></div>',$(".widget-box").append(r),$(".widget-outline").css({width:$(".widget-box").width()}).find(".panel-body").css("max-height","inherit"),i=1,n=$("#articleIndex"),t.each(function(e){var t,r;""!==$(this).text().trim()&&($(this).attr("id","articleHeader"+e),r=parseInt($(this)[0].tagName.slice(1)),t=null,0===e||r===i?(t=$('<li><a href="#articleHeader'+e+'">'+$(this).text()+"</a></li>"),n.append(t)):r>i?(t=$('<ul><li><a href="#articleHeader'+e+'">'+$(this).text()+"</a></li></ul>"),n.append(t),n=t):i>r&&(t=$('<li><a href="#articleHeader'+e+'">'+$(this).text()+"</a></li>"),1===r?($("#articleIndex").append(t),n=$("#articleIndex")):(n.parent("ul").append(t),n=n.parent("ul"))),i=r)})},$(".SFLogin").click(function(){e.login()}),o=$(".page-fmt"),o.length>0&&(b=o.html(),b=b.replace(/!!([^\n!]+)!!/g,'<i class="nbsp">$1</i>').replace(/@([^\n@]+)@/g,'<span class="gray">$1</span>'),o.html(b)),$(".tour").length>0&&($("#tourStart").click(function(){return $("#startForm").removeClass("hidden"),$(this).hide()}),$(".tagPopup").hoverIntent(function(){var e;e=$(this).find(".tag"),$(".tag").tagPopup("hide"),e.tagPopup("show")},function(){var e;e=$(this).find(".tag"),e.tagPopup("hide")}),$.cookie("readTour","readed",{path:"/"}),$("#messageCount+span").remove(),$(".like").click(function(){$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),$(this).after('<span class="ani-num">+1</span>'),function(e){setTimeout(function(){e.next(".ani-num").addClass("active")},0),setTimeout(function(){},500)}($(this)))}),$("h1.animate").addClass("in"),$(window).scroll(function(){var e;e=$(this).scrollTop(),$(".animate").not(".in").each(function(){var t,n;n=$(this).offset().top,t=$(window).height(),e+.7*t>n&&$(this).addClass("in")})}),$("#articleIndex").parent().toggle(),$("#hideOutline").click(function(){$(".post-nav").toggleClass("articleNavBig"),$("#articleIndex").parent().toggle()}),$(".rect").tooltip({placement:"bottom",container:"body",html:!0})),$(".markdown").length>0&&window.innerWidth>768&&($(".page-fmt").find("h1, h2, h3").length&&(a(),0===$("#articleIndex li").length&&$(".widget-outline").remove(),$("#hideOutline").click(function(){$(this).find(".caret").toggleClass("flipy"),$("#articleIndex").toggle(),$(".widget-outline").toggleClass("widget-outline__close")})),$(window).scroll(function(){var e,t,n;n=$(".big-intro").offset().top+20,e=$("footer").offset().top-$(".widget-outline").height()-80.5,t=$(this).scrollTop(),t>n&&e>t?$(".widget-outline").addClass("fixed").removeClass("putBottom"):($(".widget-outline").removeClass("fixed"),t>e&&$(".widget-outline").addClass("putBottom"))}),s=new r,s.render("#myEditor")),$(".biggod-link").each(function(){$(this).find(".share-weibo").attr({target:"_blank",href:"http://service.weibo.com/share/share.php?url=http://segmentfault.com/biggod&pic="+$(this).find("img")[0].src+"&title=我刚刚膜拜了"+encodeURIComponent($.trim($(this).next().next(".biggod-desc").text()))+" - "+$(this).next(".biggod-name").find("a").html()+"，炸天的经历啊，赞 SegmentFault！(发送自%40SegmentFault %23大神膜拜器%23)&appkey=1742025894"})}),f='<li><a href="{{url}}" class="mr10">{{acceptedWord}} {{title}}</a><span class="text-muted">{{answers}} 个回答</span></li>',v=void 0,$(".h2k-search").keydown(function(){v&&clearTimeout(v),v=setTimeout(function(){n($(".h2k-search").val(),f,"#qList",'<p class="mb0 text-muted">没有找到相似问题</p>')},500)}),$(".widget-suggest__close").click(function(){$("#titleSuggest").addClass("hidden")}),$(".box-item").click(function(e){$(this).addClass("opened")}),$(".btn-apply").click(function(e){e.stopPropagation()}),$(".hideOutline").click(function(){$(this).find(".caret").toggleClass("flipy"),$(this).parents(".post-nav").find(".articleIndex").toggle(),$(this).parents(".post-nav").find(".widget-outline").toggleClass("widget-outline__close")}),i=void 0,location.hash){if(i=$("a[href='"+location.hash+"']"),i.length<=0)return;i.trigger("click"),setTimeout(function(){$("html,body").scrollTo(i.offset().top)},0)}}),define("page_about",function(){});